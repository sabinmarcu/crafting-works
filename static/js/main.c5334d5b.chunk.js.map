{"version":3,"sources":["config/constants.ts","components/Redirect.tsx","hooks/scroll.ts","state/drawer.tsx","state/title.tsx","hooks/config.ts","hooks/usePrevious.ts","hooks/useLocalStorage.ts","hooks/useMatchMedia.ts","state/theme.tsx","hooks/useIsMobile.ts","components/styled.tsx","components/NavBar.tsx","hooks/useLocalStorageObject.ts","config/seed.ts","utils/calculate.ts","state/recipes-v3.tsx","utils/strings.ts","components/Filter.tsx","components/RecipesList.tsx","components/SymbolsList.tsx","components/BottomFab.tsx","components/Confirm.tsx","components/ResetSettings.tsx","components/ImportExportSettings.tsx","state/stack.tsx","components/StacksSettings.tsx","components/SettingsPane.tsx","components/Drawer.tsx","components/RecipeEditor.tsx","components/Tree.tsx","components/Visualization.tsx","components/RecipeViewer.tsx","screens/Recipe.tsx","components/CreateRecipe.tsx","screens/Home.tsx","screens/Test.tsx","screens/404.tsx","App.tsx","index.tsx"],"names":["mobileBreakpoint","recipeBaseRoute","Redirect","history","useHistory","search","useMemo","window","location","substr","split","map","it","decodeURIComponent","reduce","prev","key","value","useEffect","r","push","usePreventScroll","useState","active","setOpen","onOpen","useCallback","onClose","document","body","style","top","scrollY","position","touchAction","scrollTo","parseInt","open","close","DrawerContext","createContext","isOpen","toggle","useDrawer","useContext","DrawerProvider","children","setIsOpen","t","scrollPrevent","Provider","TitleContext","title","isRoot","setTitle","useTitle","TitleProvider","setIsRoot","update","input","root","Title","undefined","_shouldLog","process","_prefix","groupCollapsed","console","groupEnd","log","logGroup","message","rest","forEach","Array","isArray","makeMatcher","pf","RegExp","join","makeKey","isKey","match","makeType","type","isType","logState","usePrevious","ref","useRef","current","useLocalStorage","defaultValue","prevKey","initialLoad","setInitialLoad","setValue","val","localStorage","getItem","JSON","parse","shouldUpdate","existingValue","e","error","removeItem","setItem","stringify","handler","storageArea","k","oldValue","newValue","isValidKey","isLocalStorage","isRightKey","nv","addEventListener","removeEventListener","matchMedia","media","useMatchMedia","matches","setMatches","m","mediaMatch","themes","dark","createMuiTheme","palette","light","defaultTheme","ThemeContext","theme","reset","AppThemeProvider","setTheme","hasUserSelect","setHasUserSelect","toggleTheme","isLight","isDark","ThemeProvider","useTheme","useIsMobile","onMobile","toolbarStyles","background","paper","text","primary","shadow","shadows","StyledToolbar","withTheme","styled","Toolbar","StyledTabs","Tabs","StyledTabPanel","TabPanel","StyledLink","Link","ModalContainerRaw","Container","ModalContainer","className","isMobile","height","use100vh","renderStyle","ModalWrapper","Card","ModalContent","CardContent","RightCardActions","CardActions","StickyAppBar","AppBar","StyledToolbarContainer","DiffActions","StyledContainer","StyledIconButton","IconButton","StyledTypography","Typography","StyledWrapper","div","Spacer","NavBar","size","setSize","bounds","onResize","measureRef","variant","to","onClick","steelCasing","steel","glass","osmium","output","fissionCasing","lead","fissionReactorPort","eliteControlCircuit","fissionLogicAdapter","redstone","fissionFuelAssembly","basicChemicalTank","controlRodAssembly","reactorGlass","enrichedIron","reinforcedAlloy","advancedControlCircuit","infusedAlloy","basicControlCircuit","iron","turbineCasing","turbineBlade","turbineRotor","turbineValve","turbineVent","bars","pressureDispenser","electromagneticCoil","gold","energyTablet","rotationalComplex","structuralGlass","inductionCasing","inductionPort","basicInductionCell","lithium","basicEnergyCube","basicInductionProvider","what","recipes","Object","entries","obj","amount","Math","ceil","v","p","generateAST","parent","name","ast","keys","generateUses","uses","filter","includes","length","hasCircularDependency","symbol","recipe","symbols","ownSymbols","find","Boolean","composite","makePairs","prefix","readPairs","test","sort","replace","res","from","max","SetTypes","diff","orig","target","origKeys","targetKeys","toRemove","action","remove","toAdd","set","toChange","i","updateObject","path","indexOf","useLocalStorageObject","state","realKey","initial","diffUpdate","diffs","updateField","diffObj","network","RecipesContext","names","import","addRecipe","removeRecipe","useRecipes","RecipeProviderV3","seedData","setRecipes","recipeNames","allSymbols","values","idx","arr","importFunc","imports","useSymbols","RecipeContext","resources","addInput","removeInput","RecipeProvider","store","updateFunc","n","steps","toWalk","step","findIndex","reverse","generateSteps","useRecipe","camelCaseToCapitalized","toUpperCase","capitalizedToCamelCase","toLowerCase","capitalize","useFilter","list","processor","onChange","regex","id","meta","StyledTextField","TextField","Filter","fullWidth","InputProps","startAdornment","InputAdornment","RecipesList","recipeList","filterProps","List","ListItem","button","ListItemText","StyledChip","Chip","ClickableStyledChip","SymbolsList","onDelete","label","padding","FabWrapper","vertical","horizontal","BottomFab","Icon","Fab","color","useConfirm","onConfirm","confirmed","ConfirmDialog","Dialog","DialogTitle","Button","ResetAll","args","ResetThemeSelection","ResetRecipes","onReset","readFile","file","Promise","accept","reject","reader","FileReader","onload","result","Error","ArrayBuffer","data","readAsText","Import","onSubmit","el","createElement","appendChild","a","files","all","results","click","removeChild","Export","blob","Blob","URL","createObjectURL","display","href","download","StackContext","isEnabled","stackSize","toggleEnabled","setStackSize","StackProvider","setIsEnabled","setter","useStacks","StacksEnabled","FormControlLabel","control","Switch","checked","StacksAmount","changeHandler","Number","isNaN","SectionWrapper","section","direction","Section","SettingsView","drawerStyle","StyledDrawer","SwipeableDrawer","DrawerAppBar","DrawerWrapper","DrawerInner","article","tabs","Component","Drawer","tab","setTab","event","anchor","classes","TabContext","Tab","CloseIcon","RouteChangeDrawerClose","listen","StyledCard","StyledExpandCardContent","Input","useInput","Output","useOutput","AutocompleteWrapper","createFilterOptions","RecipeEditor","comboSymbols","usedSymbols","circularSymbols","deleteHandler","preventDefault","removeHandler","confirmArgs","newSymbol","setNewSymbol","CardHeader","flex","Autocomplete","_","inputValue","filterOptions","options","params","filtered","selectOnFocus","clearOnBlur","handleHomeEndKeys","getOptionLabel","option","renderOption","renderInput","SVGWrapper","SVG","default","disabled","styleLeafNodes","AST","translate","x","width","y","rootRef","shortName","trim","passive","innerRef","orientation","collapsible","nodeSize","textLayout","textAnchor","getPadding","spacing","StyledCardHeader","LargeModalContainer","LargeModalContent","LargeModalWrapper","largePadding","Visualization","modalOpen","setModalOpen","humanReadableAst","updateNode","Modal","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","elevation","borderRadiusGetter","shape","borderRadius","borderGetter","ResourceWrapper","columns","bold","ResourceText","ResourceNumber","SVGCard","ResourceHeader","ResourcePreview","ResourcesSummary","rootResources","startsWith","ASTPreview","tree","FullCol","StyledAccordionDetails","AccordionDetails","StepsView","setActive","activate","Accordion","expanded","AccordionSummary","expandIcon","toString","ResourcesView","RecipeViewer","baseRoute","route","RouteOnEmpty","hasLoaded","setHasLoaded","setTimeout","RecipeScreen","useLocation","useRouteMatch","useParams","pathname","url","isExact","prevTab","exact","component","CreateRecipeModal","availableSymbols","onSave","disableEnforceFocus","disableAutoFocus","CreateRecipeWrapper","AddIcon","HomeScreen","TestScreen","whiteSpace","Error404Screen","StyledContainerRaw","minHeight","App","basename","recipeRoute","CreateRecipe","rootElement","getElementById","render"],"mappings":"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","file":"static/js/main.c5334d5b.chunk.js","sourcesContent":["export const mobileBreakpoint = '(max-width: 1000px)';\nexport const baseURL = process.env.REACT_APP_BASE_URL || '/';\nexport const recipeBaseRoute = '/recipes/:name';\n","import React, { FC, useEffect, useMemo } from 'react';\nimport { useHistory } from 'react-router';\n\nexport const Redirect: FC = () => {\n  const history = useHistory();\n  const search = useMemo(\n    () => window.location.search\n      .substr(1)\n      .split('&')\n      .map((it) => it\n        .split('=')\n        .map(decodeURIComponent))\n      .reduce((prev, [key, value]) => ({\n        ...prev,\n        [key]: value,\n      }), {} as Record<string, string>),\n    [],\n  );\n  useEffect(\n    () => {\n      if (search.r) {\n        history.push(search.r);\n      }\n    },\n    [search, history],\n  );\n  return <></>;\n};\n\nexport default Redirect;\n","import {\n  useState,\n  useCallback,\n  useEffect,\n} from 'react';\n\nexport const usePreventScroll = () => {\n  const [active, setOpen] = useState<boolean>(false);\n  const onOpen = useCallback(\n    () => setOpen(true),\n    [setOpen],\n  );\n  const onClose = useCallback(\n    () => setOpen(false),\n    [setOpen],\n  );\n  useEffect(\n    () => {\n      if (active) {\n        document.body.style.top = `-${window.scrollY}px`;\n        document.body.style.position = 'fixed';\n        document.body.style.touchAction = 'none';\n      } else {\n        const scrollY = document.body.style.top;\n        document.body.style.position = '';\n        document.body.style.top = '';\n        document.body.style.touchAction = 'pan-y';\n        window.scrollTo(0, parseInt(scrollY || '0', 10) * -1);\n      }\n    },\n    [active],\n  );\n  return {\n    open: onOpen,\n    close: onClose,\n  };\n};\n\nexport default usePreventScroll;\n","import React, {\n  FC,\n  useState,\n  useCallback,\n  createContext,\n  useContext,\n  useEffect,\n} from 'react';\nimport { usePreventScroll } from '../hooks/scroll';\n\ntype DrawerContextType = {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n};\n\nconst DrawerContext = createContext<DrawerContextType>({\n  isOpen: false,\n  open: () => {},\n  close: () => {},\n  toggle: () => {},\n});\n\nexport const useDrawer = () => useContext(DrawerContext);\nexport const DrawerProvider: FC = ({ children }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const open = useCallback(() => setIsOpen(true), [setIsOpen]);\n  const close = useCallback(() => setIsOpen(false), [setIsOpen]);\n  const toggle = useCallback(() => setIsOpen((t) => !t), [setIsOpen]);\n  const scrollPrevent = usePreventScroll();\n  useEffect(\n    () => {\n      if (isOpen) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [isOpen, scrollPrevent],\n  );\n  return (\n    <DrawerContext.Provider\n      value={{\n        isOpen,\n        open,\n        close,\n        toggle,\n      }}\n    >\n      {children}\n    </DrawerContext.Provider>\n  );\n};\n","import React, {\n  FC,\n  useState,\n  useContext,\n  createContext,\n  useCallback,\n  useEffect,\n} from 'react';\n\ntype TitleContextType = {\n  title: string;\n  isRoot: boolean;\n  setTitle: (input: string, root?: boolean) => void;\n};\n\nexport const TitleContext = createContext<TitleContextType>({\n  title: 'Unknown',\n  isRoot: false,\n  setTitle: () => {},\n});\nexport const useTitle = () => useContext(TitleContext);\n\nexport const TitleProvider: FC = ({ children }) => {\n  const [title, setTitle] = useState('Unknown');\n  const [isRoot, setIsRoot] = useState(false);\n  const update = useCallback(\n    (input: string, root?: boolean) => {\n      setTitle(input);\n      setIsRoot(!!root);\n    },\n    [setTitle, setIsRoot],\n  );\n  return (\n    <TitleContext.Provider\n      value={{\n        title,\n        isRoot,\n        setTitle: update,\n      }}\n    >\n      {children}\n    </TitleContext.Provider>\n  );\n};\n\nexport const Title: FC<{\n  title?: string;\n  isRoot?: boolean;\n}> = ({ title, isRoot, children }) => {\n  const { setTitle } = useTitle();\n  useEffect(() => setTitle(title\n     || (typeof children === 'string' ? children : undefined)\n     || 'unknown',\n  isRoot), [setTitle, title, isRoot]);\n  return <></>;\n};\n","/* eslint-disable no-underscore-dangle,@typescript-eslint/naming-convention */\n\nlet _shouldLog = process.env.NODE_ENV === 'development';\nexport const enableLog = () => {\n  _shouldLog = true;\n};\nexport const disableLog = () => {\n  _shouldLog = false;\n};\nexport const shouldLog = () => _shouldLog;\n\nlet _prefix = 'app';\nexport const setPrefix = (value: string) => {\n  _prefix = `${value}`;\n};\nexport const prefix = () => _prefix;\n\n// eslint-disable-next-line no-console\nexport const groupCollapsed = (...args: any[]) => _shouldLog && console.groupCollapsed(...args);\n// eslint-disable-next-line no-console\nexport const groupEnd = () => _shouldLog && console.groupEnd();\n// eslint-disable-next-line no-console\nexport const log = (...args: any[]) => _shouldLog && console.log(...args);\n\nexport const logGroup = (message: string, key: string, ...rest: any[]) => {\n  groupCollapsed(`${message} %c${key}`, 'color: grey; font-size: 0.9em');\n  rest.forEach((it) => {\n    if (Array.isArray(it)) {\n      log(...it);\n    } else {\n      log(it);\n    }\n  });\n  groupEnd();\n};\n\nconst makeMatcher = (pf?: string) => new RegExp(['^', _prefix, ...(typeof pf !== 'undefined' ? [':', pf] : [])].join(''));\nexport const makeKey = (key: string, pf?: string) => [_prefix, [pf, key].join('')].join(':');\nexport const isKey = (key: string, pf?: string) => key.match(makeMatcher(pf));\nexport const stripKey = (key: string, pf?: string) => key.replace(makeMatcher(pf), '');\n\nexport const makeType = (type: string) => `###${type}###`;\nexport const isType = (type: string) => type.match(/^###([^#]+)###$/);\n\nexport const logState = (message: string, key: string, value: any) => {\n  logGroup(\n    message,\n    key,\n    [`Key: %c${key}`, 'color: blue; text-decoration: underline'],\n    [\n      `LocalStorage Key: %c${[_prefix, key].join(':')}`,\n      'color: blue; text-decoration: underline',\n    ],\n    ['Value:', value],\n  );\n};\n","import { useRef, useEffect } from 'react';\n\nexport const usePrevious = <T>(value: T): T | undefined => {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n};\n\nexport default usePrevious;\n","import {\n  useState, useEffect, Dispatch, SetStateAction,\n} from 'react';\n\nimport {\n  logGroup, logState, makeKey, isKey,\n} from './config';\nimport { usePrevious } from './usePrevious';\n\nexport const useLocalStorage = <T>(\n  key: string,\n  defaultValue?: T,\n): [T | undefined, Dispatch<SetStateAction<T | undefined>>] => {\n  const prevKey = usePrevious(key);\n  const [initialLoad, setInitialLoad] = useState<boolean>(false);\n  const [value, setValue] = useState<T>();\n  useEffect(() => {\n    if (!initialLoad || prevKey !== key) {\n      setInitialLoad(true);\n      const val = localStorage.getItem(makeKey(key));\n      if (val) {\n        try {\n          logState('⚙ LocalStorage Get', key, val);\n          setValue(JSON.parse(val));\n        } catch {\n          logState('❌ Could not parse LS data', key, val);\n          setValue(defaultValue);\n        }\n      } else {\n        setValue(defaultValue);\n      }\n    }\n  }, [initialLoad, key, defaultValue]);\n  useEffect(() => {\n    if (!initialLoad) {\n      return undefined;\n    }\n    let shouldUpdate = true;\n    try {\n      let existingValue: string | T | null = localStorage.getItem(makeKey(key));\n      try {\n        existingValue = JSON.parse(existingValue as string);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      } finally {\n        if (existingValue && existingValue === value) {\n          shouldUpdate = false;\n        }\n      }\n    } finally {\n      if (shouldUpdate) {\n        if (typeof value === 'undefined') {\n          logState('⚙ LocalStorage Remove', key, value);\n          localStorage.removeItem(makeKey(key));\n        } else {\n          logState('⚙ LocalStorage Set', key, value);\n          localStorage.setItem(makeKey(key), JSON.stringify(value));\n        }\n      }\n    }\n    return undefined;\n  }, [key, value, initialLoad]);\n  useEffect(() => {\n    const handler = ({\n      storageArea,\n      key: k,\n      oldValue,\n      newValue,\n    }: StorageEvent) => {\n      if (!k) {\n        return;\n      }\n      const isValidKey = isKey(k);\n      const isLocalStorage = storageArea === localStorage;\n      const isRightKey = k === makeKey(key);\n      if (!(isLocalStorage && isValidKey && isRightKey)) {\n        return;\n      }\n      try {\n        const [ov, nv] = [JSON.parse(oldValue!), JSON.parse(newValue!)];\n        logGroup(\n          '⚙ LocalStorage Event',\n          key,\n          [`Old Value: %c${ov}`, 'color: red; text-decoration: underline'],\n          [`New Value: %c${nv}`, 'color: green; text-decoration: underline'],\n        );\n        setValue(nv);\n      } catch (e) {\n        logState('❌ Could not parse LS data from Event', key, newValue);\n      }\n    };\n    window.addEventListener('storage', handler);\n    return () => window.removeEventListener('storage', handler);\n  }, [setValue, key]);\n  return [value, setValue];\n};\n\nexport default useLocalStorage;\n","import {\n  useState,\n  useEffect,\n} from 'react';\n\nconst matchMedia = (media: string) => window.matchMedia(media);\n\nexport const useMatchMedia = (media: string) => {\n  const [matches, setMatches] = useState<boolean>(\n    matchMedia(media).matches,\n  );\n  useEffect(\n    () => {\n      const handler = ({ matches: m }: MediaQueryListEvent) => setMatches(m);\n      const mediaMatch = matchMedia(media);\n      mediaMatch.addEventListener('change', handler);\n      return () => mediaMatch.removeEventListener('change', handler);\n    },\n    [media, setMatches],\n  );\n  return matches;\n};\n\nexport default useMatchMedia;\n","import { createMuiTheme, Theme, ThemeProvider } from '@material-ui/core';\nimport React, {\n  createContext,\n  useContext,\n  useCallback,\n  FC,\n  useMemo,\n  useEffect,\n} from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { useMatchMedia } from '../hooks/useMatchMedia';\n\nexport type ThemeType = 'light' | 'dark';\nexport type ThemeContextType = {\n  theme: ThemeType,\n  t: Theme,\n  toggle: () => void,\n  reset: () => void,\n};\n\nconst themes = {\n  dark: createMuiTheme({ palette: { type: 'dark' } }),\n  light: createMuiTheme({ palette: { type: 'light' } }),\n};\n\nconst defaultTheme = 'dark';\n\nexport const ThemeContext = createContext<ThemeContextType>({\n  theme: defaultTheme,\n  t: themes[defaultTheme],\n  toggle: () => {},\n  reset: () => {},\n});\n\nexport const AppThemeProvider: FC = ({ children }) => {\n  const [theme, setTheme] = useLocalStorage<ThemeType>('theme', defaultTheme);\n  const [hasUserSelect, setHasUserSelect] = useLocalStorage<boolean>('theme-select');\n  const toggleTheme = useCallback(\n    () => {\n      setHasUserSelect(true);\n      setTheme((t) => (t === 'light' ? 'dark' : 'light'));\n    },\n    [setTheme, setHasUserSelect],\n  );\n  const t = useMemo(\n    () => (theme ? themes[theme] : themes.light),\n    [theme],\n  );\n  const isLight = useMatchMedia('(prefers-color-scheme: light)');\n  const isDark = useMatchMedia('(prefers-color-scheme: dark)');\n  useEffect(\n    () => {\n      if (!hasUserSelect) {\n        if (isLight) {\n          setTheme('light');\n        } else if (isDark) {\n          setTheme('dark');\n        } else {\n          setTheme(defaultTheme);\n        }\n      }\n    },\n    [theme, hasUserSelect, isLight, isDark, setTheme],\n  );\n  const reset = useCallback(\n    () => {\n      setHasUserSelect(undefined);\n    },\n    [setHasUserSelect],\n  );\n\n  return (\n    <ThemeContext.Provider value={{\n      theme: theme || 'light',\n      t,\n      toggle: toggleTheme,\n      reset,\n    }}\n    >\n      <ThemeProvider theme={t}>\n        {children}\n      </ThemeProvider>\n    </ThemeContext.Provider>\n  );\n};\n\nexport const useTheme = () => useContext(ThemeContext);\n","import { mobileBreakpoint } from '../config/constants';\nimport { useMatchMedia } from './useMatchMedia';\n\nexport const useIsMobile = () => useMatchMedia(mobileBreakpoint);\n\nexport default useIsMobile;\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport {\n  AppBar,\n  Card,\n  CardActions,\n  CardContent,\n  Container,\n  Tabs,\n  Theme,\n  Toolbar,\n  withTheme,\n} from '@material-ui/core';\nimport { FC, ReactElement, useMemo } from 'react';\nimport { use100vh } from 'react-div-100vh';\nimport { TabPanel } from '@material-ui/lab';\nimport { mobileBreakpoint } from '../config/constants';\nimport { useIsMobile } from '../hooks/useIsMobile';\n\nexport const onMobile = `@media ${mobileBreakpoint}`;\n\nexport const toolbarStyles = ({\n  theme: {\n    palette: {\n      background: { paper: background },\n      text: { primary: text },\n    },\n    shadows: [,shadow],\n  },\n}: {theme: Theme}) => `\n  background: ${background};\n  color: ${text};\n  box-shadow: ${shadow}\n`;\n\nexport const StyledToolbar = withTheme(\n  styled(Toolbar)`\n    ${toolbarStyles}\n  `,\n);\n\nexport const StyledTabs = withTheme(\n  styled(Tabs)`\n    .MuiTabs-flexContainer {\n      ${toolbarStyles}\n    }\n  `,\n);\n\nexport const StyledTabPanel = styled(TabPanel)`\n  padding: 0 !important;\n`;\n\nexport const StyledLink = styled(Link)`\n  &, & > * {\n    text-decoration: none;\n    cursor: pointer !important;\n    color: inherit;\n  }\n`;\n\nexport const ModalContainerRaw = styled(Container)`\n  padding: 25px !important;\n  margin-top: 25px !important;\n  display: flex !important;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  outline: 0;\n  ${onMobile} {\n    margin: 0;\n    width: 100vw;\n    padding: 15px;\n    padding-left: calc(15px + env(safe-area-inset-left)) !important;\n    padding-right: calc(15px + env(safe-area-inset-right)) !important;\n  }\n`;\n\nexport const ModalContainer: FC<{\n  className?: 'string',\n  style?: StyleSheetList\n}> = ({\n  children,\n  className,\n  style,\n}) => {\n  const isMobile = useIsMobile();\n  const height = use100vh();\n  const renderStyle = useMemo(\n    () => ({\n      ...style,\n      height: (isMobile && height) || '100vh',\n    }),\n    [height, style],\n  );\n  return (\n    <ModalContainerRaw\n      style={renderStyle}\n      className={className}\n    >\n      {children as ReactElement}\n    </ModalContainerRaw>\n  );\n};\n\nexport const ModalWrapper = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n  width: 100%;\n`;\n\nexport const ModalContent = styled(CardContent)`\n  flex: 1;\n`;\n\nexport const RightCardActions = styled(CardActions)`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const StickyAppBar = styled(AppBar)`\n  position: sticky !important;\n`;\n\nexport const StyledToolbarContainer = styled(Container)`\n  display: flex !important;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport default StyledLink;\n","import React, { FC, useState } from 'react';\nimport {\n  AppBar,\n  Container,\n  Typography,\n  IconButton,\n} from '@material-ui/core';\nimport Measure, { BoundingRect } from 'react-measure';\n\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport styled from 'styled-components';\n\nimport { useDrawer } from '../state/drawer';\nimport { useTitle } from '../state/title';\nimport { useTheme } from '../state/theme';\n\nimport { StyledLink, StyledToolbar } from './styled';\n\nconst StyledContainer = styled(Container)`\n  display: flex !important;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst StyledIconButton = styled(IconButton)`\n  margin: 0 5px;\n`;\n\nconst StyledTypography = styled(Typography)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst StyledWrapper = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Spacer = styled.div`\n  width: 100%;\n`;\n\nexport const NavBar: FC = () => {\n  const { open } = useDrawer();\n  const { title, isRoot } = useTitle();\n  const { theme, toggle } = useTheme();\n  const [size, setSize] = useState<BoundingRect>();\n  return (\n    <>\n      <Spacer style={{ height: size?.height ?? 50 }} />\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <AppBar position=\"fixed\" ref={measureRef}>\n            <StyledToolbar>\n              <StyledContainer>\n                <StyledWrapper>\n                  <StyledTypography variant=\"body1\">\n                    {!isRoot && (\n                    <StyledLink to=\"/\">\n                      <StyledIconButton>\n                        <ArrowBackIcon />\n                      </StyledIconButton>\n                    </StyledLink>\n                    )}\n                    {title}\n                  </StyledTypography>\n                </StyledWrapper>\n                <StyledWrapper>\n                  <StyledIconButton onClick={toggle}>\n                    {theme === 'light'\n                      ? <Brightness7Icon />\n                      : <Brightness4Icon />}\n                  </StyledIconButton>\n                  <StyledIconButton onClick={open}>\n                    <MenuIcon />\n                  </StyledIconButton>\n                </StyledWrapper>\n              </StyledContainer>\n            </StyledToolbar>\n          </AppBar>\n        )}\n      </Measure>\n    </>\n  );\n};\n\nexport default NavBar;\n","import {\n  useState,\n  useEffect,\n  Dispatch,\n  SetStateAction,\n  useCallback,\n} from 'react';\n\nimport {\n  logState,\n  makeKey,\n  isKey,\n  makeType,\n  isType,\n} from './config';\nimport { usePrevious } from './usePrevious';\n\ntype PairType = { key: string, value: any };\nconst makePairs = (\n  obj: any,\n  prefix: string,\n): PairType[] => Object.entries(obj)\n  .reduce(\n    (prev, [k, v]) => {\n      const key = [prefix, k].join(':');\n      return [\n        ...prev,\n        ...(typeof v === 'object'\n          ? [\n            { key, value: makeType(Array.isArray(v) ? 'array' : 'object') },\n            ...makePairs(v, key),\n          ]\n          : [{ key, value: v }]\n        ),\n      ];\n    },\n    [] as PairType[],\n  ) as PairType[];\n\nconst readPairs = (prefix: string, type = 'object'): any => {\n  const test = new RegExp(`^${prefix}:[^:]+$`);\n  const keys: {key: string, value: any}[] = Object.keys(localStorage)\n    .sort()\n    .filter((it) => test.test(it))\n    .map((it) => {\n      let value = localStorage.getItem(it);\n      if (!value) {\n        return undefined;\n      }\n      const t = isType(value);\n      if (t) {\n        value = readPairs(it, t[1]) || value;\n      }\n      return { key: it.replace([prefix, ''].join(':'), ''), value };\n    })\n    .filter(Boolean) as {key: string, value: any}[];\n  const res = keys.reduce(\n    (prev, { key, value }) => ({\n      ...prev,\n      [key]: /^[0-9]+$/.test(value) ? parseInt(value, 10) : value,\n    }), {},\n  );\n  switch (type) {\n    case 'array': return Array.from({\n      ...res,\n      length: keys.reduce(\n        (prev, { key }) => Math.max(\n          parseInt(key, 10),\n          prev,\n        ), 0,\n      ) + 1,\n    });\n    case 'object': return res;\n    default: return undefined;\n  }\n};\n\nenum DiffActions {\n  remove,\n  set,\n}\ntype DiffPair = {\n  key: string,\n  action: DiffActions,\n  value?: any,\n};\nconst diff = (orig: any, target: any, prefix?: string): DiffPair[] => {\n  const origKeys = Object.keys(orig);\n  const targetKeys = Object.keys(target);\n  const toRemove = origKeys.filter((it) => !targetKeys.includes(it))\n    .map((it) => ({ key: [prefix, it].join(':'), action: DiffActions.remove }));\n  const toAdd = targetKeys.filter((it) => !origKeys.includes(it))\n    .reduce(\n      (prev, it) => [\n        ...prev,\n        {\n          key: [prefix, it].join(':'),\n          value: (typeof target[it] === 'object'\n            && (Array.isArray(target[it])\n              ? makeType('array')\n              : makeType('object')))\n            || target[it],\n          action: DiffActions.set,\n        },\n        ...makePairs(target[it], [prefix, it].join(':')),\n      ],\n      [] as PairType[],\n    ).map((it) => ({ ...it, action: DiffActions.set }));\n  const toChange = origKeys.filter((it) => targetKeys.includes(it))\n    .filter((it) => orig[it] !== target[it])\n    .reduce((prev, it) => [\n      ...prev,\n      ...(typeof target[it] === 'object'\n        ? [\n          {\n            key: [prefix, it].join(':'),\n            value: (Array.isArray(target[it])\n              ? makeType('array')\n              : makeType('object')),\n            action: DiffActions.set,\n          },\n          ...makePairs(target[it], [prefix, it].join(':'))\n            .map((i) => ({ ...i, action: DiffActions.set })),\n        ]\n        : [{\n          key: [prefix, it].join(':'),\n          value: target[it],\n          action: DiffActions.set,\n        }]),\n    ], [] as DiffPair[]) as DiffPair[];\n  return [\n    ...toRemove,\n    ...toAdd,\n    ...toChange,\n    ...origKeys.filter((it) => targetKeys.includes(it))\n      .filter((it) => typeof orig[it] === 'object')\n      .reduce(\n        (prev, it) => [\n          ...prev,\n          ...diff(orig[it], target[it], [prefix, it].join(':')),\n        ],\n        [] as DiffPair[],\n      ) as DiffPair[],\n  ].filter(Boolean);\n};\n\nconst updateObject = (obj: any, path: string, value: any): any => {\n  if (path.length === 0) {\n    return /^[0-9]+$/.test(value) ? parseInt(value, 10) : value;\n  }\n  let split = path.indexOf('.');\n  if (split === -1) {\n    split = path.length;\n  }\n  const [key, rest] = [path.substr(0, split), path.substr(split + 1)];\n  return {\n    ...obj,\n    [key]: updateObject(obj[key] || {}, rest, value),\n  };\n};\n\nenum SetTypes {\n  initial,\n  update,\n  network,\n}\n\ntype ValueType = {\n  action: SetTypes,\n  value: any,\n};\n\nexport const useLocalStorageObject = (\n  key: string,\n  defaultValue?: any,\n): [\n    any,\n    Dispatch<SetStateAction<any>>,\n    (path: string, value: any\n    ) => void,\n  ] => {\n  const prevKey = usePrevious(key);\n  const [initialLoad, setInitialLoad] = useState<boolean>(false);\n  const [state, setValue] = useState<ValueType>();\n  useEffect(() => {\n    if (!initialLoad || prevKey !== key) {\n      setInitialLoad(true);\n      const realKey = makeKey(key);\n      const val = localStorage.getItem(realKey);\n      if (val) {\n        setValue({ value: readPairs(realKey), action: SetTypes.initial });\n      } else {\n        setValue({ value: defaultValue, action: SetTypes.initial });\n        localStorage.setItem(realKey, makeType('object'));\n        if (localStorage.getItem(realKey)) {\n          makePairs(defaultValue, realKey)\n            .forEach(({ key: k, value: v }) => localStorage.setItem(k, v));\n        }\n      }\n    }\n  }, [initialLoad, key, defaultValue]);\n  const diffUpdate = useCallback(\n    (input: any) => {\n      if (state?.action !== SetTypes.update) {\n        return;\n      }\n      const realKey = makeKey(key);\n      const diffs = diff(readPairs(realKey), input, realKey);\n      if (diffs) {\n        logState('⚙ LocalStorageObject Set', realKey, state?.value);\n        diffs\n          .forEach(({ key: k, value: v, action }) => (action === DiffActions.remove\n            ? localStorage.removeItem(k)\n            : localStorage.setItem(k, v)));\n      }\n    },\n    [state, key],\n  );\n  const updateField = useCallback(\n    (path: string, val: any) => {\n      const diffObj = updateObject(state?.value, path, val);\n      setValue({ value: diffObj, action: SetTypes.update });\n    },\n    [state, key, setValue],\n  );\n  useEffect(() => {\n    if (!initialLoad) {\n      return undefined;\n    }\n    if (!state?.value) {\n      logState('⚙ LocalStorageObject Remove', key, state?.value);\n      diffUpdate({});\n      localStorage.removeItem(makeKey(key));\n    }\n    diffUpdate(state?.value);\n    return undefined;\n  }, [key, state, initialLoad, diffUpdate]);\n  useEffect(() => {\n    const handler = ({\n      storageArea,\n      key: k,\n    }: StorageEvent) => {\n      if (!k) {\n        return;\n      }\n      const isValidKey = isKey(k);\n      const isLocalStorage = storageArea === localStorage;\n      if (!(isLocalStorage && isValidKey)) {\n        return;\n      }\n      setValue({ value: readPairs(makeKey(key)), action: SetTypes.network });\n    };\n    window.addEventListener('storage', handler);\n    return () => window.removeEventListener('storage', handler);\n  }, [setValue, key]);\n  const update = useCallback(\n    (input: any) => setValue({ value: input, action: SetTypes.update }),\n    [setValue],\n  );\n  return [state?.value, update, updateField];\n};\n\nexport default useLocalStorageObject;\n","const steelCasing = {\n  input: {\n    steel: 4,\n    glass: 4,\n    osmium: 1,\n  },\n  output: 1,\n};\nconst basicChemicalTank = {\n  input: {\n    redstone: 4,\n    osmium: 4,\n  },\n  output: 1,\n};\nconst fissionCasing = {\n  input: {\n    lead: 4,\n    steelCasing: 1,\n  },\n  output: 4,\n};\nconst fissionReactorPort = {\n  input: {\n    fissionCasing: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 2,\n};\nconst fissionLogicAdapter = {\n  input: {\n    redstone: 4,\n    fissionCasing: 1,\n  },\n  output: 1,\n};\nconst fissionFuelAssembly = {\n  input: {\n    lead: 6,\n    steel: 1,\n    basicChemicalTank: 1,\n  },\n  output: 1,\n};\nconst controlRodAssembly = {\n  input: {\n    steel: 4,\n    lead: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 1,\n};\nconst reactorGlass = {\n  input: {\n    enrichedIron: 4,\n    lead: 4,\n    glass: 1,\n  },\n  output: 4,\n};\nconst eliteControlCircuit = {\n  input: {\n    reinforcedAlloy: 2,\n    advancedControlCircuit: 1,\n  },\n  output: 1,\n};\nconst advancedControlCircuit = {\n  input: {\n    infusedAlloy: 2,\n    basicControlCircuit: 1,\n  },\n  output: 1,\n};\nconst basicControlCircuit = {\n  input: { osmium: 1 },\n  output: 1,\n};\nconst reinforcedAlloy = {\n  input: { infusedAlloy: 1 },\n  output: 1,\n};\nconst infusedAlloy = {\n  input: { iron: 1 },\n  output: 1,\n};\nconst steel = {\n  input: { iron: 1 },\n  output: 1,\n};\nconst turbineCasing = {\n  input: {\n    steel: 4,\n    osmium: 1,\n  },\n  output: 4,\n};\nconst turbineValve = {\n  input: {\n    turbineCasing: 4,\n    advancedControlCircuit: 1,\n  },\n  output: 2,\n};\nconst turbineVent = {\n  input: {\n    turbineCasing: 4,\n    bars: 1,\n  },\n  output: 2,\n};\nconst turbineRotor = {\n  input: {\n    steel: 6,\n    infusedAlloy: 3,\n  },\n  output: 1,\n};\nconst turbineBlade = {\n  input: {\n    steel: 4,\n    infusedAlloy: 1,\n  },\n  output: 1,\n};\nconst rotationalComplex = {\n  input: {\n    infusedAlloy: 3,\n    steel: 4,\n    advancedControlCircuit: 2,\n  },\n  output: 1,\n};\nconst pressureDispenser = {\n  input: {\n    steel: 4,\n    bars: 4,\n    infusedAlloy: 1,\n  },\n  output: 1,\n};\nconst electromagneticCoil = {\n  input: {\n    steel: 4,\n    gold: 4,\n    energyTablet: 1,\n  },\n  output: 1,\n};\nconst structuralGlass = {\n  input: {\n    steel: 4,\n    glass: 1,\n  },\n  output: 4,\n};\nconst energyTablet = {\n  input: {\n    gold: 3,\n    infusedAlloy: 2,\n    redstone: 4,\n  },\n  output: 1,\n};\nconst inductionCasing = {\n  input: {\n    steel: 4,\n    energyTablet: 1,\n  },\n  output: 4,\n};\nconst inductionPort = {\n  input: {\n    inductionCasing: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 2,\n};\nconst basicInductionCell = {\n  input: {\n    energyTablet: 4,\n    lithium: 4,\n    basicEnergyCube: 1,\n  },\n  output: 1,\n};\nconst basicEnergyCube = {\n  input: {\n    energyTablet: 2,\n    iron: 2,\n    redstone: 4,\n    steelCasing: 1,\n  },\n  output: 1,\n};\nconst basicInductionProvider = {\n  input: {\n    lithium: 4,\n    basicControlCircuit: 4,\n    basicEnergyCube: 1,\n  },\n  output: 1,\n};\nexport default {\n  steelCasing,\n  fissionCasing,\n  fissionReactorPort,\n  fissionLogicAdapter,\n  fissionFuelAssembly,\n  basicChemicalTank,\n  controlRodAssembly,\n  reactorGlass,\n  eliteControlCircuit,\n  advancedControlCircuit,\n  infusedAlloy,\n  basicControlCircuit,\n  reinforcedAlloy,\n  steel,\n  turbineCasing,\n  turbineBlade,\n  turbineRotor,\n  turbineValve,\n  turbineVent,\n  pressureDispenser,\n  electromagneticCoil,\n  rotationalComplex,\n  structuralGlass,\n  energyTablet,\n  inductionCasing,\n  inductionPort,\n  basicInductionCell,\n  basicEnergyCube,\n  basicInductionProvider,\n};\n","import {\n  RecipeAST,\n  RecipeStepItem,\n  RecipeStep,\n  RecipeSteps,\n  RecipesType,\n  RecipeType,\n  SymbolType,\n} from './types';\n\nexport const adjust = (\n  obj: Record<string, number>,\n  amount: number,\n): Record<string, number> => Object.entries(obj).reduce(\n  (prev, [k, v]) => ({\n    ...prev,\n    [k]: v * amount,\n  }),\n  {},\n);\n\nexport const reduce = (\n  what: RecipeType,\n  recipes: RecipesType,\n): Record<string, number> => {\n  const input = Object.entries(what.input).map((\n    [key, value],\n  ) => (key in recipes\n    ? {\n      ...adjust(\n        reduce(recipes[key], recipes),\n        Math.ceil(value / (recipes[key].output || 1)),\n      ),\n      [`_${key}`]: value,\n    }\n    : { [key]: value }));\n  const combined = input.reduce(\n    (prev, obj) => Object.entries(obj).reduce(\n      (p, [k, v]) => ({\n        ...p,\n        [k]: ((p[k] || 0) + v),\n      }),\n      prev,\n    ),\n    {},\n  );\n  return combined;\n};\n\nexport const generateAST = (\n  what: RecipeType,\n  recipes: RecipesType,\n  parent?: RecipeAST,\n  name: string = 'root',\n): RecipeAST => {\n  const ast: RecipeAST = {\n    name,\n    parent,\n  };\n  ast.children = Object.keys(what.input)\n    .map((it) => (recipes[it]\n      ? generateAST(recipes[it], recipes, ast, it)\n      : { name: it, parent: ast }));\n  return ast;\n};\n\nexport const generateUses = (\n  name: string = 'root',\n  recipes: RecipesType,\n  parent?: RecipeAST,\n): RecipeAST => {\n  const ast: RecipeAST = {\n    name,\n    parent,\n  };\n  const uses = Object.entries(recipes)\n    .filter(([, { input }]) => Object.keys(input).includes(name))\n    .map(([key]) => key);\n\n  if (uses.length > 0) {\n    ast.children = uses.map((it) => generateUses(it, recipes, ast));\n  }\n\n  return ast;\n};\n\nexport const generateSteps = (\n  ast: RecipeAST,\n  resources: Record<string, number>,\n): RecipeSteps => {\n  let toWalk = [ast];\n  const steps: RecipeSteps = [];\n  while (toWalk.length > 0) {\n    const step: RecipeStep = [];\n    toWalk\n      .filter(({ name }) => resources[`_${name}`])\n      .forEach(({ name }) => {\n        step.push({\n          name,\n          amount: resources[`_${name}`] || 0,\n        });\n      });\n    if (step.length > 0) {\n      steps.push(\n        step\n          .filter((\n            it: RecipeStepItem,\n            idx: number,\n            arr: RecipeStep,\n          ) => arr.findIndex(({ name }) => name === it.name) === idx),\n      );\n    }\n    toWalk = toWalk\n      .filter(({ children }) => children)\n      .reduce(\n        (prev, { children }) => [...prev, ...children!],\n        [] as RecipeAST[],\n      );\n  }\n  return steps.reverse();\n};\n\nexport const hasCircularDependency = (\n  symbol: SymbolType,\n  recipe: RecipeType,\n  recipes: RecipesType,\n  symbols: SymbolType[],\n): boolean => {\n  const ownSymbols = Object.keys(recipe.input);\n  const containsSymbol = ownSymbols\n    .reduce((prev, it) => prev || (it === symbol.name), false);\n  if (containsSymbol) {\n    return true;\n  }\n  const nextRecipes = (ownSymbols\n    .map((it) => symbols.find(({ name }) => name === it))\n    .filter(Boolean) as SymbolType[]\n  )\n    .filter(({ composite }) => composite)\n    .map(({ name }) => recipes[name])\n    .filter(Boolean);\n  const nextContainSymbol = nextRecipes.reduce(\n    (prev, it) => prev || hasCircularDependency(\n      symbol,\n      it,\n      recipes,\n      symbols,\n    ),\n    false,\n  );\n  return nextContainSymbol;\n};\n","import {\n  createContext,\n  FC,\n  useContext,\n  useMemo,\n  useCallback,\n} from 'react';\n\nimport seedData from '../config/seed';\nimport {\n  generateAST, generateSteps, generateUses, reduce,\n} from '../utils/calculate';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\nimport { RecipeContextType, RecipesContextType, RecipesType } from '../utils/types';\n\nconst RecipesContext = createContext<RecipesContextType>({\n  recipes: {},\n  symbols: [],\n  names: [],\n  update: () => {},\n  import: () => {},\n  addRecipe: () => {},\n  removeRecipe: () => {},\n  reset: () => {},\n});\n\nexport const useRecipes = () => useContext(RecipesContext);\nexport const RecipeProviderV3: FC = ({ children }) => {\n  const [recipes, setRecipes, update] = useLocalStorageObject('recipes-v3', seedData);\n  const recipeNames = useMemo(\n    () => (recipes ? Object.keys(recipes) : []),\n    [recipes],\n  );\n  const allSymbols = useMemo(\n    () => (recipes\n      ? [\n        ...recipeNames,\n        ...Object.values(recipes as RecipesType)\n          .reduce((prev, it) => [\n            ...prev,\n            ...Object.keys(it.input),\n          ],\n          [] as string[]),\n      ]\n        .sort()\n        .filter((it, idx, arr) => arr.indexOf(it) === idx)\n      : []),\n    [recipes, recipeNames],\n  );\n  const symbols = useMemo(\n    () => allSymbols\n      .map((it) => ({ name: it, composite: recipeNames.includes(it) })),\n    [allSymbols, recipeNames],\n  );\n  const addRecipe = useCallback(\n    (name: string) => update(name, { input: {}, output: 1 }),\n    [update],\n  );\n  const removeRecipe = useCallback(\n    (name: string) => setRecipes(\n      Object.entries(recipes)\n        .filter(([key]) => key !== name)\n        .reduce((prev, [key, value]) => ({\n          ...prev,\n          [key]: value,\n        }), {}),\n    ),\n    [update],\n  );\n  const importFunc = useCallback(\n    (imports: RecipesType) => {\n      setRecipes({\n        ...recipes,\n        ...imports,\n      });\n    },\n    [recipes, setRecipes],\n  );\n  const reset = useCallback(\n    () => setRecipes({}),\n    [setRecipes],\n  );\n  return (\n    <RecipesContext.Provider value={{\n      recipes,\n      symbols,\n      names: recipeNames,\n      update,\n      reset,\n      import: importFunc,\n      addRecipe,\n      removeRecipe,\n    }}\n    >\n      {children}\n    </RecipesContext.Provider>\n  );\n};\n\nexport const useSymbols = () => useRecipes().symbols;\nexport const useNames = () => useRecipes().names;\n\nexport const RecipeContext = createContext<RecipeContextType>({\n  recipe: {\n    input: {},\n    output: -1,\n  },\n  resources: {},\n  symbols: [],\n  name: 'unknown',\n  update: () => {},\n  addInput: () => {},\n  removeInput: () => {},\n});\n\nexport const RecipeProvider: FC<{ name: string }> = ({ children, name }) => {\n  const store = useRecipes();\n  const recipe = useMemo(\n    () => store.recipes?.[name] || undefined,\n    [store, name],\n  );\n  const symbols = useMemo(\n    () => (recipe ? Object.keys(recipe.input) : [])\n      .map((it) => ({ name: it, composite: store.names.includes(it) })),\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (path: string, value: any) => {\n      store.update([name, path].join('.'), value);\n    },\n    [store, name],\n  );\n  const addInput = useCallback(\n    (n: string) => {\n      updateFunc(['input', n].join('.'), 0);\n    },\n    [updateFunc, recipe],\n  );\n  const removeInput = useCallback(\n    (n: string) => {\n      updateFunc('input', Object.entries(recipe.input || {})\n        .filter(([key]) => key !== n)\n        .reduce((prev, [k, v]) => ({\n          ...prev,\n          [k]: v,\n        }), {}));\n    },\n    [updateFunc, recipe],\n  );\n  const resources = useMemo(\n    () => (recipe && store.recipes ? reduce(recipe, store.recipes) : {}),\n    [recipe, store],\n  );\n  const ast = useMemo(\n    () => (recipe && store.recipes\n      ? generateAST(recipe, store.recipes, undefined, name)\n      : undefined),\n    [recipe, store, name],\n  );\n  const uses = useMemo(\n    () => (store.recipes\n      ? generateUses(name, store.recipes, undefined)\n      : undefined),\n    [store, name],\n  );\n  const steps = useMemo(\n    () => (ast\n      ? generateSteps(ast, resources)\n      : undefined),\n    [ast, resources],\n  );\n  return (\n    <RecipeContext.Provider value={{\n      recipe,\n      symbols,\n      name,\n      resources,\n      ast,\n      uses,\n      steps,\n      update: updateFunc,\n      addInput,\n      removeInput,\n    }}\n    >\n      {children}\n    </RecipeContext.Provider>\n  );\n};\n\nexport const useRecipe = () => useContext(RecipeContext);\nexport const useResources = () => useContext(RecipeContext).resources;\nexport const useAST = () => useContext(RecipeContext).ast;\nexport const useUses = () => useContext(RecipeContext).uses;\nexport const useSteps = () => useContext(RecipeContext).steps;\nexport const useInput = (name: string): [number, (val: string) => void] => {\n  const { recipe, update } = useRecipe();\n  const value = useMemo(\n    () => recipe.input[name],\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (val: string) => update(['input', name].join('.'), parseInt(val, 10)),\n    [update],\n  );\n  return [\n    value,\n    updateFunc,\n  ];\n};\nexport const useOutput = (): [number, (val: string) => void] => {\n  const { recipe, update } = useRecipe();\n  const value = useMemo(\n    () => recipe.output,\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (val: string) => {\n      const v = parseInt(val, 10);\n      if (v > 0) {\n        update('output', v);\n      }\n    },\n    [update],\n  );\n  return [\n    value,\n    updateFunc,\n  ];\n};\n","export const camelCaseToCapitalized = (\n  input: string,\n): string => `${input[0].toUpperCase()}${input\n  .substr(1)\n  .replace(/[a-z][A-Z]/g, (it) => `${it[0]} ${it[1]}`)}`;\n\nexport const capitalizedToCamelCase = (\n  input: string,\n): string => `${input[0].toLowerCase()}${input\n  .substr(1)\n  .replace(/ [a-zA-Z]/g, (it) => it[1].toUpperCase())}`;\n\nexport const capitalize = (\n  input: string,\n): string => input[0].toUpperCase()\n  + input.substr(1).replace(/ ([a-z])/g, (m) => ` ${m[1].toUpperCase()}`);\n","import {\n  useState,\n  useCallback,\n  FC,\n  ChangeEvent,\n  useMemo,\n} from 'react';\nimport styled from 'styled-components';\nimport { InputAdornment, TextField } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\n\nexport type FilterType = {\n  value: string | undefined,\n  onChange: (event: ChangeEvent<HTMLInputElement>) => void,\n};\nexport const useFilter = <T extends any>(\n  list: T[],\n  processor: (input: T) => string,\n): {\n    list: T[],\n  } & FilterType => {\n  const [value, setValue] = useState<string>();\n  const onChange = useCallback(\n    ({ target: { value: val } }: ChangeEvent<HTMLInputElement>) => setValue(val),\n    [setValue],\n  );\n  const regex = useMemo(\n    () => (value ? new RegExp(value, 'i') : undefined),\n    [value],\n  );\n  const filteredList = useMemo(\n    () => {\n      if (!regex) {\n        return list;\n      }\n      return list.map((it) => ({\n        id: processor(it),\n        meta: it,\n      }))\n        .filter(({ id }) => regex.test(id))\n        .map(({ meta }) => meta);\n    },\n    [list, processor, regex],\n  );\n  return {\n    list: filteredList,\n    value,\n    onChange,\n  };\n};\n\nexport const StyledTextField = styled(TextField)`\n  margin-bottom: 25px !important;\n`;\n\nexport const Filter: FC<FilterType> = ({\n  value,\n  onChange,\n}) => (\n  <StyledTextField\n    value={value}\n    onChange={onChange}\n    fullWidth\n    InputProps={{\n      startAdornment: (\n        <InputAdornment position=\"start\">\n          <SearchIcon />\n        </InputAdornment>\n      ),\n    }}\n  />\n);\n","import React, { FC, useMemo } from 'react';\nimport {\n  List,\n  ListItem,\n  ListItemText,\n} from '@material-ui/core';\n// import styled from 'styled-components';\nimport { useRecipes } from '../state/recipes-v3';\nimport { camelCaseToCapitalized } from '../utils/strings';\nimport { StyledLink } from './styled';\nimport { Filter, useFilter } from './Filter';\n\nexport const RecipesList: FC = () => {\n  const { recipes } = useRecipes();\n  const recipeList = useMemo(\n    () => Object.keys(recipes || {})\n      .map((it) => ({\n        id: it,\n        text: camelCaseToCapitalized(it),\n      })),\n    [recipes],\n  );\n  const { list, ...filterProps } = useFilter(\n    recipeList,\n    ({ text }) => text,\n  );\n  return (\n    <List>\n      <Filter {...filterProps} />\n      {list.map(({ id, text }) => (\n        <StyledLink to={`/recipes/${id}`} key={id}>\n          <ListItem button>\n            <ListItemText>\n              {text}\n            </ListItemText>\n          </ListItem>\n        </StyledLink>\n      ))}\n    </List>\n  );\n};\n\nexport default RecipesList;\n","import React, { FC } from 'react';\nimport { Chip } from '@material-ui/core';\nimport styled from 'styled-components';\nimport { useSymbols } from '../state/recipes-v3';\nimport { StyledLink } from './styled';\nimport { SymbolType } from '../utils/types';\nimport { useFilter, Filter } from './Filter';\n\nexport const StyledContainer = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const StyledChip = styled(Chip)`\n  margin: 5px;\n`;\n\nexport const ClickableStyledChip = styled(StyledChip)`\n  cursor: pointer;\n`;\n\nexport const SymbolsList: FC<{\n  symbols: SymbolType[],\n  filter?: boolean,\n  onDelete?: (input: string) => (e: Event) => void,\n}> = ({\n  symbols,\n  onDelete,\n  filter = true,\n}) => {\n  const { list, ...filterProps } = useFilter(\n    symbols,\n    ({ name }) => name,\n  );\n  return (\n    <StyledContainer>\n      {filter && <Filter {...filterProps} />}\n      {(filter ? list : symbols).map(({ name, composite }) => (composite ? (\n        <StyledLink to={`/recipes/${name}`} key={name}>\n          <ClickableStyledChip\n            label={name}\n            onDelete={onDelete && onDelete(name)}\n          />\n        </StyledLink>\n      ) : (\n        <StyledChip\n          variant=\"outlined\"\n          label={name}\n          key={name}\n          onDelete={onDelete && onDelete(name)}\n        />\n      )))}\n    </StyledContainer>\n  );\n};\n\nexport default () => {\n  const symbols = useSymbols();\n  return symbols ? <SymbolsList symbols={symbols} /> : null;\n};\n","import { Fab } from '@material-ui/core';\nimport React, {\n  FC,\n  useState,\n} from 'react';\nimport Measure, { BoundingRect } from 'react-measure';\nimport styled from 'styled-components';\n\nconst padding = 25;\nexport const FabWrapper = styled.div<{\n  horizontal?: 'left' | 'right',\n  vertical?: 'top' | 'bottom',\n}>`\n  position: fixed;\n  ${({ vertical }) => (vertical && vertical === 'top'\n    ? `top: ${padding}px;`\n    : `bottom: ${padding}px;`\n  )}\n  ${({ horizontal }) => (horizontal && horizontal === 'left'\n    ? `left: calc(${padding}px + env(safe-area-inset-left));`\n    : `right: calc(${padding}px + env(safe-area-inset-right));`\n  )}\n`;\n\nexport const Spacer = styled.div`\n  width: 100%;\n`;\n\nexport const BottomFab: FC<{\n  horizontal?: 'left' | 'right',\n  vertical?: 'top' | 'bottom',\n  onClick: () => void,\n  Icon: FC,\n}> = ({\n  onClick,\n  horizontal,\n  vertical,\n  Icon,\n}) => {\n  const [size, setSize] = useState<BoundingRect>();\n  return (\n    <>\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <FabWrapper\n            ref={measureRef}\n            horizontal={horizontal}\n            vertical={vertical}\n          >\n            <Fab onClick={onClick} color=\"primary\">\n              <Icon />\n            </Fab>\n          </FabWrapper>\n        )}\n      </Measure>\n      <Spacer style={{\n        height: size\n          ? size.height + padding\n          : padding,\n      }}\n      />\n    </>\n  );\n};\n\nexport default BottomFab;\n","import {\n  Button, CardContent, Dialog, DialogTitle,\n} from '@material-ui/core';\nimport {\n  FC, useCallback, useState,\n} from 'react';\nimport { RightCardActions } from './styled';\n\nexport const useConfirm = (onConfirm: () => void) => {\n  const [open, setIsOpen] = useState<boolean>(false);\n  const onOpen = useCallback(\n    () => setIsOpen(true),\n    [setIsOpen],\n  );\n  const onClose = useCallback(\n    (confirmed: boolean) => {\n      if (confirmed) {\n        onConfirm();\n      }\n      setIsOpen(false);\n    },\n    [onConfirm, setIsOpen],\n  );\n  return { open, onClose, onOpen };\n};\n\nexport const ConfirmDialog: FC<{\n  open: boolean,\n  onClose: (confirm: boolean) => void,\n  title?: string,\n}> = ({\n  open,\n  onClose,\n  title,\n  children,\n}) => (\n  <Dialog onClose={() => onClose(false)} open={open}>\n    {title && (\n    <DialogTitle>\n      {title}\n    </DialogTitle>\n    )}\n    <CardContent>\n      {children}\n    </CardContent>\n    <RightCardActions>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() => onClose(true)}\n      >\n        Confirm\n      </Button>\n      <Button\n        color=\"secondary\"\n        onClick={() => onClose(false)}\n      >\n        Cancel\n      </Button>\n    </RightCardActions>\n  </Dialog>\n);\n\nexport default ConfirmDialog;\n","import { FC, useCallback } from 'react'; import {\n  Button,\n  Typography,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport { useTheme } from '../state/theme';\nimport { ConfirmDialog, useConfirm } from './Confirm';\nimport { useRecipes } from '../state/recipes-v3';\n\nconst goHome = () => {\n  // @ts-ignore\n  window.location = `${window.location}`;\n};\n\nexport const ResetAll: FC = () => {\n  const reset = useCallback(\n    () => {\n      Object.keys(localStorage)\n        .forEach((key) => localStorage.removeItem(key));\n      goHome();\n    },\n    [],\n  );\n  const { onOpen, ...args } = useConfirm(reset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Reset All Settings\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to reset all data?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n\nexport const ResetThemeSelection: FC = () => {\n  const { reset } = useTheme();\n  const { onOpen, ...args } = useConfirm(reset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Reset Theme Selection\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to reset theme selection?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n\nexport const ResetRecipes: FC = () => {\n  const { reset } = useRecipes();\n  const history = useHistory();\n  const onReset = useCallback(\n    () => {\n      reset();\n      history.push('/');\n    },\n    [reset, history],\n  );\n  const { onOpen, ...args } = useConfirm(onReset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Remove All Recipes\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to remove all stored recipes?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n","import { FC, useCallback } from 'react';\nimport {\n  Button,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport { useRecipes } from '../state/recipes-v3';\nimport { RecipesType } from '../utils/types';\n\nconst readFile = (file: File) => new Promise<RecipesType>((accept, reject) => {\n  const reader = new FileReader();\n  reader.onload = () => {\n    try {\n      if (!reader.result) {\n        throw new Error('Empty Data');\n      }\n      if (reader.result instanceof ArrayBuffer) {\n        throw new Error('Got an Array Buffer?');\n      }\n      const data = JSON.parse(reader.result) as RecipesType;\n      accept(data);\n    } catch (e) {\n      reject(e);\n    }\n  };\n  reader.readAsText(file);\n});\n\nexport const Import: FC = () => {\n  const { import: importFunc } = useRecipes();\n  const history = useHistory();\n  const onSubmit = useCallback(\n    () => {\n      const el = document.createElement('input');\n      el.type = 'file';\n      document.body.appendChild(el);\n      el.addEventListener(\n        'change',\n        async () => {\n          const { files } = el;\n          if (files && files.length > 0) {\n            const results = (\n              await Promise.all(\n                Array.from(files).map(readFile),\n              )\n            ).reduce((prev, it) => ({\n              ...prev,\n              ...it,\n            }), {}) as RecipesType;\n            importFunc(results);\n            history.push('/');\n          }\n        },\n      );\n      el.click();\n      document.body.removeChild(el);\n    },\n    [importFunc, history],\n  );\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        Import\n      </Button>\n    </>\n  );\n};\n\nexport const Export: FC = () => {\n  const { recipes } = useRecipes();\n  const onSubmit = useCallback(\n    () => {\n      const blob = new Blob(\n        [\n          JSON.stringify(recipes, undefined, 2),\n        ],\n        { type: 'application/json' },\n      );\n      const obj = window.URL.createObjectURL(blob);\n      const el = document.createElement('a');\n      el.style.display = 'none';\n      el.href = obj;\n      el.download = 'export.json';\n      document.body.appendChild(el);\n      el.click();\n      document.body.removeChild(el);\n    },\n    [recipes],\n  );\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        Export\n      </Button>\n    </>\n  );\n};\n","import {\n  createContext,\n  useContext,\n  useCallback,\n  FC,\n} from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\n\ntype StackContextType = {\n  isEnabled: boolean | undefined,\n  stackSize: number | undefined,\n  toggleEnabled: () => void,\n  setStackSize: (input: number) => void,\n};\n\nexport const StackContext = createContext<StackContextType>({\n  isEnabled: false,\n  stackSize: 1,\n  toggleEnabled: () => {},\n  setStackSize: () => {},\n});\n\nexport const StackProvider: FC = ({\n  children,\n}) => {\n  const [isEnabled, setIsEnabled] = useLocalStorage<boolean>('stacks-enabled', false);\n  const toggleEnabled = useCallback(\n    () => setIsEnabled((t) => !t),\n    [setIsEnabled],\n  );\n  const [stackSize, setStackSize] = useLocalStorage<number>('stacks-size', 1);\n  const setter = useCallback(\n    (input: number) => (input > 0 ? setStackSize(input) : undefined),\n    [setStackSize],\n  );\n  return (\n    <StackContext.Provider value={{\n      isEnabled,\n      toggleEnabled,\n      stackSize,\n      setStackSize: setter,\n    }}\n    >\n      {children}\n    </StackContext.Provider>\n  );\n};\n\nexport const useStacks = () => useContext(StackContext);\n","import { FormControlLabel, Switch, TextField } from '@material-ui/core';\nimport { ChangeEvent, FC, useCallback } from 'react';\nimport { useStacks } from '../state/stack';\n\nexport const StacksEnabled: FC = () => {\n  const { isEnabled, toggleEnabled } = useStacks();\n  return (\n    <FormControlLabel\n      label=\"Stacks Enabled\"\n      control={\n        <Switch checked={isEnabled} onChange={toggleEnabled} />\n      }\n    />\n  );\n};\n\nexport const StacksAmount: FC = () => {\n  const { stackSize, setStackSize } = useStacks();\n  const changeHandler = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const val = parseInt(value, 10);\n      if (val && !Number.isNaN(val)) {\n        setStackSize(val);\n      }\n    },\n    [setStackSize],\n  );\n  return (\n    <TextField\n      fullWidth\n      label=\"Stack Size\"\n      value={stackSize}\n      onChange={changeHandler}\n    />\n  );\n};\n","import {\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { FC } from 'react';\nimport styled from 'styled-components';\nimport { StickyAppBar, StyledToolbarContainer } from './styled';\nimport { ResetAll, ResetThemeSelection, ResetRecipes } from './ResetSettings';\nimport { Import, Export } from './ImportExportSettings';\nimport { StacksEnabled, StacksAmount } from './StacksSettings';\n\ntype DirectionProp = {\n  direction?: 'row' | 'column'\n};\nexport const SectionWrapper = styled.section<DirectionProp>`\n  display: flex;\n  flex-flow: ${({ direction }) => (direction === 'column'\n    ? 'column'\n    : 'row'\n  )} nowrap;\n  margin: 25px 20px;\n  & > * {\n    margin: 5px !important;\n  }\n`;\n\nexport const Section: FC<{\n  title: string\n} & DirectionProp> = ({\n  title,\n  children,\n  direction,\n}) => (\n  <>\n    <StickyAppBar>\n      <Toolbar>\n        <StyledToolbarContainer>\n          <Typography variant=\"h5\">{title}</Typography>\n        </StyledToolbarContainer>\n      </Toolbar>\n    </StickyAppBar>\n    <SectionWrapper direction={direction}>\n      {children}\n    </SectionWrapper>\n  </>\n);\n\nexport const SettingsView: FC = () => (\n  <>\n    <Section title=\"Split into Stacks\" direction=\"column\">\n      <StacksEnabled />\n      <StacksAmount />\n    </Section>\n    <Section title=\"Import / Export\">\n      <Import />\n      <Export />\n    </Section>\n    <Section title=\"Reset\">\n      <ResetAll />\n      <ResetRecipes />\n      <ResetThemeSelection />\n    </Section>\n  </>\n);\n\nexport default SettingsView;\n","import React, {\n  FC, useCallback, useEffect,\n} from 'react';\nimport {\n  SwipeableDrawer,\n  Toolbar,\n  Container,\n  Typography,\n  Tab,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport styled from 'styled-components';\n\nimport { useHistory } from 'react-router';\nimport { TabContext } from '@material-ui/lab';\nimport { useDrawer } from '../state/drawer';\nimport { RecipesList } from './RecipesList';\nimport Symbols from './SymbolsList';\nimport {\n  onMobile, StickyAppBar, StyledTabPanel as TabPanel, StyledTabs, StyledToolbarContainer,\n} from './styled';\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { BottomFab } from './BottomFab';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { SettingsView } from './SettingsPane';\n\nconst drawerStyle = `\n  min-width: min(100vw, 300px);\n  max-width: 500px;\n  ${onMobile} {\n    min-width: 100vw;\n    max-width: 100vw;\n  }\n`;\nconst StyledDrawer = styled(SwipeableDrawer)`\n  .styledPaper {\n    ${drawerStyle}\n    ${onMobile} {\n      padding-left: env(safe-area-inset-left) !important;\n      padding-right: env(safe-area-inset-right) !important;\n    }\n  }\n  .styledRoot {\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n    justify-content: flex-start;\n  }\n`;\n\nconst StyledContainer = styled(Container)`\n  margin: 1.5rem 0 !important;\n`;\n\nconst DrawerAppBar: FC = ({ children }) => (\n  <StickyAppBar>\n    <Toolbar>\n      <StyledToolbarContainer>\n        <Typography variant=\"h5\">{children}</Typography>\n      </StyledToolbarContainer>\n    </Toolbar>\n  </StickyAppBar>\n);\n\nexport const DrawerWrapper = styled.section`\n  display: flex;\n  flex-flow: column nowrap;\n  height: 100%;\n  width: 100%;\n`;\n\nexport const DrawerInner = styled.article`\n  flex: 1;\n  overflow: hidden;\n  overflow-y: auto;\n`;\n\nexport const StyledTabPanel = styled(TabPanel)`\n  ${drawerStyle}\n`;\n\nexport const RecipesView: FC = () => (\n  <>\n    <DrawerAppBar>Symbols</DrawerAppBar>\n    <StyledContainer>\n      <Symbols />\n    </StyledContainer>\n    <DrawerAppBar>Recipes</DrawerAppBar>\n    <StyledContainer>\n      <RecipesList />\n    </StyledContainer>\n  </>\n);\n\nconst tabs = [\n  { title: 'Recipes', Component: RecipesView },\n  { title: 'Settings', Component: SettingsView },\n];\n\nexport const Drawer: FC = () => {\n  const isMobile = useIsMobile();\n  const { isOpen, open, close } = useDrawer();\n  const [tab, setTab] = useLocalStorage<string>('drawer-tab', tabs[0].title);\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <StyledDrawer\n      open={isOpen}\n      onOpen={open}\n      onClose={close}\n      anchor=\"right\"\n      classes={{ paper: 'styledPaper', root: 'styledRoot' }}\n    >\n      <DrawerWrapper>\n        <TabContext value={tab || tabs[0].title}>\n          <StyledTabs\n            value={tab}\n            onChange={onChange}\n            variant={isMobile ? 'fullWidth' : undefined}\n          >\n            {tabs.map(({ title }) => (\n              <Tab label={title} key={title} value={title} />\n            ))}\n          </StyledTabs>\n          <DrawerInner>\n            {tabs.map(({ title, Component }) => (\n              <StyledTabPanel value={title} key={title}>\n                <Component />\n              </StyledTabPanel>\n            ))}\n            {isMobile && (\n              <BottomFab\n                onClick={close}\n                Icon={CloseIcon}\n                horizontal=\"left\"\n              />\n            )}\n          </DrawerInner>\n        </TabContext>\n      </DrawerWrapper>\n    </StyledDrawer>\n  );\n};\n\nexport const RouteChangeDrawerClose: FC = () => {\n  const history = useHistory();\n  const { close } = useDrawer();\n  useEffect(\n    () => history.listen(() => {\n      close();\n    }),\n    [history, close],\n  );\n  return <></>;\n};\n","import React, {\n  FC,\n  ChangeEvent,\n  useCallback,\n  useMemo,\n  useState,\n  useEffect,\n} from 'react';\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  TextField,\n} from '@material-ui/core';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router';\nimport {\n  useRecipe,\n  useInput,\n  useOutput,\n  useRecipes,\n} from '../state/recipes-v3';\n\nimport { Title } from '../state/title';\nimport { camelCaseToCapitalized, capitalize, capitalizedToCamelCase } from '../utils/strings';\nimport { SymbolsList } from './SymbolsList';\nimport { onMobile, RightCardActions } from './styled';\nimport { SymbolType } from '../utils/types';\nimport { hasCircularDependency } from '../utils/calculate';\nimport { ConfirmDialog, useConfirm } from './Confirm';\n\nexport const StyledContainer = styled(Container)`\n  display: grid !important;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0 !important;\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const StyledTextField = styled(TextField)`\n  margin: 0.5rem 0 !important;\n`;\n\nconst StyledCard = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nconst StyledExpandCardContent = styled(CardContent)`\n  flex: 1;\n`;\n\nexport const Input: FC<{\n  name: string\n}> = ({\n  name,\n}) => {\n  const [value, setValue] = useInput(name);\n  const onChange = useCallback(\n    ({ target: { value: v } }: ChangeEvent<HTMLInputElement>) => setValue(v),\n    [setValue],\n  );\n  return (\n    <StyledTextField\n      fullWidth\n      label={camelCaseToCapitalized(name)}\n      value={value}\n      type=\"number\"\n      onChange={onChange}\n    />\n  );\n};\n\nexport const Output: FC = () => {\n  const [value, setValue] = useOutput();\n  const onChange = useCallback(\n    ({ target: { value: v } }: ChangeEvent<HTMLInputElement>) => setValue(v),\n    [setValue],\n  );\n  return (\n    <StyledTextField\n      fullWidth\n      label=\"Output Number\"\n      value={value}\n      type=\"number\"\n      onChange={onChange}\n    />\n  );\n};\n\nconst AutocompleteWrapper = styled.div`\n  flex: 1;\n`;\n\ntype ComboBoxAddType = {inputValue?: string};\nconst filter = createFilterOptions<SymbolType & ComboBoxAddType>();\n\nexport const RecipeEditor: FC = () => {\n  const {\n    symbols: allSymbols,\n    recipes, removeRecipe,\n  } = useRecipes();\n  const history = useHistory();\n  const {\n    name,\n    symbols,\n    recipe,\n    addInput,\n    removeInput,\n  } = useRecipe();\n  const comboSymbols = useMemo(\n    () => {\n      const usedSymbols = symbols.map(({ name: n }) => n);\n      const circularSymbols = allSymbols.filter(\n        ({ name: n, composite }) => {\n          if (!composite) {\n            return false;\n          }\n          return hasCircularDependency(\n            { name },\n            recipes[n],\n            recipes,\n            allSymbols,\n          );\n        },\n      ).map(({ name: n }) => n);\n      return allSymbols.filter(({ name: n }) => (\n        !usedSymbols.includes(n)\n        && !circularSymbols.includes(n)\n        && n !== name\n      ));\n    },\n    [symbols, allSymbols, recipes, name],\n  );\n  const deleteHandler = useCallback(\n    (symbol: string) => (e: Event) => {\n      e.preventDefault();\n      removeInput(symbol);\n    },\n    [removeInput],\n  );\n  const removeHandler = useCallback(\n    () => {\n      removeRecipe(name);\n      history.push('/');\n    },\n    [removeRecipe, name, history],\n  );\n  const { onOpen, ...confirmArgs } = useConfirm(removeHandler);\n  const [newSymbol, setNewSymbol] = useState<SymbolType & ComboBoxAddType | null>(null);\n  useEffect(\n    () => {\n      if (newSymbol) {\n        addInput(capitalizedToCamelCase(newSymbol.name));\n        setNewSymbol(null);\n      }\n    },\n    [newSymbol, addInput, setNewSymbol],\n  );\n  if (!recipe) {\n    return null;\n  }\n  return (\n    <>\n      <Title title={`Edit: ${camelCaseToCapitalized(name)}`} />\n      <StyledContainer>\n        <div>\n          <StyledCard>\n            <CardHeader title=\"Symbols Used\" />\n            <StyledExpandCardContent style={{ flex: 1 }}>\n              <SymbolsList filter={false} symbols={symbols} onDelete={deleteHandler} />\n            </StyledExpandCardContent>\n            <RightCardActions>\n              <AutocompleteWrapper>\n                <Autocomplete\n                  value={newSymbol}\n                  onChange={(_, newValue) => {\n                    if (typeof newValue === 'string') {\n                      setNewSymbol({ name: newValue, composite: false });\n                    } else if (newValue && newValue.inputValue) {\n                      setNewSymbol({ name: newValue.inputValue, composite: false });\n                    } else if (newValue) {\n                      setNewSymbol(newValue);\n                    } else {\n                      setNewSymbol(null);\n                    }\n                  }}\n                  filterOptions={(options, params) => {\n                    const filtered = filter(options, params);\n\n                    // Suggest the creation of a new value\n                    if (params.inputValue !== '') {\n                      filtered.push({\n                        inputValue: params.inputValue,\n                        name: `Add \"${capitalize(params.inputValue)}\"`,\n                      });\n                    }\n\n                    return filtered;\n                  }}\n                  selectOnFocus\n                  clearOnBlur\n                  handleHomeEndKeys\n                  options={comboSymbols as (SymbolType & ComboBoxAddType)[]}\n                  getOptionLabel={(option) => {\n                    if (typeof option === 'string') {\n                      return option;\n                    }\n                    if (option && option.inputValue) {\n                      return option.inputValue;\n                    }\n                    return option.name;\n                  }}\n                  renderOption={({ name: n }) => camelCaseToCapitalized(n)}\n                  renderInput={(params) => (\n                    <TextField\n                      {...params}\n                      fullWidth\n                      label=\"Add Symbol\"\n                    />\n                  )}\n                />\n              </AutocompleteWrapper>\n              <Button\n                color=\"secondary\"\n                onClick={onOpen}\n              >\n                Remove\n              </Button>\n            </RightCardActions>\n          </StyledCard>\n        </div>\n        <div>\n          <StyledCard>\n            <CardHeader title=\"Materials\" />\n            <StyledExpandCardContent>\n              {Object.keys(recipe.input).sort().map((it) => (\n                <Input\n                  name={it}\n                  key={it}\n                />\n              ))}\n            </StyledExpandCardContent>\n            <CardContent>\n              <Output />\n            </CardContent>\n          </StyledCard>\n        </div>\n      </StyledContainer>\n      <ConfirmDialog {...confirmArgs}>\n        Are you sure you want to delete this recipe (\n        {name}\n        )?\n      </ConfirmDialog>\n    </>\n  );\n};\n\nexport default RecipeEditor;\n","import {\n  useRef,\n  FC,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\nimport {\n  CardContent,\n  withTheme,\n  Theme,\n} from '@material-ui/core';\nimport Tree from 'react-d3-tree';\nimport Measure, { BoundingRect } from 'react-measure';\nimport styled from 'styled-components';\n\nimport { useHistory } from 'react-router';\nimport { RecipeAST } from '../utils/types';\nimport {\n  onMobile,\n} from './styled';\nimport { capitalizedToCamelCase } from '../utils/strings';\nimport { recipeBaseRoute } from '../config/constants';\nimport { useSymbols } from '../state/recipes-v3';\n\nexport const SVGWrapper = styled(CardContent)`\n  width: 100%;\n  height: 500px;\n  ${onMobile} {\n    height: 300px;\n  }\n  flex: 1;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: 0 !important;\n`;\n\nconst svgStyle = ({\n  theme: {\n    palette: {\n      background: {\n        default: background,\n      },\n      text: {\n        primary: text,\n      },\n    },\n    shadows: [shadow],\n  },\n}: { theme: Theme }) => `\n  background: ${background};\n  color: ${text};\n  box-shadow: ${shadow};\n`;\nconst leafNodeStyle = ({\n  theme: {\n    palette: {\n      text: {\n        disabled: text,\n      },\n    },\n  },\n}: { theme: Theme }) => `\n  --leaf-color: ${text};\n`;\n\nexport const SVG = withTheme(\n  styled.div<{styleLeafNodes: boolean}>`\n    width: 100%;\n    height: 100%;\n    ${svgStyle}\n      ${leafNodeStyle}\n    .linkBase {\n      stroke: currentColor;\n      opacity: 0.5 !important;\n    }\n    .nodeBase, .nodeNameBase, .leafNodeBase {\n      fill: currentColor;\n      stroke: transparent;\n    }\n    ${({ styleLeafNodes }) => (styleLeafNodes\n    ? `\n        .leafNodeBase {\n          color: var(--leaf-color);\n        }\n      `\n    : '')}\n  `,\n);\n\nexport const AST: FC<{\n  data: RecipeAST\n  styleLeafNodes?: boolean,\n}> = ({\n  data,\n  styleLeafNodes = true,\n}) => {\n  const [size, setSize] = useState<BoundingRect>();\n  const symbols = useSymbols();\n  const history = useHistory();\n  const translate = useMemo(\n    () => (size\n      ? ({\n        x: size.width / 2,\n        y: size.height / 2,\n      })\n      : undefined),\n    [size],\n  );\n  const rootRef = useRef<HTMLDivElement>();\n  const onClick = useCallback(\n    ({ name }) => {\n      const shortName = capitalizedToCamelCase(name.trim());\n      const symbol = symbols.find(({ name: n }) => n === shortName);\n      if (symbol?.composite) {\n        history.push([\n          recipeBaseRoute.replace(':name', shortName),\n          'view',\n        ].join('/'));\n      }\n    },\n    [history, symbols],\n  );\n  useEffect(\n    () => {\n      const el = rootRef.current;\n      if (el) {\n        const handler = (event: TouchEvent) => event.preventDefault();\n        el.addEventListener('touchmove',\n          handler,\n          { passive: false });\n        return () => el.removeEventListener('touchmove', handler);\n      }\n      return undefined;\n    },\n    [rootRef],\n  );\n  return (\n    <SVGWrapper innerRef={rootRef}>\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <SVG ref={measureRef} styleLeafNodes={styleLeafNodes}>\n            <Tree\n              data={data}\n              orientation=\"vertical\"\n              collapsible={false}\n              translate={translate}\n              onClick={onClick}\n              nodeSize={{\n                x: 200,\n                y: 200,\n              }}\n              textLayout={{\n                textAnchor: 'start',\n                y: 0,\n                x: 15,\n              }}\n            />\n          </SVG>\n        )}\n      </Measure>\n    </SVGWrapper>\n  );\n};\n","import {\n  FC,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\nimport {\n  Backdrop,\n  Fade,\n  Modal,\n  Button,\n  IconButton,\n  withTheme,\n  Theme,\n  CardHeader,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport styled from 'styled-components';\n\nimport {\n  onMobile,\n  RightCardActions,\n  ModalContainer,\n  ModalWrapper,\n  ModalContent,\n} from './styled';\nimport { camelCaseToCapitalized } from '../utils/strings';\nimport { RecipeAST } from '../utils/types';\nimport { usePreventScroll } from '../hooks/scroll';\nimport { AST } from './Tree';\n\nconst getPadding = ({\n  theme: { spacing },\n}: { theme: Theme }) => `${spacing(2)}px`;\n\nexport const StyledCardHeader = withTheme(\n  styled(CardHeader)`\n    padding-left: ${getPadding};\n    padding-right: ${getPadding};\n    padding-left: calc(${getPadding} + env(safe-area-inset-left)) !important;\n    padding-right: calc(${getPadding} + env(safe-area-inset-right)) !important;\n  `,\n);\n\nexport const LargeModalContainer = styled(ModalContainer)`\n  max-width: initial !important;\n  padding: 0 !important;\n  margin: 0 !important;\n`;\n\nexport const LargeModalContent = styled(ModalContent)`\n  height: calc(95vh - 100px);\n  flex: 0;\n  display: flex;\n  flex-flow: column nowrap;\n  padding: 0 !important;\n  ${onMobile} {\n    height: auto;\n    flex: 1;\n  }\n`;\n\nconst largePadding = 50;\nexport const LargeModalWrapper = styled(ModalWrapper)`\n  width: calc(100% - ${largePadding * 2}px);\n  height: calc(100% - ${largePadding * 2}px);\n  ${onMobile} {\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nexport const Visualization: FC<{\n  ast?: RecipeAST,\n  title: string,\n  styleLeafNodes?: boolean,\n}> = ({\n  ast,\n  title,\n  styleLeafNodes = true,\n}) => {\n  const scrollPrevent = usePreventScroll();\n  const [modalOpen, setModalOpen] = useState(false);\n  const open = useCallback(\n    () => setModalOpen(true),\n    [setModalOpen],\n  );\n  const close = useCallback(\n    () => setModalOpen(false),\n    [setModalOpen],\n  );\n  const humanReadableAst = useMemo(\n    () => {\n      if (!ast) {\n        return undefined;\n      }\n      const updateNode = ({ name, children }: RecipeAST): RecipeAST => ({\n        name: camelCaseToCapitalized(name),\n        ...(children\n          ? { children: children.map(updateNode) }\n          : {}),\n      });\n      return updateNode(ast);\n    },\n    [ast],\n  );\n  useEffect(\n    () => {\n      if (modalOpen) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [modalOpen, scrollPrevent],\n  );\n  return (\n    <>\n      {humanReadableAst && (\n      <AST\n        data={humanReadableAst}\n        styleLeafNodes={styleLeafNodes}\n      />\n      )}\n      <RightCardActions>\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={open}\n        >\n          View Large\n        </Button>\n      </RightCardActions>\n      <Modal\n        open={modalOpen}\n        onClose={close}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={modalOpen}>\n          <LargeModalContainer>\n            <LargeModalWrapper elevation={10}>\n              <StyledCardHeader\n                title={`Large View: ${title}`}\n                action={(\n                  <IconButton onClick={close}>\n                    <CloseIcon />\n                  </IconButton>\n              )}\n              />\n              <LargeModalContent>\n                {humanReadableAst && (\n                <AST\n                  data={humanReadableAst}\n                  styleLeafNodes={styleLeafNodes}\n                />\n                )}\n              </LargeModalContent>\n            </LargeModalWrapper>\n          </LargeModalContainer>\n        </Fade>\n      </Modal>\n    </>\n  );\n};\n","import React, {\n  FC,\n  useCallback,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  Typography,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Tab,\n  withTheme,\n  Theme,\n} from '@material-ui/core';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport styled from 'styled-components';\n\nimport { TabContext } from '@material-ui/lab';\nimport { useHistory } from 'react-router';\nimport {\n  useAST,\n  useUses,\n  useRecipe,\n  useResources,\n  useSteps,\n} from '../state/recipes-v3';\n\nimport {\n  onMobile,\n  StyledTabPanel,\n  StyledTabs,\n} from './styled';\n\nimport { camelCaseToCapitalized } from '../utils/strings';\nimport { Title } from '../state/title';\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { Visualization } from './Visualization';\nimport { useStacks } from '../state/stack';\nimport { recipeBaseRoute } from '../config/constants';\n\nexport const StyledContainer = styled(Container)`\n  display: grid !important;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0 !important;\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst backgroundGetter = ({\n  theme:\n  {\n    palette: {\n      background: {\n        default: val,\n      },\n    },\n  },\n}: { theme: Theme }) => val;\nconst borderRadiusGetter = ({\n  theme:\n  {\n    shape: {\n      borderRadius: val,\n    },\n  },\n}: { theme: Theme }) => val;\nconst borderGetter = ({\n  theme:\n  {\n    palette: {\n      background: {\n        paper: val,\n      },\n    },\n  },\n}: { theme: Theme }) => val;\n\nexport const ResourceWrapper = withTheme(\n  styled.div<{\n    columns?: number,\n    bold?: boolean,\n  }>`\n    display: grid;\n    grid-template-columns: 5fr repeat(${({ columns }) => columns || 1}, 100px);\n    background: ${backgroundGetter};\n    overflow: hidden;\n    cursor: ${({ onClick }) => (onClick ? 'pointer' : 'default')};\n    &:first-of-type {\n      border-top-left-radius: ${borderRadiusGetter}px;\n      border-top-right-radius: ${borderRadiusGetter}px;\n    }\n    & * {\n      font-weight: ${({ bold }) => (bold ? 'bold' : 'normal')} !important;\n      font-size: ${({ bold }) => (bold ? '1.2' : '1')}rem !important;\n    }\n    & > * {\n      padding: 10px;\n      border-top: solid 1px ${borderGetter};\n      border-left: solid 1px ${borderGetter};\n      &:last-child {\n        border-right: solid 1px ${borderGetter};\n      }\n    }\n    &:last-of-type {\n      border-bottom-left-radius: ${borderRadiusGetter}px;\n      border-bottom-right-radius: ${borderRadiusGetter}px;\n      & > * {\n        border-bottom: solid 1px ${borderGetter};\n      }\n    }\n  `,\n);\n\nexport const ResourceText = styled(Typography)`\n  flex: 1;\n`;\n\nexport const ResourceNumber = styled(Typography)`\n  font-feature-settings: tnum;\n  font-variant-numeric: tabular-nums;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const SVGCard = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nexport const ResourceHeader: FC<{\n  title: string\n}> = ({\n  title,\n}) => {\n  const { isEnabled } = useStacks();\n  return (\n    <ResourceWrapper columns={isEnabled ? 2 : 1} bold>\n      <ResourceText>{title}</ResourceText>\n      <ResourceNumber>\n        {isEnabled ? 'Stacks' : 'Amount'}\n      </ResourceNumber>\n      {isEnabled && (\n        <ResourceNumber>Amount</ResourceNumber>\n      )}\n    </ResourceWrapper>\n  );\n};\n\nexport const ResourcePreview: FC<{\n  text: string,\n  amount: number,\n  onClick?: () => void,\n}> = ({\n  text,\n  amount,\n  onClick,\n}) => {\n  const { isEnabled, stackSize } = useStacks();\n  return (\n    <ResourceWrapper columns={isEnabled ? 2 : 1} onClick={onClick}>\n      <ResourceText>{camelCaseToCapitalized(text)}</ResourceText>\n      <ResourceNumber>\n        {isEnabled && stackSize\n          ? Math.ceil(amount / stackSize!)\n          : amount}\n      </ResourceNumber>\n      {isEnabled && stackSize && (\n      <ResourceNumber>\n        {amount}\n      </ResourceNumber>\n      )}\n    </ResourceWrapper>\n  );\n};\n\nconst ResourcesSummary: FC = () => {\n  const resources = useResources();\n  const rootResources = useMemo(\n    () => Object.entries(resources)\n      .filter(([key]) => !key.startsWith('_')),\n    [resources],\n  );\n  return (\n    <Card>\n      <CardHeader title=\"Total Resouces\" />\n      <CardContent>\n        <ResourceHeader title=\"Resource\" />\n        {rootResources.map(\n          ([key, value]) => (\n            <ResourcePreview key={key} text={key} amount={value} />\n          ),\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const ASTPreview: FC = () => {\n  const ast = useAST();\n  const uses = useUses();\n  const isMobile = useIsMobile();\n  const tabs = useMemo(\n    () => [\n      { title: 'Dependencies', ast, styleLeafNodes: true },\n      { title: 'Uses', ast: uses, styleLeafNodes: false },\n    ],\n    [ast, uses],\n  );\n  const [tab, setTab] = useState<string>(tabs[0].title);\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <SVGCard>\n      <TabContext value={tab}>\n        <StyledTabs\n          value={tab}\n          onChange={onChange}\n          variant={isMobile ? 'fullWidth' : undefined}\n        >\n          {tabs.map(({ title }) => (\n            <Tab\n              key={title}\n              value={title}\n              label={title}\n            />\n          ))}\n        </StyledTabs>\n        {tabs.map(({ title, ast: tree, styleLeafNodes }) => (\n          <StyledTabPanel value={title} key={title}>\n            <Visualization\n              ast={tree}\n              title={title}\n              styleLeafNodes={styleLeafNodes}\n            />\n          </StyledTabPanel>\n        ))}\n      </TabContext>\n    </SVGCard>\n  );\n};\n\nexport const FullCol = styled.div`\n  grid-row-start: 1;\n  grid-row-end: 4;\n  grid-column: 2;\n  ${onMobile} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst StyledAccordionDetails = styled(AccordionDetails)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nexport const StepsView: FC = () => {\n  const steps = useSteps();\n  const history = useHistory();\n  const [active, setActive] = useState<number>(0);\n  const activate = useCallback(\n    (id: number) => () => setActive(id),\n    [setActive],\n  );\n  const onClick = useCallback(\n    (name: string) => () => {\n      history.push([\n        recipeBaseRoute.replace(':name', name),\n        'view',\n      ].join('/'));\n    },\n    [history],\n  );\n  return (\n    <div>\n      {steps && steps.map((step, idx) => (\n        <Accordion\n          key={`${idx.toString()}`}\n          expanded={active === idx}\n          onChange={activate(idx)}\n        >\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n          >\n            {`Step ${idx + 1}`}\n          </AccordionSummary>\n          <StyledAccordionDetails>\n            <ResourceHeader title=\"Recipes\" />\n            {step.map(\n              ({ name, amount }) => (\n                <ResourcePreview\n                  key={name}\n                  text={name}\n                  amount={amount}\n                  onClick={onClick(name)}\n                />\n              ),\n            )}\n          </StyledAccordionDetails>\n        </Accordion>\n      ))}\n    </div>\n  );\n};\n\nexport const ResourcesView: FC = () => {\n  const { name } = useRecipe();\n  return (\n    <>\n      <Title title={`View: ${camelCaseToCapitalized(name)}`} />\n      <StyledContainer>\n        <div>\n          <ResourcesSummary />\n        </div>\n        <FullCol>\n          <ASTPreview />\n        </FullCol>\n        <div>\n          <StepsView />\n        </div>\n      </StyledContainer>\n    </>\n  );\n};\n\nexport const RecipeViewer: FC = () => (\n  <ResourcesView />\n);\n\nexport default RecipeViewer;\n","import React, {\n  FC, useCallback, useEffect, useState,\n} from 'react';\nimport {\n  Route,\n  useHistory,\n  useLocation,\n  useParams, useRouteMatch,\n} from 'react-router';\nimport {\n  AppBar, Container, Tab,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport {\n  RecipeProvider, useRecipe,\n} from '../state/recipes-v3';\n\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { RecipeEditor } from '../components/RecipeEditor';\nimport { RecipeViewer } from '../components/RecipeViewer';\nimport { StyledTabs } from '../components/styled';\nimport { usePrevious } from '../hooks/usePrevious';\nimport { recipeBaseRoute } from '../config/constants';\n\nconst StyledContainer = styled(Container)`\n  padding: 1rem 0;\n`;\n\nexport const baseRoute = recipeBaseRoute;\n\nconst tabs = [\n  { title: 'Viewer', Component: RecipeViewer, route: '/view' },\n  { title: 'Editor', Component: RecipeEditor, route: '/edit' },\n];\n\nexport const routes = tabs.map(({ route }) => route);\n\nexport const RouteOnEmpty: FC = () => {\n  const { recipe } = useRecipe();\n  const history = useHistory();\n  const [hasLoaded, setHasLoaded] = useState<boolean>(false);\n  useEffect(\n    () => {\n      setTimeout(setHasLoaded, 500, true);\n    },\n    [setHasLoaded],\n  );\n  useEffect(\n    () => {\n      if (hasLoaded && !recipe) {\n        history.push('/not-found');\n      }\n    },\n    [recipe, hasLoaded, history],\n  );\n  return <></>;\n};\n\nexport const RecipeScreen: FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const path = useRouteMatch({\n    path: baseRoute,\n  });\n  const { name } = useParams<{name:string}>();\n  const isMobile = useIsMobile();\n  const [tab, setTab] = useState<number>(\n    path\n      ? (\n        () => {\n          const idx = tabs.findIndex(\n            ({ route }) => route === location.pathname.replace(path.url, ''),\n          );\n          if (idx >= 0) {\n            return idx;\n          }\n          return 0;\n        }\n      )()\n      : 0,\n  );\n  useEffect(\n    () => {\n      if (path && path.isExact) {\n        history.push(`${path.url}${tabs[0].route}`);\n        setTab(0);\n      }\n    },\n    [path, history, location],\n  );\n  const prevTab = usePrevious(tab);\n  useEffect(\n    () => {\n      if (path && prevTab !== tab) {\n        history.push(`${path.url}${(tabs[tab] || tabs[0]).route}`);\n      }\n    },\n    [history, path, tab, prevTab],\n  );\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <RecipeProvider name={name}>\n      <RouteOnEmpty />\n      <StyledContainer>\n        <AppBar position=\"static\">\n          <StyledTabs\n            value={tab}\n            onChange={onChange}\n            variant={isMobile ? 'fullWidth' : undefined}\n          >\n            {tabs.map(({ title }) => <Tab label={title} key={title} />)}\n          </StyledTabs>\n        </AppBar>\n        {tabs.map(({ title, route, Component }) => (\n          <Route\n            exact\n            path={`${baseRoute}${route}`}\n            component={Component}\n            key={title}\n          />\n        ))}\n      </StyledContainer>\n    </RecipeProvider>\n  );\n};\n\nexport default RecipeScreen;\n","import React, {\n  useState,\n  useCallback,\n  FC,\n  useMemo,\n  useEffect,\n} from 'react';\n\nimport {\n  Modal,\n  Backdrop,\n  Fade,\n  CardHeader,\n  TextField,\n  Button,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport { useHistory } from 'react-router';\nimport {\n  ModalContainer,\n  ModalContent,\n  ModalWrapper,\n  RightCardActions,\n} from './styled';\n\nimport { useRecipes } from '../state/recipes-v3';\nimport { camelCaseToCapitalized, capitalize, capitalizedToCamelCase } from '../utils/strings';\nimport { SymbolType } from '../utils/types';\nimport { baseRoute } from '../screens/Recipe';\n\nimport { BottomFab } from './BottomFab';\nimport { usePreventScroll } from '../hooks/scroll';\n\ntype ComboBoxAddType = {inputValue?: string};\nconst filter = createFilterOptions<SymbolType & ComboBoxAddType>();\n\nexport const CreateRecipeModal: FC<{\n  open: boolean,\n  onClose: () => void,\n}> = ({\n  open,\n  onClose,\n}) => {\n  const history = useHistory();\n  const scrollPrevent = usePreventScroll();\n  const { symbols, addRecipe } = useRecipes();\n  const availableSymbols = useMemo(\n    () => symbols.filter(({ composite }) => !composite),\n    [symbols],\n  );\n  const [newSymbol, setNewSymbol] = useState<SymbolType & ComboBoxAddType | null>(null);\n  const name = useMemo(\n    () => newSymbol?.name,\n    [newSymbol],\n  );\n  const close = useCallback(\n    () => {\n      setNewSymbol(null);\n      onClose();\n    },\n    [setNewSymbol, onClose],\n  );\n  const onSave = useCallback(\n    () => {\n      if (name) {\n        const symbol = capitalizedToCamelCase(name.trim());\n        addRecipe(symbol);\n        history.push([\n          baseRoute.replace(':name', symbol),\n          'edit',\n        ].join('/'));\n      }\n      close();\n    },\n    [name, close, history],\n  );\n  useEffect(\n    () => {\n      if (open) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [open, scrollPrevent],\n  );\n  return (\n    <Modal\n      open={open}\n      onClose={close}\n      closeAfterTransition\n      disableEnforceFocus\n      disableAutoFocus\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      <Fade in={open}>\n        <ModalContainer>\n          <ModalWrapper elevation={10}>\n            <CardHeader title=\"Create new Recipe\" />\n            <ModalContent>\n              <Autocomplete\n                value={newSymbol}\n                onChange={(_, newValue) => {\n                  if (typeof newValue === 'string') {\n                    setNewSymbol({ name: newValue, composite: false });\n                  } else if (newValue && newValue.inputValue) {\n                    setNewSymbol({ name: newValue.inputValue, composite: false });\n                  } else if (newValue) {\n                    setNewSymbol(newValue);\n                  } else {\n                    setNewSymbol(null);\n                  }\n                }}\n                filterOptions={(options, params) => {\n                  const filtered = filter(options, params);\n\n                  // Suggest the creation of a new value\n                  if (params.inputValue !== '') {\n                    filtered.push({\n                      inputValue: params.inputValue,\n                      name: `Add \"${capitalize(params.inputValue)}\"`,\n                    });\n                  }\n\n                  return filtered;\n                }}\n                selectOnFocus\n                clearOnBlur\n                handleHomeEndKeys\n                options={availableSymbols as (SymbolType & ComboBoxAddType)[]}\n                getOptionLabel={(option) => {\n                  if (typeof option === 'string') {\n                    return option;\n                  }\n                  if (option && option.inputValue) {\n                    return option.inputValue;\n                  }\n                  return option.name;\n                }}\n                renderOption={({ name: n }) => camelCaseToCapitalized(n)}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    fullWidth\n                    label=\"Add Recipe\"\n                  />\n                )}\n              />\n            </ModalContent>\n            <RightCardActions>\n              <Button color=\"primary\" variant=\"contained\" onClick={onSave}>Save</Button>\n              <Button color=\"secondary\" onClick={close}>Cancel</Button>\n            </RightCardActions>\n          </ModalWrapper>\n        </ModalContainer>\n      </Fade>\n    </Modal>\n  );\n};\n\nexport const CreateRecipeWrapper: FC = () => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const close = useCallback(\n    () => setIsOpen(false),\n    [setIsOpen],\n  );\n  const open = useCallback(\n    () => setIsOpen(true),\n    [setIsOpen],\n  );\n  return (\n    <>\n      <BottomFab Icon={AddIcon} onClick={open} />\n      <CreateRecipeModal open={isOpen} onClose={close} />\n    </>\n  );\n};\n\nexport default CreateRecipeWrapper;\n","import React from 'react';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Container,\n} from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { Title } from '../state/title';\nimport Symbols from '../components/SymbolsList';\nimport { RecipesList } from '../components/RecipesList';\nimport { onMobile } from '../components/styled';\n\nexport const StyledContainer = styled(Container)`\n  display: grid !important;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0 !important;\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const HomeScreen = () => (\n  <>\n    <Title title=\"Home\" isRoot />\n    <StyledContainer>\n      <div>\n        <Card>\n          <CardHeader title=\"Symbols\" />\n          <CardContent>\n            <Symbols />\n          </CardContent>\n        </Card>\n      </div>\n      <div>\n        <Card>\n          <CardHeader title=\"Recipes\" />\n          <CardContent>\n            <RecipesList />\n          </CardContent>\n        </Card>\n      </div>\n    </StyledContainer>\n  </>\n);\nexport default HomeScreen;\n","import React, { FC } from 'react';\nimport { Title } from '../state/title';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\n\nimport seedData from '../config/seed';\n\nexport const TestScreen: FC = () => {\n  const [value] = useLocalStorageObject('test', seedData);\n  return (\n    <>\n      <Title>Test Screen</Title>\n      <code style={{ whiteSpace: 'pre-wrap' }}>\n        {JSON.stringify(value, undefined, 2)}\n      </code>\n    </>\n  );\n};\n\nexport default TestScreen;\n","import React, { FC } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  Typography,\n} from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { Title } from '../state/title';\n\nexport const StyledContainer = styled(Container)`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  margin-top: 50px;\n`;\n\nexport const Error404Screen: FC = () => (\n  <>\n    <Title>Not Found</Title>\n    <StyledContainer>\n      <Card>\n        <CardHeader title=\"404 Error\" />\n        <CardContent>\n          <Typography>\n            This is not the page you&apos;re looking for\n          </Typography>\n        </CardContent>\n      </Card>\n    </StyledContainer>\n  </>\n);\n","import React, { FC } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Route, Switch } from 'react-router';\nimport { Container, withTheme } from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { use100vh } from 'react-div-100vh';\n\nimport { baseURL } from './config/constants';\nimport { Redirect } from './components/Redirect';\n\nimport { NavBar } from './components/NavBar';\nimport { Drawer, RouteChangeDrawerClose } from './components/Drawer';\nimport CreateRecipe from './components/CreateRecipe';\n\nimport { HomeScreen } from './screens/Home';\nimport { RecipeScreen, baseRoute as recipeRoute } from './screens/Recipe';\nimport { TestScreen } from './screens/Test';\nimport { Error404Screen } from './screens/404';\n\nconst StyledContainerRaw = withTheme(\n  styled(Container)`\n    background: ${({ theme: { palette: { background: { default: background } } } }) => background};\n    width: 100vw !important;\n    max-width: initial !important;\n  `,\n);\n\nconst StyledContainer: FC = ({ children }) => {\n  const height = use100vh();\n  return (\n    <StyledContainerRaw style={{ minHeight: height }}>\n      {children}\n    </StyledContainerRaw>\n  );\n};\n\nexport const App: FC = () => (\n  <Router basename={baseURL}>\n    <Redirect />\n    <RouteChangeDrawerClose />\n    <StyledContainer>\n      <NavBar />\n      <Drawer />\n      <Switch>\n        <Route exact path=\"/\" component={HomeScreen} />\n        <Route path={recipeRoute} component={RecipeScreen} />\n        <Route exact path=\"/test\" component={TestScreen} />\n        <Route path=\"/\" component={Error404Screen} />\n      </Switch>\n      <CreateRecipe />\n    </StyledContainer>\n  </Router>\n);\n\nexport default App;\n","import * as React from 'react';\nimport { render } from 'react-dom';\nimport 'typeface-roboto';\n\nimport './styles.css';\nimport { App } from './App';\nimport { DrawerProvider } from './state/drawer';\nimport { TitleProvider } from './state/title';\nimport { AppThemeProvider as ThemeProvider } from './state/theme';\nimport { RecipeProviderV3 } from './state/recipes-v3';\nimport { StackProvider } from './state/stack';\n\nconst rootElement = document.getElementById('root');\nrender(\n  <ThemeProvider>\n    <DrawerProvider>\n      <RecipeProviderV3>\n        <StackProvider>\n          <TitleProvider>\n            <App />\n          </TitleProvider>\n        </StackProvider>\n      </RecipeProviderV3>\n    </DrawerProvider>\n  </ThemeProvider>,\n  rootElement,\n);\n"],"sourceRoot":""}