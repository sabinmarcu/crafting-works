{"version":3,"sources":["config/constants.ts","components/Redirect.tsx","hooks/scroll.ts","state/drawer.tsx","state/title.tsx","hooks/config.ts","hooks/usePrevious.ts","hooks/useLocalStorage.ts","hooks/useMatchMedia.ts","state/theme.tsx","hooks/useMedia.ts","components/styled.tsx","components/NavBar.tsx","components/BottomFab.tsx","hooks/useLocalStorageObject.ts","components/Confirm.tsx","config/seed.ts","utils/functions.ts","utils/calculate.ts","state/recipes-v3.tsx","components/SettingsPane/ResetSettings.tsx","utils/colors.ts","state/label.tsx","components/SettingsPane/Import.tsx","components/Filter.tsx","utils/strings.ts","components/LabelList.tsx","components/SettingsPane/Export.tsx","state/stack.tsx","components/SettingsPane/StacksSettings.tsx","components/SettingsPane/LabelsSettings.tsx","components/SettingsPane/index.tsx","components/Label.tsx","state/filter.tsx","components/RecipesList.tsx","components/SymbolsList.tsx","components/Drawer/RecipeView.tsx","components/Drawer/index.tsx","components/Drawer/FilterView.tsx","components/RecipeEditor/SymbolsEditor.tsx","components/RecipeEditor/RemoveRecipe.tsx","components/RecipeEditor/MaterialsEditor.tsx","components/RecipeEditor/LabelsEditor.tsx","components/RecipeEditor/index.tsx","components/RecipeViewer/Tree.tsx","components/RecipeViewer/Visualization.tsx","components/RecipeViewer/index.tsx","screens/Recipe.tsx","components/CreateRecipe.tsx","screens/Home.tsx","screens/Test.tsx","screens/404.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["mobileBreakpoint","tabletBreakpoint","recipeBaseRoute","Redirect","history","useHistory","search","useMemo","window","location","substr","split","map","it","decodeURIComponent","reduce","prev","key","value","useEffect","r","push","usePreventScroll","useState","active","setOpen","onOpen","useCallback","onClose","document","body","style","top","scrollY","position","touchAction","scrollTo","parseInt","open","close","DrawerContext","createContext","isOpen","toggle","useDrawer","useContext","TitleContext","title","isRoot","setTitle","useTitle","Title","children","undefined","_shouldLog","process","_prefix","groupCollapsed","console","groupEnd","log","logGroup","message","rest","forEach","Array","isArray","makeMatcher","pf","RegExp","join","makeKey","isKey","match","makeType","type","isType","logState","usePrevious","ref","useRef","current","useLocalStorage","defaultValue","prevKey","initialLoad","setInitialLoad","setValue","val","localStorage","getItem","JSON","parse","shouldUpdate","existingValue","e","error","removeItem","evt","createEvent","initStorageEvent","stringify","dispatchEvent","handler","storageArea","k","oldValue","newValue","isValidKey","isLocalStorage","isRightKey","nv","addEventListener","removeEventListener","matchMedia","media","useMatchMedia","matches","setMatches","m","mediaMatch","themes","dark","createMuiTheme","palette","light","background","default","defaultTheme","ThemeContext","theme","t","ti","reset","useTheme","useIsMobile","onMobile","onTablet","toolbarStyles","paper","text","primary","shadow","shadows","StyledToolbar","withTheme","styled","Toolbar","StyledTabs","Tabs","StyledTabPanel","TabPanel","StyledLink","Link","ModalContainerRaw","Container","ModalContainer","className","isMobile","height","use100vh","renderStyle","ModalWrapper","Card","ModalContent","CardContent","RightCardActions","CardActions","StickyAppBar","AppBar","StyledToolbarContainer","StyledCard","StyledExpandCardContent","AutocompleteWrapper","div","StyledContainer","StyledIconButton","IconButton","StyledTypography","Typography","StyledWrapper","Spacer","NavBar","size","setSize","bounds","onResize","measureRef","variant","to","onClick","DiffActions","padding","FabWrapper","vertical","horizontal","BottomFab","Icon","Fab","color","useConfirm","onConfirm","setIsOpen","confirmed","ConfirmDialog","Dialog","DialogTitle","Button","Object","entries","steelCasing","input","steel","glass","osmium","output","fissionCasing","lead","labels","fissionReactorPort","eliteControlCircuit","fissionLogicAdapter","redstone","fissionFuelAssembly","basicChemicalTank","controlRodAssembly","reactorGlass","enrichedIron","reinforcedAlloy","advancedControlCircuit","infusedAlloy","basicControlCircuit","iron","turbineCasing","turbineBlade","turbineRotor","turbineValve","turbineVent","bars","pressureDispenser","electromagneticCoil","gold","energyTablet","rotationalComplex","structuralGlass","inductionCasing","inductionPort","basicInductionCell","lithium","basicEnergyCube","basicInductionProvider","uniq","extract","filter","idx","arr","findIndex","i","what","recipes","obj","amount","Math","ceil","v","p","generateAST","parent","name","ast","keys","generateUses","uses","includes","length","hasCircularDependency","symbol","recipe","symbols","ownSymbols","find","Boolean","composite","inheritLabels","toAdd","child","childRecipe","nextLabels","inheritedLabels","makePairs","prefix","readPairs","test","sort","replace","res","from","max","SetTypes","diff","orig","target","origKeys","targetKeys","toRemove","action","remove","set","toChange","updateObject","path","indexOf","useLocalStorageObject","state","realKey","initial","setItem","diffUpdate","update","diffs","updateField","diffObj","network","RecipesContext","names","import","addRecipe","removeRecipe","useRecipes","useSymbols","RecipeContext","resources","addInput","removeInput","addLabel","removeLabel","RecipeProvider","store","updateFunc","n","steps","deps","toWalk","step","reverse","s","list","ignore","generateSteps","Provider","useRecipe","ResetAll","args","ResetThemeSelection","ResetRecipes","onReset","randomColor","range","fill","floor","random","rgbDigitGroup","LabelContext","rawLabels","setColor","decode","encode","useLabels","useLabel","setter","useLabelColor","readFile","file","Promise","accept","reject","reader","FileReader","onload","result","Error","ArrayBuffer","data","readAsText","Import","importRecipes","importLabels","onSubmit","el","createElement","appendChild","a","files","all","results","click","removeChild","useFilter","processor","onChange","regex","id","meta","StyledTextField","TextField","Filter","fullWidth","InputProps","startAdornment","InputAdornment","camelCaseToCapitalized","toUpperCase","capitalizedToCamelCase","toLowerCase","capitalize","StyledChip","Chip","customColor","getContrastText","LabelChip","onRemove","removeFunc","clickFunc","label","onDelete","LabelList","extraLabels","filterProps","renderLabels","extra","ExportModal","filtered","setFiltered","addFilter","removeFilter","toggleFilter","clearFilter","allLabels","filteredLabels","filteredRecipes","l","blob","Blob","URL","createObjectURL","display","href","download","Modal","closeAfterTransition","disableEnforceFocus","disableAutoFocus","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","elevation","CardHeader","Export","StackContext","isEnabled","stackSize","toggleEnabled","setStackSize","useStacks","StacksEnabled","FormControlLabel","control","Switch","checked","StacksAmount","changeHandler","Number","isNaN","LabelWrapper","article","LabelEditor","hex","hideTextfield","LabelSettings","SectionWrapper","section","direction","wrap","Section","SettingsView","StyledBadge","Badge","LabelBadgeList","LabelBadge","Tooltip","arrow","LabelFilterContext","filterBy","storageKey","useLabelFilter","RecipesList","recipeList","preFilteredList","List","ListItem","button","ListItemText","ClickableStyledChip","SymbolsList","DrawerAppBar","drawerStyle","StyledDrawer","SwipeableDrawer","DrawerWrapper","DrawerInner","tabs","Component","Drawer","tab","setTab","event","anchor","classes","root","TabContext","Tab","CloseIcon","RouteChangeDrawerClose","listen","createFilterOptions","SymbolsEditor","allSymbols","deleteHandler","preventDefault","comboSymbols","usedSymbols","circularSymbols","newSymbol","setNewSymbol","flex","Autocomplete","_","inputValue","filterOptions","options","params","selectOnFocus","clearOnBlur","handleHomeEndKeys","getOptionLabel","option","renderOption","renderInput","RemoveRecipe","removeHandler","confirmArgs","Input","useInput","Output","useOutput","MaterialsEditor","comboLabels","newLabel","setNewLabel","SymbolsWrapper","LabelsWrapper","RemoveWrapper","InputsWrapper","SVGWrapper","SVG","disabled","styleLeafNodes","AST","translate","x","width","y","rootRef","shortName","trim","passive","innerRef","orientation","collapsible","nodeSize","textLayout","textAnchor","getPadding","spacing","StyledCardHeader","LargeModalContainer","LargeModalContent","LargeModalWrapper","largePadding","Visualization","scrollPrevent","modalOpen","setModalOpen","humanReadableAst","updateNode","borderRadiusGetter","shape","borderRadius","borderGetter","ResourceWrapper","columns","bold","ResourceText","ResourceNumber","SVGCard","ResourceHeader","ResourcePreview","ResourcesSummary","rootResources","startsWith","ASTPreview","tree","FullCol","StyledAccordionDetails","AccordionDetails","StepsView","setActive","activate","Accordion","expanded","AccordionSummary","expandIcon","toString","ResourcesView","baseRoute","route","RouteOnEmpty","hasLoaded","setHasLoaded","setTimeout","RecipeScreen","useLocation","useRouteMatch","useParams","pathname","url","isExact","prevTab","exact","component","CreateRecipeModal","availableSymbols","onSave","CreateRecipeWrapper","AddIcon","HomeScreen","TestScreen","seedData","whiteSpace","Error404Screen","StyledContainerRaw","minHeight","App","basename","recipeRoute","isLocalhost","hostname","register","config","navigator","origin","swUrl","fetch","headers","then","response","contentType","get","status","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","CombineProviders","providers","rootElement","getElementById","render","StylesProvider","injectFirst","setTheme","hasMediaDetection","setHasMediaDetection","toggleTheme","invertTheme","isLight","isDark","ThemeProvider","baseRecipes","setRecipes","fixedRecipes","values","recipeNames","importFunc","imports","recipeLabels","setLabels","c","updated","setIsEnabled","setIsRoot","setFilterBy","f","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.af448fb0.chunk.js","sourcesContent":["export const mobileBreakpoint = '(max-width: 1000px)';\nexport const tabletBreakpoint = '(max-width: 1300px)';\nexport const baseURL = process.env.REACT_APP_BASE_URL || '/';\nexport const recipeBaseRoute = '/recipes/:name';\n","import React, { FC, useEffect, useMemo } from 'react';\nimport { useHistory } from 'react-router';\n\nexport const Redirect: FC = () => {\n  const history = useHistory();\n  const search = useMemo(\n    () => window.location.search\n      .substr(1)\n      .split('&')\n      .map((it) => it\n        .split('=')\n        .map(decodeURIComponent))\n      .reduce((prev, [key, value]) => ({\n        ...prev,\n        [key]: value,\n      }), {} as Record<string, string>),\n    [],\n  );\n  useEffect(\n    () => {\n      if (search.r) {\n        history.push(search.r);\n      }\n    },\n    [search, history],\n  );\n  return <></>;\n};\n","import {\n  useState,\n  useCallback,\n  useEffect,\n} from 'react';\n\nexport const usePreventScroll = () => {\n  const [active, setOpen] = useState<boolean>(false);\n  const onOpen = useCallback(\n    () => setOpen(true),\n    [setOpen],\n  );\n  const onClose = useCallback(\n    () => setOpen(false),\n    [setOpen],\n  );\n  useEffect(\n    () => {\n      if (active) {\n        document.body.style.top = `-${window.scrollY}px`;\n        document.body.style.position = 'fixed';\n        document.body.style.touchAction = 'none';\n      } else {\n        const scrollY = document.body.style.top;\n        document.body.style.position = '';\n        document.body.style.top = '';\n        document.body.style.touchAction = 'pan-y';\n        window.scrollTo(0, parseInt(scrollY || '0', 10) * -1);\n      }\n    },\n    [active],\n  );\n  return {\n    open: onOpen,\n    close: onClose,\n  };\n};\n","import React, {\n  FC,\n  useState,\n  useCallback,\n  createContext,\n  useContext,\n  useEffect,\n} from 'react';\nimport { usePreventScroll } from '../hooks/scroll';\n\ntype DrawerContextType = {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n};\n\nconst DrawerContext = createContext<DrawerContextType>({\n  isOpen: false,\n  open: () => {},\n  close: () => {},\n  toggle: () => {},\n});\n\nexport const useDrawer = () => useContext(DrawerContext);\nexport const DrawerProvider: FC = ({ children }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const open = useCallback(() => setIsOpen(true), [setIsOpen]);\n  const close = useCallback(() => setIsOpen(false), [setIsOpen]);\n  const toggle = useCallback(() => setIsOpen((t) => !t), [setIsOpen]);\n  const scrollPrevent = usePreventScroll();\n  useEffect(\n    () => {\n      if (isOpen) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [isOpen, scrollPrevent],\n  );\n  return (\n    <DrawerContext.Provider\n      value={{\n        isOpen,\n        open,\n        close,\n        toggle,\n      }}\n    >\n      {children}\n    </DrawerContext.Provider>\n  );\n};\n","import React, {\n  FC,\n  useState,\n  useContext,\n  createContext,\n  useCallback,\n  useEffect,\n} from 'react';\n\ntype TitleContextType = {\n  title: string;\n  isRoot: boolean;\n  setTitle: (input: string, root?: boolean) => void;\n};\n\nexport const TitleContext = createContext<TitleContextType>({\n  title: 'Unknown',\n  isRoot: false,\n  setTitle: () => {},\n});\nexport const useTitle = () => useContext(TitleContext);\n\nexport const TitleProvider: FC = ({ children }) => {\n  const [title, setTitle] = useState('Unknown');\n  const [isRoot, setIsRoot] = useState(false);\n  const update = useCallback(\n    (input: string, root?: boolean) => {\n      setTitle(input);\n      setIsRoot(!!root);\n    },\n    [setTitle, setIsRoot],\n  );\n  return (\n    <TitleContext.Provider\n      value={{\n        title,\n        isRoot,\n        setTitle: update,\n      }}\n    >\n      {children}\n    </TitleContext.Provider>\n  );\n};\n\nexport const Title: FC<{\n  title?: string;\n  isRoot?: boolean;\n}> = ({ title, isRoot, children }) => {\n  const { setTitle } = useTitle();\n  useEffect(() => setTitle(title\n     || (typeof children === 'string' ? children : undefined)\n     || 'unknown',\n  isRoot), [setTitle, title, isRoot]);\n  return <></>;\n};\n","/* eslint-disable no-underscore-dangle,@typescript-eslint/naming-convention */\n\nlet _shouldLog = process.env.NODE_ENV === 'development';\nexport const enableLog = () => {\n  _shouldLog = true;\n};\nexport const disableLog = () => {\n  _shouldLog = false;\n};\nexport const shouldLog = () => _shouldLog;\n\nlet _prefix = 'app';\nexport const setPrefix = (value: string) => {\n  _prefix = `${value}`;\n};\nexport const prefix = () => _prefix;\n\n// eslint-disable-next-line no-console\nexport const groupCollapsed = (...args: any[]) => _shouldLog && console.groupCollapsed(...args);\n// eslint-disable-next-line no-console\nexport const groupEnd = () => _shouldLog && console.groupEnd();\n// eslint-disable-next-line no-console\nexport const log = (...args: any[]) => _shouldLog && console.log(...args);\n\nexport const logGroup = (message: string, key: string, ...rest: any[]) => {\n  groupCollapsed(`${message} %c${key}`, 'color: grey; font-size: 0.9em');\n  rest.forEach((it) => {\n    if (Array.isArray(it)) {\n      log(...it);\n    } else {\n      log(it);\n    }\n  });\n  groupEnd();\n};\n\nconst makeMatcher = (pf?: string) => new RegExp(['^', _prefix, ...(typeof pf !== 'undefined' ? [':', pf] : [])].join(''));\nexport const makeKey = (key: string, pf?: string) => [_prefix, [pf, key].join('')].join(':');\nexport const isKey = (key: string, pf?: string) => key.match(makeMatcher(pf));\nexport const stripKey = (key: string, pf?: string) => key\n  .replace(makeMatcher(pf), '')\n  .replace(/^:/, '');\n\nexport const makeType = (type: string) => `###${type}###`;\nexport const isType = (type: string) => type.match(/^###([^#]+)###$/);\n\nexport const logState = (message: string, key: string, value: any) => {\n  logGroup(\n    message,\n    key,\n    [`Key: %c${key}`, 'color: blue; text-decoration: underline'],\n    [\n      `LocalStorage Key: %c${[_prefix, key].join(':')}`,\n      'color: blue; text-decoration: underline',\n    ],\n    ['Value:', value],\n  );\n};\n","import { useRef, useEffect } from 'react';\n\nexport const usePrevious = <T>(value: T): T | undefined => {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n};\n","import {\n  useState, useEffect, Dispatch, SetStateAction,\n} from 'react';\n\nimport {\n  logGroup, logState, makeKey, isKey,\n} from './config';\nimport { usePrevious } from './usePrevious';\n\nexport const useLocalStorage = <T>(\n  key: string,\n  defaultValue?: T,\n): [T | undefined, Dispatch<SetStateAction<T | undefined>>] => {\n  const prevKey = usePrevious(key);\n  const [initialLoad, setInitialLoad] = useState<boolean>(false);\n  const [value, setValue] = useState<T>();\n  useEffect(() => {\n    if (!initialLoad || prevKey !== key) {\n      const val = localStorage.getItem(makeKey(key));\n      if (val) {\n        try {\n          logState('⚙ LocalStorage Get', key, val);\n          setValue(JSON.parse(val));\n        } catch {\n          logState('❌ Could not parse LS data', key, val);\n          setValue(defaultValue);\n        }\n      } else {\n        setValue(defaultValue);\n      }\n      setInitialLoad(true);\n    }\n  }, [initialLoad, key, defaultValue]);\n  useEffect(() => {\n    if (!initialLoad) {\n      return undefined;\n    }\n    let shouldUpdate = true;\n    try {\n      let existingValue: string | T | null = localStorage.getItem(makeKey(key));\n      try {\n        existingValue = JSON.parse(existingValue as string);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      } finally {\n        if (existingValue && existingValue === value) {\n          shouldUpdate = false;\n        }\n      }\n    } finally {\n      if (shouldUpdate) {\n        if (typeof value === 'undefined') {\n          logState('⚙ LocalStorage Remove', key, value);\n          localStorage.removeItem(makeKey(key));\n        } else {\n          logState('⚙ LocalStorage Set', key, value);\n          const evt = document.createEvent('StorageEvent');\n          // @ts-ignore\n          evt.initStorageEvent(\n            'storage',\n            false, false,\n            makeKey(key),\n            null,\n            JSON.stringify(value),\n            window.location,\n            window.localStorage,\n          );\n          window.dispatchEvent(evt);\n        }\n      }\n    }\n    return undefined;\n  }, [key, value, initialLoad]);\n  useEffect(() => {\n    const handler = ({\n      storageArea,\n      key: k,\n      oldValue,\n      newValue,\n    }: StorageEvent) => {\n      if (!k) {\n        return;\n      }\n      const isValidKey = isKey(k);\n      const isLocalStorage = storageArea === localStorage;\n      const isRightKey = k === makeKey(key);\n      if (!(isLocalStorage && isValidKey && isRightKey)) {\n        return;\n      }\n      try {\n        const [ov, nv] = [JSON.parse(oldValue!), JSON.parse(newValue!)];\n        logGroup(\n          '⚙ LocalStorage Event',\n          key,\n          [`Old Value: %c${ov}`, 'color: red; text-decoration: underline'],\n          [`New Value: %c${nv}`, 'color: green; text-decoration: underline'],\n        );\n        setValue(nv);\n      } catch (e) {\n        logState('❌ Could not parse LS data from Event', key, newValue);\n      }\n    };\n    window.addEventListener('storage', handler);\n    return () => window.removeEventListener('storage', handler);\n  }, [setValue, key]);\n  return [value, setValue];\n};\n","import {\n  useState,\n  useEffect,\n} from 'react';\n\nconst matchMedia = (media: string) => window.matchMedia(media);\n\nexport const useMatchMedia = (media: string) => {\n  const [matches, setMatches] = useState<boolean>(\n    matchMedia(media).matches,\n  );\n  useEffect(\n    () => {\n      const handler = ({ matches: m }: MediaQueryListEvent) => setMatches(m);\n      const mediaMatch = matchMedia(media);\n      mediaMatch.addEventListener('change', handler);\n      return () => mediaMatch.removeEventListener('change', handler);\n    },\n    [media, setMatches],\n  );\n  return matches;\n};\n","import {\n  createMuiTheme,\n  Theme,\n  ThemeProvider,\n} from '@material-ui/core';\nimport React, {\n  createContext,\n  useContext,\n  useCallback,\n  FC,\n  useMemo,\n  useEffect,\n} from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { useMatchMedia } from '../hooks/useMatchMedia';\n\nexport type ThemeType = 'light' | 'dark';\nexport type ThemeContextType = {\n  theme: ThemeType,\n  t: Theme,\n  ti: Theme,\n  toggle: () => void,\n  reset: () => void,\n};\n\nconst themes = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      background: {\n        default: 'rgb(230, 230, 230)',\n      },\n    },\n  }),\n};\n\nconst defaultTheme = 'dark';\nconst invertTheme = (t: string) => (t === 'dark' ? 'light' : 'dark');\nconst defaultInvertedTheme = 'light';\n\nexport const ThemeContext = createContext<ThemeContextType>({\n  theme: defaultTheme,\n  t: themes[defaultTheme],\n  ti: themes[defaultInvertedTheme],\n  toggle: () => {},\n  reset: () => {},\n});\n\nexport const AppThemeProvider: FC = ({ children }) => {\n  const [theme, setTheme] = useLocalStorage<ThemeType>('theme', defaultTheme);\n  const [hasMediaDetection, setHasMediaDetection] = useLocalStorage<boolean>('theme-select', true);\n  const toggleTheme = useCallback(\n    () => {\n      setHasMediaDetection(false);\n      setTheme((t) => (t === 'light' ? 'dark' : 'light'));\n    },\n    [setTheme, setHasMediaDetection],\n  );\n  const t = useMemo(\n    () => (theme ? themes[theme] : themes[defaultTheme]),\n    [theme],\n  );\n  const ti = useMemo(\n    () => (theme ? themes[invertTheme(theme)] : themes[defaultInvertedTheme]),\n    [theme],\n  );\n  const isLight = useMatchMedia('(prefers-color-scheme: light)');\n  const isDark = useMatchMedia('(prefers-color-scheme: dark)');\n  useEffect(\n    () => {\n      if (hasMediaDetection) {\n        if (isLight) {\n          setTheme('light');\n        } else if (isDark) {\n          setTheme('dark');\n        } else {\n          setTheme(defaultTheme);\n        }\n      }\n    },\n    [theme, hasMediaDetection, isLight, isDark, setTheme],\n  );\n  const reset = useCallback(\n    () => {\n      setHasMediaDetection(true);\n    },\n    [setHasMediaDetection],\n  );\n\n  return (\n    <ThemeContext.Provider value={{\n      theme: theme || 'light',\n      t,\n      ti,\n      toggle: toggleTheme,\n      reset,\n    }}\n    >\n      <ThemeProvider theme={t}>\n        {children}\n      </ThemeProvider>\n    </ThemeContext.Provider>\n  );\n};\n\nexport const useTheme = () => useContext(ThemeContext);\n","import { mobileBreakpoint, tabletBreakpoint } from '../config/constants';\nimport { useMatchMedia } from './useMatchMedia';\n\nexport const useIsMobile = () => useMatchMedia(mobileBreakpoint);\nexport const useIsTablet = () => useMatchMedia(tabletBreakpoint);\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport {\n  AppBar,\n  Card,\n  CardActions,\n  CardContent,\n  Container,\n  Tabs,\n  Theme,\n  Toolbar,\n  withTheme,\n} from '@material-ui/core';\nimport { FC, ReactElement, useMemo } from 'react';\nimport { use100vh } from 'react-div-100vh';\nimport { TabPanel } from '@material-ui/lab';\nimport { mobileBreakpoint, tabletBreakpoint } from '../config/constants';\nimport { useIsMobile } from '../hooks/useMedia';\n\nexport const onMobile = `@media ${mobileBreakpoint}`;\nexport const onTablet = `@media ${tabletBreakpoint}`;\n\nexport const toolbarStyles = ({\n  theme: {\n    palette: {\n      background: { paper: background },\n      text: { primary: text },\n    },\n    shadows: [,shadow],\n  },\n}: {theme: Theme}) => `\n  background: ${background};\n  color: ${text};\n  box-shadow: ${shadow}\n`;\n\nexport const StyledToolbar = withTheme(\n  styled(Toolbar)`\n    ${toolbarStyles}\n  `,\n);\n\nexport const StyledTabs = withTheme(\n  styled(Tabs)`\n    .MuiTabs-flexContainer {\n      ${toolbarStyles}\n    }\n  `,\n);\n\nexport const StyledTabPanel = styled(TabPanel)`\n  padding: 0;\n`;\n\nexport const StyledLink = styled(Link)`\n  &, & > * {\n    text-decoration: none;\n    cursor: pointer;\n    color: inherit;\n  }\n`;\n\nexport const ModalContainerRaw = styled(Container)`\n  padding: 25px;\n  margin-top: 25px;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  outline: 0;\n  ${onMobile} {\n    margin: 0;\n    width: 100vw;\n    padding: 15px;\n    padding-left: calc(15px + env(safe-area-inset-left));\n    padding-right: calc(15px + env(safe-area-inset-right));\n  }\n`;\n\nexport const ModalContainer: FC<{\n  className?: 'string',\n  style?: StyleSheetList\n}> = ({\n  children,\n  className,\n  style,\n}) => {\n  const isMobile = useIsMobile();\n  const height = use100vh();\n  const renderStyle = useMemo(\n    () => ({\n      ...style,\n      height: (isMobile && height) || '100vh',\n    }),\n    [height, style],\n  );\n  return (\n    <ModalContainerRaw\n      style={renderStyle}\n      className={className}\n    >\n      {children as ReactElement}\n    </ModalContainerRaw>\n  );\n};\n\nexport const ModalWrapper = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n  width: 100%;\n`;\n\nexport const ModalContent = styled(CardContent)`\n  flex: 1;\n`;\n\nexport const RightCardActions = styled(CardActions)`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const StickyAppBar = styled(AppBar)`\n  position: sticky;\n`;\n\nexport const StyledToolbarContainer = styled(Container)`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const StyledCard = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nexport const StyledExpandCardContent = styled(CardContent)`\n  flex: 1;\n`;\n\nexport const AutocompleteWrapper = styled.div`\n  flex: 1;\n`;\n\nexport const StyledContainer = styled(Container)`\n  margin: 1.5rem 0;\n`;\n\nexport default StyledLink;\n","import React, { FC, useState } from 'react';\nimport {\n  AppBar,\n  Container,\n  Typography,\n  IconButton,\n} from '@material-ui/core';\nimport Measure, { BoundingRect } from 'react-measure';\n\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport styled from 'styled-components';\n\nimport { useDrawer } from '../state/drawer';\nimport { useTitle } from '../state/title';\nimport { useTheme } from '../state/theme';\n\nimport { StyledLink, StyledToolbar } from './styled';\n\nconst StyledContainer = styled(Container)`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst StyledIconButton = styled(IconButton)`\n  margin: 0 5px;\n`;\n\nconst StyledTypography = styled(Typography)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst StyledWrapper = styled.div`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Spacer = styled.div`\n  width: 100%;\n`;\n\nexport const NavBar: FC = () => {\n  const { open } = useDrawer();\n  const { title, isRoot } = useTitle();\n  const { theme, toggle } = useTheme();\n  const [size, setSize] = useState<BoundingRect>();\n  return (\n    <>\n      <Spacer style={{ height: size?.height ?? 50 }} />\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <AppBar position=\"fixed\" ref={measureRef}>\n            <StyledToolbar>\n              <StyledContainer>\n                <StyledWrapper>\n                  <StyledTypography variant={isRoot ? 'h5' : 'body1'}>\n                    {!isRoot && (\n                    <StyledLink to=\"/\">\n                      <StyledIconButton>\n                        <ArrowBackIcon />\n                      </StyledIconButton>\n                    </StyledLink>\n                    )}\n                    {title}\n                  </StyledTypography>\n                </StyledWrapper>\n                <StyledWrapper>\n                  <StyledIconButton onClick={toggle}>\n                    {theme === 'light'\n                      ? <Brightness7Icon />\n                      : <Brightness4Icon />}\n                  </StyledIconButton>\n                  <StyledIconButton onClick={open}>\n                    <MenuIcon />\n                  </StyledIconButton>\n                </StyledWrapper>\n              </StyledContainer>\n            </StyledToolbar>\n          </AppBar>\n        )}\n      </Measure>\n    </>\n  );\n};\n","import { Fab } from '@material-ui/core';\nimport React, {\n  FC,\n  useState,\n} from 'react';\nimport Measure, { BoundingRect } from 'react-measure';\nimport styled from 'styled-components';\n\nconst padding = 25;\nexport const FabWrapper = styled.div<{\n  horizontal?: 'left' | 'right',\n  vertical?: 'top' | 'bottom',\n}>`\n  position: fixed;\n  z-index: 1200;\n  ${({ vertical }) => (vertical && vertical === 'top'\n    ? `top: ${padding}px;`\n    : `bottom: ${padding}px;`\n  )}\n  ${({ horizontal }) => (horizontal && horizontal === 'left'\n    ? `left: calc(${padding}px + env(safe-area-inset-left));`\n    : `right: calc(${padding}px + env(safe-area-inset-right));`\n  )}\n`;\n\nexport const Spacer = styled.div`\n  width: 100%;\n`;\n\nexport const BottomFab: FC<{\n  horizontal?: 'left' | 'right',\n  vertical?: 'top' | 'bottom',\n  onClick: () => void,\n  Icon: FC,\n}> = ({\n  onClick,\n  horizontal,\n  vertical,\n  Icon,\n}) => {\n  const [size, setSize] = useState<BoundingRect>();\n  return (\n    <>\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <FabWrapper\n            ref={measureRef}\n            horizontal={horizontal}\n            vertical={vertical}\n          >\n            <Fab onClick={onClick} color=\"primary\">\n              <Icon />\n            </Fab>\n          </FabWrapper>\n        )}\n      </Measure>\n      <Spacer style={{\n        height: size\n          ? size.height + padding\n          : padding,\n      }}\n      />\n    </>\n  );\n};\n","import {\n  useState,\n  useEffect,\n  Dispatch,\n  SetStateAction,\n  useCallback,\n} from 'react';\n\nimport {\n  logState,\n  makeKey,\n  isKey,\n  makeType,\n  isType,\n} from './config';\nimport { usePrevious } from './usePrevious';\n\ntype PairType = { key: string, value: any };\nconst makePairs = (\n  obj: any,\n  prefix: string,\n): PairType[] => {\n  const pairs = Object.entries(obj)\n    .reduce(\n      (prev, [k, v]) => {\n        const key = [prefix, k].join(':');\n        return [\n          ...prev,\n          ...(typeof v === 'object'\n            ? [\n              { key, value: makeType(Array.isArray(v) ? 'array' : 'object') },\n              ...(makePairs(v, key)),\n            ]\n            : [{ key, value: v }]\n          ),\n        ];\n      },\n      [] as PairType[],\n    ) as PairType[];\n  return pairs;\n};\n\nconst readPairs = (prefix: string, type = 'object'): any => {\n  const test = new RegExp(`^${prefix}:[^:]+$`);\n  const keys: {key: string, value: any}[] = Object.keys(localStorage)\n    .sort()\n    .filter((it) => test.test(it))\n    .map((it) => {\n      let value = localStorage.getItem(it);\n      if (!value) {\n        return undefined;\n      }\n      const t = isType(value);\n      if (t) {\n        value = readPairs(it, t[1]) || value;\n      }\n      return { key: it.replace([prefix, ''].join(':'), ''), value };\n    })\n    .filter(Boolean) as {key: string, value: any}[];\n  const res = keys.reduce(\n    (prev, { key, value }) => ({\n      ...prev,\n      [key]: /^[0-9]+$/.test(value) ? parseInt(value, 10) : value,\n    }), {},\n  );\n  switch (type) {\n    case 'array': return Array.from({\n      ...res,\n      length: keys.reduce(\n        (prev, { key }) => Math.max(\n          parseInt(key, 10),\n          prev,\n        ), 0,\n      ) + 1,\n    });\n    case 'object': return res;\n    default: return undefined;\n  }\n};\n\nenum DiffActions {\n  remove,\n  set,\n}\ntype DiffPair = {\n  key: string,\n  action: DiffActions,\n  value?: any,\n};\nconst diff = (orig: any, target: any, prefix?: string): DiffPair[] => {\n  const origKeys = Object.keys(orig);\n  const targetKeys = Object.keys(target);\n  const toRemove = origKeys.filter((it) => !targetKeys.includes(it))\n    .map((it) => ({ key: [prefix, it].join(':'), action: DiffActions.remove }));\n  const toAdd = targetKeys.filter((it) => !origKeys.includes(it))\n    .reduce(\n      (prev, it) => [\n        ...prev,\n        {\n          key: [prefix, it].join(':'),\n          value: (typeof target[it] === 'object'\n            && (Array.isArray(target[it])\n              ? makeType('array')\n              : makeType('object')))\n            || target[it],\n          action: DiffActions.set,\n        },\n        ...(typeof target[it] === 'object'\n          ? makePairs(target[it], [prefix, it].join(':'))\n          : []\n        ),\n      ],\n      [] as PairType[],\n    ).map((it) => ({ ...it, action: DiffActions.set }));\n  const toChange = origKeys.filter((it) => targetKeys.includes(it))\n    .filter((it) => orig[it] !== target[it])\n    .reduce((prev, it) => [\n      ...prev,\n      ...(typeof target[it] === 'object'\n        ? [\n          {\n            key: [prefix, it].join(':'),\n            value: (Array.isArray(target[it])\n              ? makeType('array')\n              : makeType('object')),\n            action: DiffActions.set,\n          },\n          ...makePairs(target[it], [prefix, it].join(':'))\n            .map((i) => ({ ...i, action: DiffActions.set })),\n        ]\n        : [{\n          key: [prefix, it].join(':'),\n          value: target[it],\n          action: DiffActions.set,\n        }]),\n    ], [] as DiffPair[]) as DiffPair[];\n  return [\n    ...toRemove,\n    ...toAdd,\n    ...toChange,\n    ...origKeys.filter((it) => targetKeys.includes(it))\n      .filter((it) => typeof orig[it] === 'object')\n      .reduce(\n        (prev, it) => [\n          ...prev,\n          ...diff(orig[it], target[it], [prefix, it].join(':')),\n        ],\n        [] as DiffPair[],\n      ) as DiffPair[],\n  ].filter(Boolean);\n};\n\nconst updateObject = (obj: any, path: string, value: any): any => {\n  if (path.length === 0) {\n    return /^[0-9]+$/.test(value) ? parseInt(value, 10) : value;\n  }\n  let split = path.indexOf('.');\n  if (split === -1) {\n    split = path.length;\n  }\n  const [key, rest] = [path.substr(0, split), path.substr(split + 1)];\n  return {\n    ...obj,\n    [key]: updateObject(obj[key] || {}, rest, value),\n  };\n};\n\nenum SetTypes {\n  initial,\n  update,\n  network,\n}\n\ntype ValueType<T> = {\n  action: SetTypes,\n  value: T | undefined,\n};\n\nexport const useLocalStorageObject = <T>(\n  key: string,\n  defaultValue?: T,\n): [\n    T | undefined,\n    Dispatch<SetStateAction<T | undefined>>,\n    (path: string, value: any) => void,\n  ] => {\n  const prevKey = usePrevious(key);\n  const [initialLoad, setInitialLoad] = useState<boolean>(false);\n  const [state, setValue] = useState<ValueType<T>>();\n  useEffect(() => {\n    if (!initialLoad || prevKey !== key) {\n      setInitialLoad(true);\n      const realKey = makeKey(key);\n      const val = localStorage.getItem(realKey);\n      if (val) {\n        setValue({ value: readPairs(realKey), action: SetTypes.initial });\n      } else {\n        setValue({ value: defaultValue, action: SetTypes.initial });\n        localStorage.setItem(realKey, makeType('object'));\n        if (localStorage.getItem(realKey)) {\n          makePairs(defaultValue, realKey)\n            .forEach(({ key: k, value: v }) => localStorage.setItem(k, v));\n        }\n      }\n    }\n  }, [initialLoad, key, defaultValue]);\n  const diffUpdate = useCallback(\n    (input: any) => {\n      if (state?.action !== SetTypes.update) {\n        return;\n      }\n      const realKey = makeKey(key);\n      const diffs = diff(readPairs(realKey), input, realKey);\n      if (diffs) {\n        logState('⚙ LocalStorageObject Set', realKey, state?.value);\n        diffs\n          .forEach(({ key: k, value: v, action }) => (action === DiffActions.remove\n            ? localStorage.removeItem(k)\n            : localStorage.setItem(k, v)));\n      }\n    },\n    [state, key],\n  );\n  const updateField = useCallback(\n    (path: string, val: any) => {\n      const diffObj = updateObject(state?.value, path, val);\n      setValue({ value: diffObj, action: SetTypes.update });\n    },\n    [state, key, setValue],\n  );\n  useEffect(() => {\n    if (!initialLoad) {\n      return undefined;\n    }\n    if (!state?.value) {\n      logState('⚙ LocalStorageObject Remove', key, state?.value);\n      diffUpdate({});\n      localStorage.removeItem(makeKey(key));\n    }\n    diffUpdate(state?.value);\n    return undefined;\n  }, [key, state, initialLoad, diffUpdate]);\n  useEffect(() => {\n    const handler = ({\n      storageArea,\n      key: k,\n    }: StorageEvent) => {\n      if (!k) {\n        return;\n      }\n      const isValidKey = isKey(k);\n      const isLocalStorage = storageArea === localStorage;\n      if (!(isLocalStorage && isValidKey)) {\n        return;\n      }\n      setValue({ value: readPairs(makeKey(key)), action: SetTypes.network });\n    };\n    window.addEventListener('storage', handler);\n    return () => window.removeEventListener('storage', handler);\n  }, [setValue, key]);\n  const update = useCallback(\n    (input: T | SetStateAction<T | undefined>) => (typeof input === 'function'\n      ? setValue((t) => ({\n        value: (input as (prevState: T | undefined) => T)(t?.value),\n        action: SetTypes.update,\n      }))\n      : setValue({\n        value: input,\n        action: SetTypes.update,\n      })),\n    [setValue],\n  );\n  return [state?.value, update, updateField];\n};\n","import {\n  Button, CardContent, Dialog, DialogTitle,\n} from '@material-ui/core';\nimport {\n  FC, useCallback, useState,\n} from 'react';\nimport { RightCardActions } from './styled';\n\nexport const useConfirm = (onConfirm: () => void) => {\n  const [open, setIsOpen] = useState<boolean>(false);\n  const onOpen = useCallback(\n    () => setIsOpen(true),\n    [setIsOpen],\n  );\n  const onClose = useCallback(\n    (confirmed: boolean) => {\n      if (confirmed) {\n        onConfirm();\n      }\n      setIsOpen(false);\n    },\n    [onConfirm, setIsOpen],\n  );\n  return { open, onClose, onOpen };\n};\n\nexport const ConfirmDialog: FC<{\n  open: boolean,\n  onClose: (confirm: boolean) => void,\n  title?: string,\n}> = ({\n  open,\n  onClose,\n  title,\n  children,\n}) => (\n  <Dialog onClose={() => onClose(false)} open={open}>\n    {title && (\n    <DialogTitle>\n      {title}\n    </DialogTitle>\n    )}\n    <CardContent>\n      {children}\n    </CardContent>\n    <RightCardActions>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() => onClose(true)}\n      >\n        Confirm\n      </Button>\n      <Button\n        color=\"secondary\"\n        onClick={() => onClose(false)}\n      >\n        Cancel\n      </Button>\n    </RightCardActions>\n  </Dialog>\n);\n","const steelCasing = {\n  input: {\n    steel: 4,\n    glass: 4,\n    osmium: 1,\n  },\n  output: 1,\n};\nconst basicChemicalTank = {\n  input: {\n    redstone: 4,\n    osmium: 4,\n  },\n  output: 1,\n};\nconst fissionCasing = {\n  input: {\n    lead: 4,\n    steelCasing: 1,\n  },\n  output: 4,\n  labels: ['fissionReactor'],\n};\nconst fissionReactorPort = {\n  input: {\n    fissionCasing: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 2,\n  labels: ['fissionReactor'],\n};\nconst fissionLogicAdapter = {\n  input: {\n    redstone: 4,\n    fissionCasing: 1,\n  },\n  output: 1,\n  labels: ['fissionReactor'],\n};\nconst fissionFuelAssembly = {\n  input: {\n    lead: 6,\n    steel: 1,\n    basicChemicalTank: 1,\n  },\n  output: 1,\n  labels: ['fissionReactor'],\n};\nconst controlRodAssembly = {\n  input: {\n    steel: 4,\n    lead: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 1,\n  labels: ['fissionReactor'],\n};\nconst reactorGlass = {\n  input: {\n    enrichedIron: 4,\n    lead: 4,\n    glass: 1,\n  },\n  output: 4,\n  labels: ['fissionReactor'],\n};\nconst eliteControlCircuit = {\n  input: {\n    reinforcedAlloy: 2,\n    advancedControlCircuit: 1,\n  },\n  output: 1,\n};\nconst advancedControlCircuit = {\n  input: {\n    infusedAlloy: 2,\n    basicControlCircuit: 1,\n  },\n  output: 1,\n};\nconst basicControlCircuit = {\n  input: { osmium: 1 },\n  output: 1,\n};\nconst reinforcedAlloy = {\n  input: { infusedAlloy: 1 },\n  output: 1,\n};\nconst infusedAlloy = {\n  input: { iron: 1 },\n  output: 1,\n};\nconst steel = {\n  input: { iron: 1 },\n  output: 1,\n};\nconst turbineCasing = {\n  input: {\n    steel: 4,\n    osmium: 1,\n  },\n  output: 4,\n  labels: ['industrialTurbine'],\n};\nconst turbineValve = {\n  input: {\n    turbineCasing: 4,\n    advancedControlCircuit: 1,\n  },\n  output: 2,\n  labels: ['industrialTurbine'],\n};\nconst turbineVent = {\n  input: {\n    turbineCasing: 4,\n    bars: 1,\n  },\n  output: 2,\n  labels: ['industrialTurbine'],\n};\nconst turbineRotor = {\n  input: {\n    steel: 6,\n    infusedAlloy: 3,\n  },\n  output: 1,\n  labels: ['industrialTurbine'],\n};\nconst turbineBlade = {\n  input: {\n    steel: 4,\n    infusedAlloy: 1,\n  },\n  output: 1,\n  labels: ['industrialTurbine'],\n};\nconst rotationalComplex = {\n  input: {\n    infusedAlloy: 3,\n    steel: 4,\n    advancedControlCircuit: 2,\n  },\n  output: 1,\n  labels: ['industrialTurbine'],\n};\nconst pressureDispenser = {\n  input: {\n    steel: 4,\n    bars: 4,\n    infusedAlloy: 1,\n  },\n  output: 1,\n  labels: ['industrialTurbine'],\n};\nconst electromagneticCoil = {\n  input: {\n    steel: 4,\n    gold: 4,\n    energyTablet: 1,\n  },\n  output: 1,\n  labels: ['industrialTurbine'],\n};\nconst structuralGlass = {\n  input: {\n    steel: 4,\n    glass: 1,\n  },\n  output: 4,\n  labels: ['industrialTurbine'],\n};\nconst energyTablet = {\n  input: {\n    gold: 3,\n    infusedAlloy: 2,\n    redstone: 4,\n  },\n  output: 1,\n};\nconst inductionCasing = {\n  input: {\n    steel: 4,\n    energyTablet: 1,\n  },\n  output: 4,\n  labels: ['inductionMatrix'],\n};\nconst inductionPort = {\n  input: {\n    inductionCasing: 4,\n    eliteControlCircuit: 1,\n  },\n  output: 2,\n  labels: ['inductionMatrix'],\n};\nconst basicInductionCell = {\n  input: {\n    energyTablet: 4,\n    lithium: 4,\n    basicEnergyCube: 1,\n  },\n  output: 1,\n  labels: ['inductionMatrix'],\n};\nconst basicEnergyCube = {\n  input: {\n    energyTablet: 2,\n    iron: 2,\n    redstone: 4,\n    steelCasing: 1,\n  },\n  output: 1,\n};\nconst basicInductionProvider = {\n  input: {\n    lithium: 4,\n    basicControlCircuit: 4,\n    basicEnergyCube: 1,\n  },\n  output: 1,\n  labels: ['inductionMatrix'],\n};\nexport default Object.entries(\n  {\n    steelCasing,\n    fissionCasing,\n    fissionReactorPort,\n    fissionLogicAdapter,\n    fissionFuelAssembly,\n    basicChemicalTank,\n    controlRodAssembly,\n    reactorGlass,\n    eliteControlCircuit,\n    advancedControlCircuit,\n    infusedAlloy,\n    basicControlCircuit,\n    reinforcedAlloy,\n    steel,\n    turbineCasing,\n    turbineBlade,\n    turbineRotor,\n    turbineValve,\n    turbineVent,\n    pressureDispenser,\n    electromagneticCoil,\n    rotationalComplex,\n    structuralGlass,\n    energyTablet,\n    inductionCasing,\n    inductionPort,\n    basicInductionCell,\n    basicEnergyCube,\n    basicInductionProvider,\n  },\n).reduce((prev, [key, value]) => ({\n  ...prev,\n  [key]: {\n    ...value,\n    labels: 'labels' in value\n      ? [...value.labels, 'minecraft']\n      : ['minecraft'],\n  },\n}), {});\n","export const uniq = <T extends any>(\n  input: T[],\n  extract: (input: T) => any = (it) => it,\n): T[] => [...input].filter(\n    (it, idx, arr) => {\n      const match = extract(it);\n      const midx = arr.findIndex((i) => extract(i) === match);\n      return midx === idx;\n    },\n  );\n","import { uniq } from './functions';\nimport {\n  RecipeAST,\n  RecipeStepItem,\n  RecipeStep,\n  RecipeSteps,\n  RecipesType,\n  RecipeType,\n  SymbolType,\n  ComboRecipesType,\n} from './types';\n\nexport const adjust = (\n  obj: Record<string, number>,\n  amount: number,\n): Record<string, number> => Object.entries(obj).reduce(\n  (prev, [k, v]) => ({\n    ...prev,\n    [k]: v * amount,\n  }),\n  {},\n);\n\nexport const reduce = (\n  what: RecipeType,\n  recipes: RecipesType,\n): Record<string, number> => {\n  const input = Object.entries(what.input).map((\n    [key, value],\n  ) => (key in recipes\n    ? {\n      ...adjust(\n        reduce(recipes[key], recipes),\n        Math.ceil(value / (recipes[key].output || 1)),\n      ),\n      [`_${key}`]: value,\n    }\n    : { [key]: value }));\n  const combined = input.reduce(\n    (prev, obj) => Object.entries(obj).reduce(\n      (p, [k, v]) => ({\n        ...p,\n        [k]: ((p[k] || 0) + v),\n      }),\n      prev,\n    ),\n    {},\n  );\n  return combined;\n};\n\nexport const generateAST = (\n  what: RecipeType,\n  recipes: RecipesType,\n  parent?: RecipeAST,\n  name: string = 'root',\n): RecipeAST => {\n  const ast: RecipeAST = {\n    name,\n    parent,\n  };\n  ast.children = Object.keys(what.input)\n    .map((it) => (recipes[it]\n      ? generateAST(recipes[it], recipes, ast, it)\n      : { name: it, parent: ast }));\n  return ast;\n};\n\nexport const generateUses = (\n  name: string = 'root',\n  recipes: RecipesType,\n  parent?: RecipeAST,\n): RecipeAST => {\n  const ast: RecipeAST = {\n    name,\n    parent,\n  };\n  const uses = Object.entries(recipes)\n    .filter(([, { input }]) => Object.keys(input).includes(name))\n    .map(([key]) => key);\n\n  if (uses.length > 0) {\n    ast.children = uses.map((it) => generateUses(it, recipes, ast));\n  }\n\n  return ast;\n};\n\ntype RecipeReduce = {\n  list: RecipeSteps,\n  ignore: string[],\n};\nexport const generateSteps = (\n  ast: RecipeAST,\n  resources: Record<string, number>,\n): RecipeSteps => {\n  let toWalk = [ast];\n  const steps: RecipeSteps = [];\n  while (toWalk.length > 0) {\n    const step: RecipeStep = [];\n    toWalk\n      .filter(({ name }) => resources[`_${name}`])\n      .forEach(({ name }) => {\n        step.push({\n          name,\n          amount: resources[`_${name}`] || 0,\n        });\n      });\n    if (step.length > 0) {\n      steps.push(\n        step\n          .filter((\n            it: RecipeStepItem,\n            idx: number,\n            arr: RecipeStep,\n          ) => arr.findIndex(({ name }) => name === it.name) === idx),\n      );\n    }\n    toWalk = toWalk\n      .filter(({ children }) => children)\n      .reduce(\n        (prev, { children }) => [...prev, ...children!],\n        [] as RecipeAST[],\n      );\n  }\n  const finalSteps = steps.reverse()\n    .reduce(\n      ({ list, ignore }: RecipeReduce, s: RecipeStep) => ({\n        list: [\n          ...list,\n          s.filter(({ name }) => !ignore.includes(name)),\n        ],\n        ignore: uniq([\n          ...ignore,\n          ...s.map(({ name }) => name),\n        ]),\n      }),\n      {\n        list: [],\n        ignore: [],\n      },\n    );\n  return finalSteps.list;\n};\n\nexport const hasCircularDependency = (\n  symbol: SymbolType,\n  recipe: RecipeType,\n  recipes: RecipesType,\n  symbols: SymbolType[],\n): boolean => {\n  const ownSymbols = Object.keys(recipe.input);\n  const containsSymbol = ownSymbols\n    .reduce((prev, it) => prev || (it === symbol.name), false);\n  if (containsSymbol) {\n    return true;\n  }\n  const nextRecipes = (ownSymbols\n    .map((it) => symbols.find(({ name }) => name === it))\n    .filter(Boolean) as SymbolType[]\n  )\n    .filter(({ composite }) => composite)\n    .map(({ name }) => recipes[name])\n    .filter(Boolean);\n  const nextContainSymbol = nextRecipes.reduce(\n    (prev, it) => prev || hasCircularDependency(\n      symbol,\n      it,\n      recipes,\n      symbols,\n    ),\n    false,\n  );\n  return nextContainSymbol;\n};\n\nexport const inheritLabels = (\n  { name, children }: RecipeAST,\n  recipes: ComboRecipesType,\n  toAdd: string[] = [],\n) => {\n  const recipe = recipes[name];\n  if (children) {\n    children.forEach((child) => {\n      const childRecipe = recipes[child.name];\n      if (!childRecipe) {\n        return undefined;\n      }\n      const nextLabels = uniq([\n        ...toAdd,\n        ...(recipe.labels || []),\n        ...(recipe.inheritedLabels || []),\n        ...(childRecipe.labels || []),\n        ...(childRecipe.inheritedLabels || []),\n      ]);\n      childRecipe.inheritedLabels = nextLabels;\n      inheritLabels(child, recipes, nextLabels);\n      return undefined;\n    });\n  }\n};\n","import {\n  createContext,\n  FC,\n  useContext,\n  useMemo,\n  useCallback,\n} from 'react';\n\nimport seedData from '../config/seed';\nimport {\n  generateAST,\n  generateSteps,\n  generateUses,\n  inheritLabels,\n  reduce,\n} from '../utils/calculate';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\nimport {\n  ComboRecipesType, ComboRecipeType, RecipeContextType, RecipesContextType, RecipesType,\n} from '../utils/types';\n\nconst RecipesContext = createContext<RecipesContextType>({\n  recipes: undefined,\n  symbols: [],\n  names: [],\n  labels: [],\n  update: () => {},\n  import: () => {},\n  addRecipe: () => {},\n  removeRecipe: () => {},\n  reset: () => {},\n});\n\nexport const useRecipes = () => useContext(RecipesContext);\nexport const RecipeProviderV3: FC = ({ children }) => {\n  const [baseRecipes, setRecipes, update] = useLocalStorageObject<RecipesType>('recipes-v3', seedData);\n  const recipes = useMemo(\n    () => {\n      if (!baseRecipes) {\n        return undefined;\n      }\n      const recipesList = Object.entries(baseRecipes as RecipesType);\n      const fixedRecipesList = recipesList\n        .map(([key, value]): [string, ComboRecipeType] => {\n          const deps = generateAST(value, baseRecipes, undefined, key);\n          const uses = generateUses(key, baseRecipes, undefined);\n          return [\n            key,\n            {\n              ...value,\n              deps,\n              uses,\n            },\n          ];\n        });\n      const fixedRecipes = fixedRecipesList.reduce(\n        (prev: ComboRecipesType, [key, value]) => ({\n          ...prev,\n          [key]: value,\n        }),\n        {} as ComboRecipesType,\n      );\n      Object.values(fixedRecipes)\n        .forEach(({ deps }) => inheritLabels(deps, fixedRecipes));\n      return fixedRecipes;\n    },\n    [baseRecipes],\n  );\n  const recipeNames = useMemo(\n    () => (baseRecipes ? Object.keys(baseRecipes) : []),\n    [baseRecipes],\n  );\n  const allSymbols = useMemo(\n    () => (recipes\n      ? [\n        ...recipeNames,\n        ...Object.values(recipes as RecipesType)\n          .reduce((prev, it) => [\n            ...prev,\n            ...Object.keys(it.input),\n          ],\n          [] as string[]),\n      ]\n        .sort()\n        .filter((it, idx, arr) => arr.indexOf(it) === idx)\n      : []),\n    [recipes, recipeNames],\n  );\n  const labels = useMemo(\n    () => (recipes\n      ? Object.values(recipes as RecipesType)\n        .map(({ labels: l }) => l)\n        .filter(Boolean)\n        .filter((it) => it!.length > 0)\n        .reduce(\n          (prev: string[], it) => ([\n            ...prev,\n            ...it!,\n          ]),\n          [],\n        )\n      : [])\n      .sort()\n      .filter((it, idx, arr) => arr.indexOf(it) === idx),\n    [recipes],\n  );\n  const symbols = useMemo(\n    () => allSymbols\n      .map((it) => ({ name: it, composite: recipeNames.includes(it) })),\n    [allSymbols, recipeNames],\n  );\n  const addRecipe = useCallback(\n    (name: string) => update(name, { input: {}, output: 1 }),\n    [update],\n  );\n  const removeRecipe = useCallback(\n    (name: string) => recipes && setRecipes(\n      Object.entries(recipes)\n        .filter(([key]) => key !== name)\n        .reduce((prev, [key, value]) => ({\n          ...prev,\n          [key]: value,\n        }), {}),\n    ),\n    [update],\n  );\n  const importFunc = useCallback(\n    (imports: RecipesType) => {\n      setRecipes({\n        ...recipes,\n        ...imports,\n      });\n    },\n    [recipes, setRecipes],\n  );\n  const reset = useCallback(\n    () => setRecipes({}),\n    [setRecipes],\n  );\n  return (\n    <RecipesContext.Provider value={{\n      recipes,\n      symbols,\n      labels,\n      names: recipeNames,\n      update,\n      reset,\n      import: importFunc,\n      addRecipe,\n      removeRecipe,\n    }}\n    >\n      {children}\n    </RecipesContext.Provider>\n  );\n};\n\nexport const useSymbols = () => useRecipes().symbols;\nexport const useNames = () => useRecipes().names;\n\nexport const RecipeContext = createContext<RecipeContextType>({\n  recipe: undefined,\n  resources: {},\n  symbols: [],\n  name: 'unknown',\n  update: () => {},\n  addInput: () => {},\n  removeInput: () => {},\n  addLabel: () => {},\n  removeLabel: () => {},\n});\n\nexport const RecipeProvider: FC<{ name: string }> = ({ children, name }) => {\n  const store = useRecipes();\n  const recipe = useMemo(\n    () => store.recipes?.[name] || undefined,\n    [store, name],\n  );\n  const symbols = useMemo(\n    () => (recipe ? Object.keys(recipe.input) : [])\n      .map((it) => ({ name: it, composite: store.names.includes(it) })),\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (path: string, value: any) => {\n      store.update([name, path].join('.'), value);\n    },\n    [store, name],\n  );\n  const addInput = useCallback(\n    (n: string) => {\n      updateFunc(['input', n].join('.'), 0);\n    },\n    [updateFunc, recipe],\n  );\n  const removeInput = useCallback(\n    (n: string) => {\n      updateFunc('input', Object.entries(recipe?.input ?? {})\n        .filter(([key]) => key !== n)\n        .reduce((prev, [k, v]) => ({\n          ...prev,\n          [k]: v,\n        }), {}));\n    },\n    [updateFunc, recipe],\n  );\n  const addLabel = useCallback(\n    (n: string) => {\n      updateFunc('labels', [\n        ...(recipe?.labels ?? []),\n        n,\n      ]);\n    },\n    [updateFunc, recipe],\n  );\n  const removeLabel = useCallback(\n    (n: string) => {\n      updateFunc('labels', (recipe?.labels ?? [])\n        .filter((it) => it !== n));\n    },\n    [updateFunc, recipe],\n  );\n  const resources = useMemo(\n    () => (recipe && store.recipes ? reduce(recipe, store.recipes) : {}),\n    [recipe, store],\n  );\n  const steps = useMemo(\n    () => (recipe?.deps\n      ? generateSteps(recipe.deps, resources)\n      : undefined),\n    [recipe, resources],\n  );\n  return (\n    <RecipeContext.Provider value={{\n      recipe,\n      symbols,\n      name,\n      resources,\n      ast: recipe?.deps,\n      uses: recipe?.uses,\n      steps,\n      update: updateFunc,\n      addInput,\n      removeInput,\n      addLabel,\n      removeLabel,\n    }}\n    >\n      {children}\n    </RecipeContext.Provider>\n  );\n};\n\nexport const useRecipe = () => useContext(RecipeContext);\nexport const useResources = () => useContext(RecipeContext).resources;\nexport const useAST = () => useContext(RecipeContext).ast;\nexport const useUses = () => useContext(RecipeContext).uses;\nexport const useSteps = () => useContext(RecipeContext).steps;\nexport const useInput = (name: string): [number | undefined, (val: string) => void] => {\n  const { recipe, update } = useRecipe();\n  const value = useMemo(\n    () => recipe?.input[name],\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (val: string) => update(['input', name].join('.'), parseInt(val, 10)),\n    [update],\n  );\n  return [\n    value,\n    updateFunc,\n  ];\n};\nexport const useOutput = (): [number | undefined, (val: string) => void] => {\n  const { recipe, update } = useRecipe();\n  const value = useMemo(\n    () => recipe?.output,\n    [recipe],\n  );\n  const updateFunc = useCallback(\n    (val: string) => {\n      const v = parseInt(val, 10);\n      if (v > 0) {\n        update('output', v);\n      }\n    },\n    [update],\n  );\n  return [\n    value,\n    updateFunc,\n  ];\n};\n","import { FC, useCallback } from 'react'; import {\n  Button,\n  Typography,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport { useTheme } from '../../state/theme';\nimport { ConfirmDialog, useConfirm } from '../Confirm';\nimport { useRecipes } from '../../state/recipes-v3';\n\nconst goHome = () => {\n  // @ts-ignore\n  window.location = `${window.location}`;\n};\n\nexport const ResetAll: FC = () => {\n  const reset = useCallback(\n    () => {\n      Object.keys(localStorage)\n        .forEach((key) => localStorage.removeItem(key));\n      goHome();\n    },\n    [],\n  );\n  const { onOpen, ...args } = useConfirm(reset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Reset All Settings\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to reset all data?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n\nexport const ResetThemeSelection: FC = () => {\n  const { reset } = useTheme();\n  const { onOpen, ...args } = useConfirm(reset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Reset Theme Selection\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to reset theme selection?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n\nexport const ResetRecipes: FC = () => {\n  const { reset } = useRecipes();\n  const history = useHistory();\n  const onReset = useCallback(\n    () => {\n      reset();\n      history.push('/');\n    },\n    [reset, history],\n  );\n  const { onOpen, ...args } = useConfirm(onReset);\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={onOpen}\n      >\n        Remove All Recipes\n      </Button>\n      <ConfirmDialog {...args}>\n        <Typography>\n          Are you sure you want to remove all stored recipes?\n        </Typography>\n      </ConfirmDialog>\n    </>\n  );\n};\n","export const randomColor = (\n  range: string = '0123456789ABCDEF',\n) => [\n  '#',\n  ...new Array(6)\n    .fill(0)\n    .map(() => range[\n      Math.floor(Math.random() * range.length)\n    ]),\n].join('');\n\nexport const isHex = (\n  input: string,\n): boolean => /^#[0-9a-fA-F]{3,8}$/.test(input)\n  && [3, 6, 8].includes(input.length - 1);\n\nconst rgbDigitGroup = '([0-9]{1,3})';\nconst digitGroupRegex = new RegExp(rgbDigitGroup, 'g');\nconst rgbRegex = new RegExp(`^rgb\\\\((?:\\\\s*${rgbDigitGroup}\\\\,\\\\s*){2}(?:\\\\s*${rgbDigitGroup}\\\\s*)\\\\)$`);\nconst rgbaRegex = new RegExp(`^rgba\\\\((?:\\\\s*${rgbDigitGroup}\\\\,\\\\s*){3}(?:\\\\s*${rgbDigitGroup}\\\\s*)\\\\)$`);\nconst inRange = (\n  start: number,\n  end: number,\n  ...list: string[]\n) => list.filter((it) => {\n  const val = parseInt(it, 10)!;\n  return !(val > 0 && val < 255);\n}).length === 0;\nconst rgbDigits = (input: string): string[] | undefined => {\n  const match = input.match(digitGroupRegex);\n  if (!match) {\n    return undefined;\n  }\n  return Array.from(match);\n};\nconst rgbDigitsValid = (input?: string[]): boolean => !!input\n  && inRange(\n    0,\n    255,\n    ...input,\n  );\nconst rgbaDigitsValid = (input?: string[]): boolean => {\n  if (!input) {\n    return false;\n  }\n  const [alpha] = input.splice(input.length - 1, 1);\n  return rgbDigitsValid(input) && inRange(0, 1, alpha);\n};\n\nexport const isRGBA = (input: string): boolean => (\n  rgbRegex.test(input)\n  && rgbDigitsValid(rgbDigits(input))\n)\n  || (\n    rgbaRegex.test(input)\n    && rgbaDigitsValid(rgbDigits(input))\n  );\n","import {\n  FC, useMemo, createContext, useCallback, useEffect, useContext,\n} from 'react';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\nimport { LabelType } from '../utils/types';\nimport { uniq } from '../utils/functions';\nimport { randomColor } from '../utils/colors';\nimport { useRecipes } from './recipes-v3';\n\nconst extract = ({ name }: LabelType) => name;\n\nexport type LabelContextType = {\n  labels: LabelType[],\n  rawLabels: Record<string, string> | undefined,\n  setColor: (label: string, color: string) => void,\n  import: (input: Record<string, string>) => void,\n};\n\nexport const LabelContext = createContext<LabelContextType>({\n  labels: [],\n  rawLabels: undefined,\n  setColor: () => {},\n  import: () => {},\n});\n\nconst decode = (\n  input: Record<string, string>,\n): LabelType[] => Object.entries(input)\n  .map(([name, color]) => ({ name, color }));\n\nconst encode = (\n  input: LabelType[],\n): Record<string, string> => input.reduce(\n  (prev, { name, color }) => ({\n    ...prev,\n    [name]: color,\n  }),\n  {},\n);\n\nexport const storageKey = 'labels';\nexport const LabelProvider: FC = ({ children }) => {\n  const { labels: recipeLabels } = useRecipes();\n  const [store, setLabels] = useLocalStorageObject<Record<string, string>>(\n    storageKey,\n    {},\n  );\n  const labels = useMemo(\n    () => decode(store || {}),\n    [store],\n  );\n  const update = useCallback(\n    (input: LabelType[] | ((old: LabelType[]) => LabelType[])) => (Array.isArray(input)\n      ? setLabels(encode(uniq(input, extract)))\n      : setLabels((t) => encode(uniq(input(t ? decode(t) : []), extract)))\n    ),\n    [setLabels],\n  );\n  const setColor = useCallback(\n    (n: string, c: string) => update(\n      (t) => t.map(\n        ({ name, color }) => (name === n\n          ? { name, color: c }\n          : { name, color }\n        ),\n      ),\n    ),\n    [update],\n  );\n  const importFunc = useCallback(\n    (imports: Record<string, string>) => {\n      setLabels({\n        ...store,\n        ...imports,\n      });\n    },\n    [store, setLabels],\n  );\n  useEffect(\n    () => {\n      if (recipeLabels.length === 0) {\n        return undefined;\n      }\n      const updated = recipeLabels.reduce(\n        (prev, it) => ([\n          ...prev,\n          {\n            name: it,\n            color: labels.find(({ name }) => name === it)?.color ?? randomColor(),\n          } as LabelType,\n        ]),\n        [] as LabelType[],\n      );\n      if (updated.length !== labels.length) {\n        update(updated);\n        return undefined;\n      }\n      const diff = updated.filter(({ name, color }) => {\n        const label = labels.find(({ name: n }) => n === name);\n        return !label || label.color !== color;\n      });\n      if (diff.length > 0) {\n        update(updated);\n      }\n      return undefined;\n    },\n    [recipeLabels, labels, update],\n  );\n  return (\n    <LabelContext.Provider\n      value={{\n        labels,\n        rawLabels: store,\n        setColor,\n        import: importFunc,\n      }}\n    >\n      {children}\n    </LabelContext.Provider>\n  );\n};\n\nexport const useLabels = () => useContext(LabelContext);\nexport const useLabel = (name: string): [string | undefined, (input: string) => void] => {\n  const { labels, setColor } = useLabels();\n  const value = useMemo(\n    () => labels.find(\n      ({ name: n }) => name === n,\n    ) || undefined,\n    [labels],\n  );\n  const setter = useCallback(\n    (color: string) => value\n      && setColor(name, color),\n    [value, setColor, name],\n  );\n  return [value?.color, setter];\n};\nexport const useLabelColor = (name: string) => useLabel(name)[0];\n","import { FC, useCallback } from 'react';\nimport {\n  Button,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport { ExportType } from '../../utils/types';\nimport { useRecipes } from '../../state/recipes-v3';\nimport { useLabels } from '../../state/label';\n\nconst readFile = (file: File) => new Promise<ExportType>((accept, reject) => {\n  const reader = new FileReader();\n  reader.onload = () => {\n    try {\n      if (!reader.result) {\n        throw new Error('Empty Data');\n      }\n      if (reader.result instanceof ArrayBuffer) {\n        throw new Error('Got an Array Buffer?');\n      }\n      const data = JSON.parse(reader.result) as ExportType;\n      accept(data);\n    } catch (e) {\n      reject(e);\n    }\n  };\n  reader.readAsText(file);\n});\n\nexport const Import: FC = () => {\n  const { import: importRecipes } = useRecipes();\n  const { import: importLabels } = useLabels();\n  const history = useHistory();\n  const onSubmit = useCallback(\n    () => {\n      const el = document.createElement('input');\n      el.type = 'file';\n      document.body.appendChild(el);\n      el.addEventListener(\n        'change',\n        async () => {\n          const { files } = el;\n          if (files && files.length > 0) {\n            const results = (\n              await Promise.all(\n                Array.from(files).map(readFile),\n              )\n            )\n              .filter((it) => it.recipes && it.labels)\n              .reduce((prev, it) => ({\n                recipes: {\n                  ...prev.recipes,\n                  ...it.recipes,\n                },\n                labels: {\n                  ...prev.labels,\n                  ...it.labels,\n                },\n              }), {\n                recipes: {},\n                labels: {},\n              }) as ExportType;\n            importRecipes(results.recipes);\n            importLabels(results.labels);\n            history.push('/');\n          }\n        },\n      );\n      el.click();\n      document.body.removeChild(el);\n    },\n    [importRecipes, importLabels, history],\n  );\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        Import\n      </Button>\n    </>\n  );\n};\n","import {\n  useState,\n  useCallback,\n  FC,\n  ChangeEvent,\n  useMemo,\n} from 'react';\nimport styled from 'styled-components';\nimport { InputAdornment, TextField } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\n\nexport type FilterType = {\n  value: string | undefined,\n  onChange: (event: ChangeEvent<HTMLInputElement>) => void,\n};\nexport const useFilter = <T extends any>(\n  list: T[],\n  processor: (input: T) => string,\n): {\n    list: T[],\n  } & FilterType => {\n  const [value, setValue] = useState<string>();\n  const onChange = useCallback(\n    ({ target: { value: val } }: ChangeEvent<HTMLInputElement>) => setValue(val),\n    [setValue],\n  );\n  const regex = useMemo(\n    () => (value ? new RegExp(value, 'i') : undefined),\n    [value],\n  );\n  const filteredList = useMemo(\n    () => {\n      if (!regex) {\n        return list;\n      }\n      return list.map((it) => ({\n        id: processor(it),\n        meta: it,\n      }))\n        .filter(({ id }) => regex.test(id))\n        .map(({ meta }) => meta);\n    },\n    [list, processor, regex],\n  );\n  return {\n    list: filteredList,\n    value,\n    onChange,\n  };\n};\n\nexport const StyledTextField = styled(TextField)`\n  margin-bottom: 25px;\n`;\n\nexport const Filter: FC<FilterType> = ({\n  value,\n  onChange,\n}) => (\n  <StyledTextField\n    value={value}\n    onChange={onChange}\n    fullWidth\n    InputProps={{\n      startAdornment: (\n        <InputAdornment position=\"start\">\n          <SearchIcon />\n        </InputAdornment>\n      ),\n    }}\n  />\n);\n","export const camelCaseToCapitalized = (\n  input: string,\n): string => `${input[0].toUpperCase()}${input\n  .substr(1)\n  .replace(/[a-z][A-Z]/g, (it) => `${it[0]} ${it[1]}`)}`;\n\nexport const capitalizedToCamelCase = (\n  input: string,\n): string => `${input[0].toLowerCase()}${input\n  .substr(1)\n  .replace(/ [a-zA-Z]/g, (it) => it[1].toUpperCase())}`;\n\nexport const capitalize = (\n  input: string,\n): string => input[0].toUpperCase()\n  + input.substr(1).replace(/ ([a-z])/g, (m) => ` ${m[1].toUpperCase()}`);\n","import { FC, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { Chip, Typography, withTheme } from '@material-ui/core';\nimport { useFilter, Filter } from './Filter';\nimport { useLabelColor } from '../state/label';\nimport { camelCaseToCapitalized } from '../utils/strings';\n\nexport const StyledContainer = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const StyledChip = withTheme(\n  styled(Chip)<{\n    customColor?: string\n  }>`\n    margin: 5px;\n    &, &:hover, &:focus {\n      background: ${({ customColor }) => (customColor)};\n      &, svg {\n        color: ${({ customColor, theme: { palette: { getContrastText } } }) => (customColor ? getContrastText(customColor) : undefined)};\n      }\n    }\n  `,\n);\n\nexport const LabelChip: FC<{\n  name: string,\n  onRemove?: (input: string) => (e: Event) => void,\n  onClick?: (input: string) => (e: any) => void,\n  active: boolean,\n}> = ({\n  name,\n  onRemove,\n  onClick,\n  active,\n}) => {\n  const color = useLabelColor(name);\n  const removeFunc = useMemo(\n    () => (onRemove ? onRemove(name) : undefined),\n    [onRemove, name],\n  );\n  const clickFunc = useMemo(\n    () => (onClick ? onClick(name) : undefined),\n    [onClick, name],\n  );\n  return (\n    <StyledChip\n      label={camelCaseToCapitalized(name)}\n      customColor={active ? color : undefined}\n      variant={active ? 'default' : 'outlined'}\n      onDelete={removeFunc}\n      {...clickFunc ? { onClick: clickFunc } : {}}\n    />\n  );\n};\n\nexport const StyledTypography = styled(Typography)`\n  margin: 25px 0 15px;\n`;\n\nexport const LabelList: FC<{\n  labels: string[],\n  extraLabels?: string[],\n  filter?: boolean,\n  active?: string[],\n  onRemove?: (input: string) => (e: Event) => void,\n  onClick?: (input: string) => (e: any) => void,\n}> = ({\n  labels,\n  extraLabels,\n  onRemove,\n  onClick,\n  filter = true,\n  active,\n}) => {\n  const { list, ...filterProps } = useFilter(\n    labels,\n    (it) => it,\n  );\n  const renderLabels = useMemo(\n    () => (filter ? list : labels)\n      .map((it) => ({\n        label: it,\n        active: active ? active.includes(it) : true,\n      })),\n    [filter, list, labels, active],\n  );\n  const extra = useMemo(\n    () => (extraLabels && labels\n      ? extraLabels.filter((it) => !labels.includes(it))\n      : undefined),\n    [extraLabels, labels],\n  );\n  return (\n    <>\n      {extra && (\n      <StyledTypography\n        variant=\"h5\"\n      >\n        Own Labels\n      </StyledTypography>\n      )}\n      <StyledContainer>\n        {filter && <Filter {...filterProps} />}\n        {renderLabels.map(({ label, active: a }) => (\n          <LabelChip\n            name={label}\n            key={label}\n            active={a}\n            onRemove={onRemove}\n            onClick={onClick}\n          />\n        ))}\n      </StyledContainer>\n      {extra && (\n      <>\n        <StyledTypography\n          variant=\"h5\"\n        >\n          Inherited Labels\n        </StyledTypography>\n        {extra.map((label) => (\n          <LabelChip\n            name={label}\n            key={label}\n            active\n          />\n        ))}\n      </>\n      )}\n    </>\n  );\n};\n","import {\n  FC, useCallback, useMemo, useState,\n} from 'react';\nimport {\n  Backdrop,\n  Button,\n  Fade,\n  CardHeader,\n  Modal,\n  Typography,\n} from '@material-ui/core';\nimport { useRecipes } from '../../state/recipes-v3';\nimport { useLabels } from '../../state/label';\nimport {\n  ModalContainer,\n  ModalContent,\n  ModalWrapper,\n  RightCardActions,\n} from '../styled';\nimport { LabelList } from '../LabelList';\nimport { uniq } from '../../utils/functions';\n\nexport const ExportModal: FC<{\n  open: boolean,\n  onClose: () => void,\n}> = ({\n  open,\n  onClose,\n}) => {\n  const [filtered, setFiltered] = useState<string[]>([]);\n  const addFilter = useCallback(\n    (input: string) => setFiltered(\n      (t) => uniq([...t, input]),\n    ),\n    [setFiltered],\n  );\n  const removeFilter = useCallback(\n    (input: string) => setFiltered(\n      (t) => uniq(t.filter((it) => it !== input)),\n    ),\n    [setFiltered],\n  );\n  const toggleFilter = useCallback(\n    (input: string) => (filtered.includes(input)\n      ? removeFilter(input)\n      : addFilter(input)),\n    [filtered, removeFilter, addFilter],\n  );\n  const clearFilter = useCallback(\n    () => setFiltered([]),\n    [setFiltered],\n  );\n  const onClick = useCallback(\n    (name: string) => () => toggleFilter(name),\n    [toggleFilter],\n  );\n  const { recipes, labels: allLabels } = useRecipes();\n  const { rawLabels: labels } = useLabels();\n  const filteredLabels = useMemo(\n    () => {\n      if (!labels) {\n        return undefined;\n      }\n      if (filtered.length === 0) {\n        return labels;\n      }\n      return Object.entries(labels)\n        .filter(([key]) => filtered.includes(key))\n        .reduce((prev, [key, value]) => ({\n          ...prev,\n          [key]: value,\n        }), {});\n    },\n    [filtered, labels],\n  );\n  const filteredRecipes = useMemo(\n    () => {\n      if (!recipes) {\n        return undefined;\n      }\n      if (filtered.length === 0) {\n        return recipes;\n      }\n      return Object.entries(recipes)\n        .filter(([,{ labels: l }]) => l\n          && l.reduce(\n            (prev: boolean, it) => prev || filtered.includes(it),\n            false,\n          ))\n        .reduce((prev, [key, value]) => ({\n          ...prev,\n          [key]: value,\n        }), {});\n    },\n    [filtered, labels],\n  );\n  const onSubmit = useCallback(\n    () => {\n      const blob = new Blob(\n        [\n          JSON.stringify({\n            recipes: filteredRecipes || {},\n            labels: filteredLabels || {},\n          }, undefined, 2),\n        ],\n        { type: 'application/json' },\n      );\n      const obj = window.URL.createObjectURL(blob);\n      const el = document.createElement('a');\n      el.style.display = 'none';\n      el.href = obj;\n      el.download = 'export.json';\n      document.body.appendChild(el);\n      el.click();\n      document.body.removeChild(el);\n    },\n    [filteredRecipes, filteredLabels],\n  );\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      closeAfterTransition\n      disableEnforceFocus\n      disableAutoFocus\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      <Fade in={open}>\n        <ModalContainer>\n          <ModalWrapper elevation={10}>\n            <CardHeader title=\"Export\" />\n            <ModalContent>\n              <Typography variant=\"h6\">Only export recipes matching the following tags:</Typography>\n              <Typography variant=\"body1\">Leave blank to export all</Typography>\n              <br />\n              <LabelList\n                labels={allLabels}\n                active={filtered}\n                onClick={onClick}\n              />\n            </ModalContent>\n            <RightCardActions>\n              {filtered.length > 0 && (\n              <Button\n                color=\"secondary\"\n                variant=\"contained\"\n                onClick={clearFilter}\n              >\n                Clear Filter\n              </Button>\n              )}\n              <Button\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={onSubmit}\n              >\n                Export\n              </Button>\n              <Button\n                color=\"secondary\"\n                onClick={onClose}\n              >\n                Cancel\n              </Button>\n            </RightCardActions>\n          </ModalWrapper>\n        </ModalContainer>\n      </Fade>\n    </Modal>\n  );\n};\n\nexport const Export: FC = () => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const close = useCallback(\n    () => setIsOpen(false),\n    [setIsOpen],\n  );\n  const open = useCallback(\n    () => setIsOpen(true),\n    [setIsOpen],\n  );\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={open}\n      >\n        Export\n      </Button>\n      <ExportModal open={isOpen} onClose={close} />\n    </>\n  );\n};\n","import {\n  createContext,\n  useContext,\n  useCallback,\n  FC,\n} from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\n\ntype StackContextType = {\n  isEnabled: boolean | undefined,\n  stackSize: number | undefined,\n  toggleEnabled: () => void,\n  setStackSize: (input: number) => void,\n};\n\nexport const StackContext = createContext<StackContextType>({\n  isEnabled: false,\n  stackSize: 1,\n  toggleEnabled: () => {},\n  setStackSize: () => {},\n});\n\nexport const StackProvider: FC = ({\n  children,\n}) => {\n  const [isEnabled, setIsEnabled] = useLocalStorage<boolean>('stacks-enabled', false);\n  const toggleEnabled = useCallback(\n    () => setIsEnabled((t) => !t),\n    [setIsEnabled],\n  );\n  const [stackSize, setStackSize] = useLocalStorage<number>('stacks-size', 1);\n  const setter = useCallback(\n    (input: number) => (input > 0 ? setStackSize(input) : undefined),\n    [setStackSize],\n  );\n  return (\n    <StackContext.Provider value={{\n      isEnabled,\n      toggleEnabled,\n      stackSize,\n      setStackSize: setter,\n    }}\n    >\n      {children}\n    </StackContext.Provider>\n  );\n};\n\nexport const useStacks = () => useContext(StackContext);\n","import { FormControlLabel, Switch, TextField } from '@material-ui/core';\nimport { ChangeEvent, FC, useCallback } from 'react';\nimport { useStacks } from '../../state/stack';\n\nexport const StacksEnabled: FC = () => {\n  const { isEnabled, toggleEnabled } = useStacks();\n  return (\n    <FormControlLabel\n      label=\"Stacks Enabled\"\n      control={\n        <Switch checked={isEnabled} onChange={toggleEnabled} />\n      }\n    />\n  );\n};\n\nexport const StacksAmount: FC = () => {\n  const { stackSize, setStackSize } = useStacks();\n  const changeHandler = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const val = parseInt(value, 10);\n      if (val && !Number.isNaN(val)) {\n        setStackSize(val);\n      }\n    },\n    [setStackSize],\n  );\n  return (\n    <TextField\n      fullWidth\n      label=\"Stack Size\"\n      value={stackSize}\n      onChange={changeHandler}\n    />\n  );\n};\n","import { FC, useCallback } from 'react';\nimport { Typography } from '@material-ui/core';\nimport { ColorPicker } from 'material-ui-color';\nimport styled from 'styled-components';\n\nimport { useRecipes } from '../../state/recipes-v3';\nimport { useLabel } from '../../state/label';\nimport { camelCaseToCapitalized } from '../../utils/strings';\n\nconst LabelWrapper = styled.article`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const LabelEditor: FC<{\n  label: string\n}> = ({\n  label,\n}) => {\n  const [color, setColor] = useLabel(label);\n  const changeHandler = useCallback(\n    (value) => {\n      setColor(`#${value.hex}`);\n    },\n    [setColor],\n  );\n  return (\n    <LabelWrapper>\n      <Typography>\n        {camelCaseToCapitalized(label)}\n      </Typography>\n      <ColorPicker\n        value={color}\n        onChange={changeHandler}\n        hideTextfield\n      />\n    </LabelWrapper>\n  );\n};\n\nexport const LabelSettings: FC = () => {\n  const { labels } = useRecipes();\n  return (\n    <>\n      {labels.map((label) => (\n        <LabelEditor key={label} label={label} />\n      ))}\n    </>\n  );\n};\n","import {\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { FC } from 'react';\nimport styled from 'styled-components';\nimport { StickyAppBar, StyledToolbarContainer } from '../styled';\nimport { ResetAll, ResetThemeSelection, ResetRecipes } from './ResetSettings';\nimport { Import } from './Import';\nimport { Export } from './Export';\nimport { StacksEnabled, StacksAmount } from './StacksSettings';\nimport { LabelSettings } from './LabelsSettings';\n\ntype DirectionProp = {\n  direction?: 'row' | 'column'\n  wrap?: 'wrap' | 'nowrap'\n};\nexport const SectionWrapper = styled.section<DirectionProp>`\n  display: flex;\n  flex-flow: ${({ direction }) => (direction === 'column'\n    ? 'column'\n    : 'row'\n  )} ${({ wrap }) => (wrap === 'wrap'\n  ? 'wrap'\n  : 'nowrap'\n)};\n  margin: 25px 20px;\n  & > * {\n    margin: 5px;\n  }\n`;\n\nexport const Section: FC<{\n  title: string\n} & DirectionProp> = ({\n  title,\n  children,\n  direction,\n}) => (\n  <>\n    <StickyAppBar>\n      <Toolbar>\n        <StyledToolbarContainer>\n          <Typography variant=\"h5\">{title}</Typography>\n        </StyledToolbarContainer>\n      </Toolbar>\n    </StickyAppBar>\n    <SectionWrapper direction={direction}>\n      {children}\n    </SectionWrapper>\n  </>\n);\n\nexport const SettingsView: FC = () => (\n  <>\n    <Section title=\"Label Colors\" direction=\"column\">\n      <LabelSettings />\n    </Section>\n    <Section title=\"Split into Stacks\" direction=\"column\">\n      <StacksEnabled />\n      <StacksAmount />\n    </Section>\n    <Section title=\"Import / Export\">\n      <Import />\n      <Export />\n    </Section>\n    <Section title=\"Reset\">\n      <ResetAll />\n      <ResetRecipes />\n      <ResetThemeSelection />\n    </Section>\n  </>\n);\n\nexport default SettingsView;\n","import { FC } from 'react';\nimport { Badge, Tooltip } from '@material-ui/core';\nimport styled from 'styled-components';\nimport { useLabelColor } from '../state/label';\nimport { camelCaseToCapitalized } from '../utils/strings';\n\nexport const StyledBadge = styled(Badge)<{\n  customColor?: string\n}>`\n  .MuiBadge-badge {\n    background: ${({ customColor }) => customColor};\n    height: 10px;\n    width: 10px;\n  }\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px;\n  transform: scale(1);\n`;\n\nexport const LabelBadgeList = styled.section`\n  .MuiBadge-badge {\n    position: relative;\n  }\n`;\n\nexport const LabelBadge: FC<{\n  name: string\n}> = ({\n  name,\n}) => {\n  const color = useLabelColor(name);\n  return (\n    <Tooltip title={camelCaseToCapitalized(name)} arrow>\n      <StyledBadge\n        variant=\"dot\"\n        customColor={color}\n      />\n    </Tooltip>\n  );\n};\n","import {\n  createContext,\n  FC,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\nimport { uniq } from '../utils/functions';\n\nexport type LabelFilterContextType = {\n  filterBy: string[],\n  addFilter: (input: string) => void\n  removeFilter: (input: string) => void\n  toggleFilter: (input: string) => void\n};\n\nexport const LabelFilterContext = createContext<LabelFilterContextType>({\n  filterBy: [],\n  addFilter: () => {},\n  removeFilter: () => {},\n  toggleFilter: () => {},\n});\n\nexport const storageKey = ['filter', 'label'].join(':');\nexport const LabelFilterProvider: FC = ({ children }) => {\n  const [store, setFilterBy] = useLocalStorageObject<{ filterBy: string[] }>(\n    storageKey,\n    { filterBy: [] },\n  );\n  const filterBy = useMemo(\n    () => (store?.filterBy ?? [])\n      .filter(Boolean)\n      .filter((it) => it !== 'undefined'),\n    [store?.filterBy],\n  );\n  const update = useCallback(\n    (input: string[] | ((old: string[]) => string[])) => (Array.isArray(input)\n      ? setFilterBy({ filterBy: uniq(input) })\n      : setFilterBy((t) => ({ filterBy: uniq(input(t?.filterBy || [])) }))\n    ),\n    [setFilterBy],\n  );\n  const addFilter = useCallback(\n    (input: string) => update((f) => [...f, input]),\n    [update],\n  );\n  const removeFilter = useCallback(\n    (input: string) => update((f) => f.filter((it) => it !== input)),\n    [update],\n  );\n  const toggleFilter = useCallback(\n    (input: string) => (filterBy.includes(input)\n      ? removeFilter(input)\n      : addFilter(input)),\n    [filterBy, addFilter, removeFilter],\n  );\n  return (\n    <LabelFilterContext.Provider\n      value={{\n        filterBy: filterBy || [],\n        addFilter,\n        removeFilter,\n        toggleFilter,\n      }}\n    >\n      {children}\n    </LabelFilterContext.Provider>\n  );\n};\n\nexport const useLabelFilter = () => useContext(LabelFilterContext);\nexport const useLabelFilters = () => useLabelFilter().filterBy;\n","import React, { FC, useMemo } from 'react';\nimport {\n  List,\n  ListItem,\n  ListItemText,\n} from '@material-ui/core';\n// import styled from 'styled-components';\nimport { useRecipes } from '../state/recipes-v3';\nimport { camelCaseToCapitalized } from '../utils/strings';\nimport { StyledLink } from './styled';\nimport { Filter, useFilter } from './Filter';\nimport { LabelBadge, LabelBadgeList } from './Label';\nimport { useLabelFilters } from '../state/filter';\nimport { uniq } from '../utils/functions';\n\nexport const RecipesList: FC = () => {\n  const { recipes } = useRecipes();\n  const recipeList = useMemo(\n    () => Object.entries(recipes || {})\n      .map(([it, { labels, inheritedLabels }]) => ({\n        id: it,\n        labels: uniq([\n          ...(labels || []),\n          ...(inheritedLabels || []),\n        ]),\n        text: camelCaseToCapitalized(it),\n      })),\n    [recipes],\n  );\n  const filterBy = useLabelFilters();\n  const preFilteredList = useMemo(\n    () => (filterBy.length > 0\n      ? recipeList.filter(\n        ({ labels }): boolean => (labels\n          ? labels.reduce(\n            (prev, label): boolean => (\n              prev || filterBy.includes(label)\n            ),\n            false as boolean,\n          )\n          : false\n        ),\n      )\n      : recipeList\n    ),\n    [recipeList, filterBy],\n  );\n  const { list, ...filterProps } = useFilter(\n    preFilteredList,\n    ({ text }) => text,\n  );\n  return (\n    <List>\n      <Filter {...filterProps} />\n      {list.map(({\n        id,\n        text,\n        labels,\n      }) => (\n        <StyledLink to={`/recipes/${id}`} key={id}>\n          <ListItem button>\n            <ListItemText>\n              {text}\n            </ListItemText>\n            {labels && (\n              <LabelBadgeList>\n                {labels.map(\n                  (label) => (\n                    <LabelBadge key={label} name={label} />\n                  ),\n                )}\n              </LabelBadgeList>\n            )}\n          </ListItem>\n        </StyledLink>\n      ))}\n    </List>\n  );\n};\n","import React, { FC } from 'react';\nimport { Chip } from '@material-ui/core';\nimport styled from 'styled-components';\nimport { useSymbols } from '../state/recipes-v3';\nimport { StyledLink } from './styled';\nimport { SymbolType } from '../utils/types';\nimport { useFilter, Filter } from './Filter';\n\nexport const StyledContainer = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const StyledChip = styled(Chip)`\n  margin: 5px;\n`;\n\nexport const ClickableStyledChip = styled(StyledChip)`\n  cursor: pointer;\n`;\n\nexport const SymbolsList: FC<{\n  symbols: SymbolType[],\n  filter?: boolean,\n  onDelete?: (input: string) => (e: Event) => void,\n}> = ({\n  symbols,\n  onDelete,\n  filter = true,\n}) => {\n  const { list, ...filterProps } = useFilter(\n    symbols,\n    ({ name }) => name,\n  );\n  return (\n    <StyledContainer>\n      {filter && <Filter {...filterProps} />}\n      {(filter ? list : symbols).map(({ name, composite }) => (composite ? (\n        <StyledLink to={`/recipes/${name}`} key={name}>\n          <ClickableStyledChip\n            label={name}\n            onDelete={onDelete && onDelete(name)}\n          />\n        </StyledLink>\n      ) : (\n        <StyledChip\n          variant=\"outlined\"\n          label={name}\n          key={name}\n          onDelete={onDelete && onDelete(name)}\n        />\n      )))}\n    </StyledContainer>\n  );\n};\n\nexport default () => {\n  const symbols = useSymbols();\n  return symbols ? <SymbolsList symbols={symbols} /> : null;\n};\n","import React, {\n  FC,\n} from 'react';\nimport {\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { RecipesList } from '../RecipesList';\nimport Symbols from '../SymbolsList';\nimport {\n  StickyAppBar,\n  StyledToolbarContainer,\n  StyledContainer,\n} from '../styled';\n\nconst DrawerAppBar: FC = ({ children }) => (\n  <StickyAppBar>\n    <Toolbar>\n      <StyledToolbarContainer>\n        <Typography variant=\"h5\">{children}</Typography>\n      </StyledToolbarContainer>\n    </Toolbar>\n  </StickyAppBar>\n);\n\nexport const RecipesView: FC = () => (\n  <>\n    <DrawerAppBar>Symbols</DrawerAppBar>\n    <StyledContainer>\n      <Symbols />\n    </StyledContainer>\n    <DrawerAppBar>Recipes</DrawerAppBar>\n    <StyledContainer>\n      <RecipesList />\n    </StyledContainer>\n  </>\n);\n","import React, {\n  FC, useCallback, useEffect,\n} from 'react';\nimport {\n  SwipeableDrawer,\n  Tab,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport styled from 'styled-components';\n\nimport { useHistory } from 'react-router';\nimport { TabContext } from '@material-ui/lab';\nimport { useDrawer } from '../../state/drawer';\nimport {\n  onMobile,\n  StyledTabPanel\n  as\n  TabPanel,\n  StyledTabs,\n} from '../styled';\nimport { useIsMobile } from '../../hooks/useMedia';\nimport { BottomFab } from '../BottomFab';\nimport { useLocalStorage } from '../../hooks/useLocalStorage';\n\nimport { SettingsView } from '../SettingsPane';\nimport { RecipesView } from './RecipeView';\nimport { FilterView } from './FilterView';\n\nconst drawerStyle = `\n  min-width: min(100vw, 300px);\n  max-width: 500px;\n  ${onMobile} {\n    min-width: 100vw;\n    max-width: 100vw;\n  }\n`;\nconst StyledDrawer = styled(SwipeableDrawer)`\n  .styledPaper {\n    ${drawerStyle}\n    ${onMobile} {\n      padding-left: env(safe-area-inset-left);\n      padding-right: env(safe-area-inset-right);\n    }\n  }\n  .styledRoot {\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n    justify-content: flex-start;\n  }\n`;\n\nexport const DrawerWrapper = styled.section`\n  display: flex;\n  flex-flow: column nowrap;\n  height: 100%;\n  width: 100%;\n`;\n\nexport const DrawerInner = styled.article`\n  flex: 1;\n  overflow: hidden;\n  overflow-y: auto;\n`;\n\nexport const StyledTabPanel = styled(TabPanel)`\n  ${drawerStyle}\n`;\n\nconst tabs = [\n  { title: 'Recipes', Component: RecipesView },\n  { title: 'Filter', Component: FilterView },\n  { title: 'Settings', Component: SettingsView },\n];\n\nexport const Drawer: FC = () => {\n  const isMobile = useIsMobile();\n  const { isOpen, open, close } = useDrawer();\n  const [tab, setTab] = useLocalStorage<string>('drawer-tab', tabs[0].title);\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <StyledDrawer\n      open={isOpen}\n      onOpen={open}\n      onClose={close}\n      anchor=\"right\"\n      classes={{ paper: 'styledPaper', root: 'styledRoot' }}\n    >\n      <DrawerWrapper>\n        <TabContext value={tab || tabs[0].title}>\n          <StyledTabs\n            value={tab}\n            onChange={onChange}\n            variant={isMobile ? 'fullWidth' : undefined}\n          >\n            {tabs.map(({ title }) => (\n              <Tab label={title} key={title} value={title} />\n            ))}\n          </StyledTabs>\n          <DrawerInner>\n            {tabs.map(({ title, Component }) => (\n              <StyledTabPanel value={title} key={title}>\n                <Component />\n              </StyledTabPanel>\n            ))}\n            {isMobile && (\n              <BottomFab\n                onClick={close}\n                Icon={CloseIcon}\n                horizontal=\"left\"\n              />\n            )}\n          </DrawerInner>\n        </TabContext>\n      </DrawerWrapper>\n    </StyledDrawer>\n  );\n};\n\nexport const RouteChangeDrawerClose: FC = () => {\n  const history = useHistory();\n  const { close } = useDrawer();\n  useEffect(\n    () => history.listen(() => {\n      close();\n    }),\n    [history, close],\n  );\n  return <></>;\n};\n","import { FC, useCallback } from 'react';\nimport { useLabelFilter } from '../../state/filter';\nimport { useRecipes } from '../../state/recipes-v3';\nimport { LabelList } from '../LabelList';\nimport { StyledContainer } from '../styled';\n\nexport const FilterView: FC = () => {\n  const { labels } = useRecipes();\n  const { filterBy, toggleFilter } = useLabelFilter();\n  const onClick = useCallback(\n    (name: string) => () => {\n      toggleFilter(name);\n    },\n    [toggleFilter],\n  );\n  return (\n    <StyledContainer>\n      <LabelList\n        labels={labels}\n        active={filterBy}\n        onClick={onClick}\n      />\n    </StyledContainer>\n  );\n};\n","import React, {\n  FC,\n  useCallback,\n  useMemo,\n  useState,\n  useEffect,\n} from 'react';\nimport {\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport { SymbolsList } from '../SymbolsList';\nimport { SymbolType } from '../../utils/types';\nimport { camelCaseToCapitalized, capitalize, capitalizedToCamelCase } from '../../utils/strings';\nimport {\n  AutocompleteWrapper,\n  RightCardActions,\n  StyledCard,\n  StyledExpandCardContent,\n} from '../styled';\nimport { hasCircularDependency } from '../../utils/calculate';\nimport {\n  useRecipe,\n  useRecipes,\n} from '../../state/recipes-v3';\n\ntype ComboBoxAddType = {inputValue?: string};\nconst filter = createFilterOptions<SymbolType & ComboBoxAddType>();\n\nexport const SymbolsEditor: FC = () => {\n  const {\n    symbols: allSymbols,\n    recipes,\n  } = useRecipes();\n  const {\n    name,\n    symbols,\n    addInput,\n    removeInput,\n  } = useRecipe();\n  const deleteHandler = useCallback(\n    (symbol: string) => (e: Event) => {\n      e.preventDefault();\n      removeInput(symbol);\n    },\n    [removeInput],\n  );\n  const comboSymbols = useMemo(\n    () => {\n      const usedSymbols = symbols.map(({ name: n }) => n);\n      const circularSymbols = allSymbols.filter(\n        ({ name: n, composite }) => {\n          if (!composite) {\n            return false;\n          }\n          return hasCircularDependency(\n            { name },\n            recipes![n],\n            recipes!,\n            allSymbols,\n          );\n        },\n      ).map(({ name: n }) => n);\n      return allSymbols.filter(({ name: n }) => (\n        !usedSymbols.includes(n)\n        && !circularSymbols.includes(n)\n        && n !== name\n      ));\n    },\n    [symbols, allSymbols, recipes, name],\n  );\n  const [newSymbol, setNewSymbol] = useState<SymbolType & ComboBoxAddType | null>(null);\n  useEffect(\n    () => {\n      if (newSymbol) {\n        addInput(capitalizedToCamelCase(newSymbol.name));\n        setNewSymbol(null);\n      }\n    },\n    [newSymbol, addInput, setNewSymbol],\n  );\n  return (\n    <StyledCard>\n      <CardHeader title=\"Symbols Used\" />\n      <StyledExpandCardContent style={{ flex: 1 }}>\n        <SymbolsList filter={false} symbols={symbols} onDelete={deleteHandler} />\n      </StyledExpandCardContent>\n      <RightCardActions>\n        <AutocompleteWrapper>\n          <Autocomplete\n            value={newSymbol}\n            onChange={(_, newValue) => {\n              if (typeof newValue === 'string') {\n                setNewSymbol({ name: newValue, composite: false });\n              } else if (newValue && newValue.inputValue) {\n                setNewSymbol({ name: newValue.inputValue, composite: false });\n              } else if (newValue) {\n                setNewSymbol(newValue);\n              } else {\n                setNewSymbol(null);\n              }\n            }}\n            filterOptions={(options, params) => {\n              const filtered = filter(options, params);\n\n              // Suggest the creation of a new value\n              if (params.inputValue !== '') {\n                filtered.push({\n                  inputValue: params.inputValue,\n                  name: `Add \"${capitalize(params.inputValue)}\"`,\n                });\n              }\n\n              return filtered;\n            }}\n            selectOnFocus\n            clearOnBlur\n            handleHomeEndKeys\n            options={comboSymbols as (SymbolType & ComboBoxAddType)[]}\n            getOptionLabel={(option) => {\n              if (typeof option === 'string') {\n                return option;\n              }\n              if (option && option.inputValue) {\n                return option.inputValue;\n              }\n              return option.name;\n            }}\n            renderOption={({ name: n }) => camelCaseToCapitalized(n)}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                fullWidth\n                label=\"Add Symbol\"\n              />\n            )}\n          />\n        </AutocompleteWrapper>\n      </RightCardActions>\n    </StyledCard>\n  );\n};\n","import React, {\n  FC,\n  useCallback,\n} from 'react';\nimport {\n  Button,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport {\n  useRecipes,\n  useRecipe,\n} from '../../state/recipes-v3';\nimport { ConfirmDialog, useConfirm } from '../Confirm';\nimport { camelCaseToCapitalized } from '../../utils/strings';\nimport {\n  RightCardActions, StyledCard,\n} from '../styled';\n\nexport const RemoveRecipe: FC = () => {\n  const {\n    name,\n  } = useRecipe();\n  const { removeRecipe } = useRecipes();\n  const history = useHistory();\n  const removeHandler = useCallback(\n    () => {\n      removeRecipe(name);\n      history.push('/');\n    },\n    [removeRecipe, name, history],\n  );\n  const { onOpen, ...confirmArgs } = useConfirm(removeHandler);\n  return (\n    <>\n      <StyledCard>\n        <RightCardActions>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={onOpen}\n          >\n            Delete Recipe\n          </Button>\n        </RightCardActions>\n      </StyledCard>\n      <ConfirmDialog {...confirmArgs}>\n        Are you sure you want to delete this recipe (\n        {camelCaseToCapitalized(name)}\n        )?\n      </ConfirmDialog>\n    </>\n  );\n};\n","import React, {\n  FC,\n  ChangeEvent,\n  useCallback,\n} from 'react';\nimport {\n  TextField,\n  CardContent,\n  CardHeader,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport {\n  useInput,\n  useOutput,\n  useRecipe,\n} from '../../state/recipes-v3';\nimport { camelCaseToCapitalized } from '../../utils/strings';\nimport {\n  StyledCard, StyledExpandCardContent,\n} from '../styled';\n\nexport const StyledTextField = styled(TextField)`\n  margin: 0.5rem 0;\n`;\n\nexport const Input: FC<{\n  name: string\n}> = ({\n  name,\n}) => {\n  const [value, setValue] = useInput(name);\n  const onChange = useCallback(\n    ({ target: { value: v } }: ChangeEvent<HTMLInputElement>) => setValue(v),\n    [setValue],\n  );\n  return (\n    <StyledTextField\n      fullWidth\n      label={camelCaseToCapitalized(name)}\n      value={value}\n      type=\"number\"\n      onChange={onChange}\n    />\n  );\n};\n\nexport const Output: FC = () => {\n  const [value, setValue] = useOutput();\n  const onChange = useCallback(\n    ({ target: { value: v } }: ChangeEvent<HTMLInputElement>) => setValue(v),\n    [setValue],\n  );\n  return (\n    <StyledTextField\n      fullWidth\n      label=\"Output Number\"\n      value={value}\n      type=\"number\"\n      onChange={onChange}\n    />\n  );\n};\n\nexport const MaterialsEditor: FC = () => {\n  const {\n    recipe,\n  } = useRecipe();\n  return (\n    <StyledCard>\n      <CardHeader title=\"Materials\" />\n      <StyledExpandCardContent>\n        {Object.keys(recipe?.input || {}).sort().map((it) => (\n          <Input\n            name={it}\n            key={it}\n          />\n        ))}\n      </StyledExpandCardContent>\n      <CardContent>\n        <Output />\n      </CardContent>\n    </StyledCard>\n  );\n};\n","import {\n  FC,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  capitalize, CardHeader, TextField,\n} from '@material-ui/core';\n\nimport { Autocomplete, createFilterOptions } from '@material-ui/lab';\nimport { useRecipe, useRecipes } from '../../state/recipes-v3';\nimport {\n  AutocompleteWrapper,\n  RightCardActions,\n  StyledCard,\n  StyledExpandCardContent,\n} from '../styled';\nimport { LabelList } from '../LabelList';\nimport { camelCaseToCapitalized, capitalizedToCamelCase } from '../../utils/strings';\n\ntype ComboBoxAddType = {inputValue?: string};\ntype LabelInputType = { name: string };\nconst filter = createFilterOptions<ComboBoxAddType & LabelInputType>();\n\nexport const LabelEditor: FC = () => {\n  const { labels: allLabels } = useRecipes();\n  const { recipe, removeLabel, addLabel } = useRecipe();\n  const labels = useMemo(\n    () => recipe?.labels ?? [],\n    [recipe],\n  );\n  const inheritedLabels = useMemo(\n    () => recipe?.inheritedLabels,\n    [recipe],\n  );\n  const removeHandler = useCallback(\n    (label: string) => (e: Event) => {\n      e.preventDefault();\n      removeLabel(label);\n    },\n    [removeLabel],\n  );\n  const comboLabels: LabelInputType[] = useMemo(\n    () => allLabels.filter((n) => !labels.includes(n))\n      .map((it) => ({ name: it })),\n    [labels, allLabels],\n  );\n  const [newLabel, setNewLabel] = useState<LabelInputType & ComboBoxAddType | null>(null);\n  useEffect(\n    () => {\n      if (newLabel) {\n        addLabel(capitalizedToCamelCase(newLabel.name));\n        setNewLabel(null);\n      }\n    },\n    [newLabel, addLabel, setNewLabel],\n  );\n  return (\n    <StyledCard>\n      <CardHeader title=\"Labels\" />\n      {labels && (\n      <StyledExpandCardContent>\n        <LabelList\n          labels={labels}\n          extraLabels={inheritedLabels}\n          onRemove={removeHandler}\n          filter={false}\n        />\n      </StyledExpandCardContent>\n      )}\n      <RightCardActions>\n        <AutocompleteWrapper>\n          <Autocomplete\n            value={newLabel}\n            onChange={(_, newValue) => {\n              if (typeof newValue === 'string') {\n                setNewLabel({ name: newValue });\n              } else if (newValue && newValue.inputValue) {\n                setNewLabel({ name: newValue.inputValue });\n              } else if (newValue) {\n                setNewLabel(newValue);\n              } else {\n                setNewLabel(null);\n              }\n            }}\n            filterOptions={(options, params) => {\n              const filtered = filter(options, params);\n\n              // Suggest the creation of a new value\n              if (params.inputValue !== '') {\n                filtered.push({\n                  inputValue: params.inputValue,\n                  name: `Add \"${capitalize(params.inputValue)}\"`,\n                });\n              }\n\n              return filtered;\n            }}\n            selectOnFocus\n            clearOnBlur\n            handleHomeEndKeys\n            options={comboLabels as (LabelInputType & ComboBoxAddType)[]}\n            getOptionLabel={(option) => {\n              if (typeof option === 'string') {\n                return option;\n              }\n              if (option && option.inputValue) {\n                return option.inputValue;\n              }\n              return option.name;\n            }}\n            renderOption={({ name: n }) => camelCaseToCapitalized(n)}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                fullWidth\n                label=\"Add Label\"\n              />\n            )}\n          />\n        </AutocompleteWrapper>\n      </RightCardActions>\n    </StyledCard>\n  );\n};\n","import React, {\n  FC,\n} from 'react';\nimport {\n  Container,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport {\n  useRecipe,\n} from '../../state/recipes-v3';\n\nimport { Title } from '../../state/title';\nimport { camelCaseToCapitalized } from '../../utils/strings';\nimport {\n  onMobile,\n} from '../styled';\nimport { SymbolsEditor } from './SymbolsEditor';\nimport { RemoveRecipe } from './RemoveRecipe';\nimport { MaterialsEditor } from './MaterialsEditor';\nimport { LabelEditor } from './LabelsEditor';\n\nexport const StyledContainer = styled(Container)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0;\n  & > * {\n    grid-column: 1;\n  }\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const SymbolsWrapper = styled.div`\n  grid-row: 1;\n  ${onMobile} {\n    grid-row: 1;\n  }\n`;\n\nexport const LabelsWrapper = styled.div`\n  grid-row: 2;\n  ${onMobile} {\n    grid-row: 2;\n  }\n`;\n\nexport const RemoveWrapper = styled.div`\n  grid-row: 3;\n  ${onMobile} {\n    grid-row: 4;\n  }\n`;\n\nexport const InputsWrapper = styled.div`\n  grid-row: 1/5;\n  grid-column: 2;\n  ${onMobile} {\n    grid-column: 1;\n    grid-row: 3;\n  }\n`;\n\nexport const RecipeEditor: FC = () => {\n  const {\n    name,\n    recipe,\n  } = useRecipe();\n  if (!recipe) {\n    return null;\n  }\n  return (\n    <>\n      <Title title={`Edit: ${camelCaseToCapitalized(name)}`} />\n      <StyledContainer>\n        <SymbolsWrapper>\n          <SymbolsEditor />\n        </SymbolsWrapper>\n        <LabelsWrapper>\n          <LabelEditor />\n        </LabelsWrapper>\n        <InputsWrapper>\n          <MaterialsEditor />\n        </InputsWrapper>\n        <RemoveWrapper>\n          <RemoveRecipe />\n        </RemoveWrapper>\n      </StyledContainer>\n    </>\n  );\n};\n","import {\n  useRef,\n  FC,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\nimport {\n  CardContent,\n  withTheme,\n  Theme,\n} from '@material-ui/core';\nimport Tree from 'react-d3-tree';\nimport Measure, { BoundingRect } from 'react-measure';\nimport styled from 'styled-components';\n\nimport { useHistory } from 'react-router';\nimport { RecipeAST } from '../../utils/types';\nimport {\n  onMobile,\n} from '../styled';\nimport { capitalizedToCamelCase } from '../../utils/strings';\nimport { recipeBaseRoute } from '../../config/constants';\nimport { useSymbols } from '../../state/recipes-v3';\n\nexport const SVGWrapper = styled(CardContent)`\n  width: 100%;\n  height: 500px;\n  ${onMobile} {\n    height: 300px;\n  }\n  flex: 1;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: 0 !important;\n`;\n\nconst svgStyle = ({\n  theme: {\n    palette: {\n      background: {\n        default: background,\n      },\n      text: {\n        primary: text,\n      },\n    },\n    shadows: [shadow],\n  },\n}: { theme: Theme }) => `\n  background: ${background};\n  color: ${text};\n  box-shadow: ${shadow};\n`;\nconst leafNodeStyle = ({\n  theme: {\n    palette: {\n      text: {\n        disabled: text,\n      },\n    },\n  },\n}: { theme: Theme }) => `\n  --leaf-color: ${text};\n`;\n\nexport const SVG = withTheme(\n  styled.div<{styleLeafNodes: boolean}>`\n    width: 100%;\n    height: 100%;\n    ${svgStyle}\n      ${leafNodeStyle}\n    .linkBase {\n      stroke: currentColor;\n      opacity: 0.5;\n    }\n    .nodeBase, .nodeNameBase, .leafNodeBase {\n      fill: currentColor;\n      stroke: transparent;\n    }\n    ${({ styleLeafNodes }) => (styleLeafNodes\n    ? `\n        .leafNodeBase {\n          color: var(--leaf-color);\n        }\n      `\n    : '')}\n  `,\n);\n\nexport const AST: FC<{\n  data: RecipeAST\n  styleLeafNodes?: boolean,\n}> = ({\n  data,\n  styleLeafNodes = true,\n}) => {\n  const [size, setSize] = useState<BoundingRect>();\n  const symbols = useSymbols();\n  const history = useHistory();\n  const translate = useMemo(\n    () => (size\n      ? ({\n        x: size.width / 2,\n        y: size.height / 2,\n      })\n      : undefined),\n    [size],\n  );\n  const rootRef = useRef<HTMLDivElement>();\n  const onClick = useCallback(\n    ({ name }) => {\n      const shortName = capitalizedToCamelCase(name.trim());\n      const symbol = symbols.find(({ name: n }) => n === shortName);\n      if (symbol?.composite) {\n        history.push([\n          recipeBaseRoute.replace(':name', shortName),\n          'view',\n        ].join('/'));\n      }\n    },\n    [history, symbols],\n  );\n  useEffect(\n    () => {\n      const el = rootRef.current;\n      if (el) {\n        const handler = (event: TouchEvent) => event.preventDefault();\n        el.addEventListener('touchmove',\n          handler,\n          { passive: false });\n        return () => el.removeEventListener('touchmove', handler);\n      }\n      return undefined;\n    },\n    [rootRef],\n  );\n  return (\n    <SVGWrapper innerRef={rootRef}>\n      <Measure\n        bounds\n        onResize={({ bounds }) => setSize(bounds)}\n      >\n        {({ measureRef }) => (\n          <SVG ref={measureRef} styleLeafNodes={styleLeafNodes}>\n            <Tree\n              data={data}\n              orientation=\"vertical\"\n              collapsible={false}\n              translate={translate}\n              onClick={onClick}\n              nodeSize={{\n                x: 200,\n                y: 200,\n              }}\n              textLayout={{\n                textAnchor: 'start',\n                y: 0,\n                x: 15,\n              }}\n            />\n          </SVG>\n        )}\n      </Measure>\n    </SVGWrapper>\n  );\n};\n","import {\n  FC,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\nimport {\n  Backdrop,\n  Fade,\n  Modal,\n  Button,\n  IconButton,\n  withTheme,\n  Theme,\n  CardHeader,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport styled from 'styled-components';\n\nimport {\n  onTablet,\n  RightCardActions,\n  ModalContainer,\n  ModalWrapper,\n  ModalContent,\n} from '../styled';\nimport { camelCaseToCapitalized } from '../../utils/strings';\nimport { RecipeAST } from '../../utils/types';\nimport { usePreventScroll } from '../../hooks/scroll';\nimport { AST } from './Tree';\n\nconst getPadding = ({\n  theme: { spacing },\n}: { theme: Theme }) => `${spacing(2)}px`;\n\nexport const StyledCardHeader = withTheme(\n  styled(CardHeader)`\n    padding-left: ${getPadding};\n    padding-right: ${getPadding};\n    padding-left: calc(${getPadding} + env(safe-area-inset-left));\n    padding-right: calc(${getPadding} + env(safe-area-inset-right));\n  `,\n);\n\nexport const LargeModalContainer = styled(ModalContainer)`\n  max-width: initial;\n  padding: 0;\n  margin: 0;\n`;\n\nexport const LargeModalContent = styled(ModalContent)`\n  flex: 1;\n  display: flex;\n  flex-flow: column nowrap;\n  padding: 0 !important;\n`;\n\nconst largePadding = 50;\nexport const LargeModalWrapper = styled(ModalWrapper)`\n  width: calc(100% - ${largePadding * 2}px);\n  height: calc(100% - ${largePadding * 2}px);\n  ${onTablet} {\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nexport const Visualization: FC<{\n  ast?: RecipeAST,\n  title: string,\n  styleLeafNodes?: boolean,\n}> = ({\n  ast,\n  title,\n  styleLeafNodes = true,\n}) => {\n  const scrollPrevent = usePreventScroll();\n  const [modalOpen, setModalOpen] = useState(false);\n  const open = useCallback(\n    () => setModalOpen(true),\n    [setModalOpen],\n  );\n  const close = useCallback(\n    () => setModalOpen(false),\n    [setModalOpen],\n  );\n  const humanReadableAst = useMemo(\n    () => {\n      if (!ast) {\n        return undefined;\n      }\n      const updateNode = ({ name, children }: RecipeAST): RecipeAST => ({\n        name: camelCaseToCapitalized(name),\n        ...(children\n          ? { children: children.map(updateNode) }\n          : {}),\n      });\n      return updateNode(ast);\n    },\n    [ast],\n  );\n  useEffect(\n    () => {\n      if (modalOpen) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [modalOpen, scrollPrevent],\n  );\n  return (\n    <>\n      {humanReadableAst && (\n      <AST\n        data={humanReadableAst}\n        styleLeafNodes={styleLeafNodes}\n      />\n      )}\n      <RightCardActions>\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={open}\n        >\n          View Large\n        </Button>\n      </RightCardActions>\n      <Modal\n        open={modalOpen}\n        onClose={close}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={modalOpen}>\n          <LargeModalContainer>\n            <LargeModalWrapper elevation={10}>\n              <StyledCardHeader\n                title={`Large View: ${title}`}\n                action={(\n                  <IconButton onClick={close}>\n                    <CloseIcon />\n                  </IconButton>\n              )}\n              />\n              <LargeModalContent>\n                {humanReadableAst && (\n                <AST\n                  data={humanReadableAst}\n                  styleLeafNodes={styleLeafNodes}\n                />\n                )}\n              </LargeModalContent>\n            </LargeModalWrapper>\n          </LargeModalContainer>\n        </Fade>\n      </Modal>\n    </>\n  );\n};\n","import React, {\n  FC,\n  useCallback,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  Typography,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Tab,\n  withTheme,\n  Theme,\n} from '@material-ui/core';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport styled from 'styled-components';\n\nimport { TabContext } from '@material-ui/lab';\nimport { useHistory } from 'react-router';\nimport {\n  useAST,\n  useUses,\n  useRecipe,\n  useResources,\n  useSteps,\n} from '../../state/recipes-v3';\n\nimport {\n  onMobile,\n  StyledTabPanel,\n  StyledTabs,\n} from '../styled';\n\nimport { camelCaseToCapitalized } from '../../utils/strings';\nimport { Title } from '../../state/title';\nimport { useIsMobile } from '../../hooks/useMedia';\nimport { Visualization } from './Visualization';\nimport { useStacks } from '../../state/stack';\nimport { recipeBaseRoute } from '../../config/constants';\n\nexport const StyledContainer = styled(Container)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0;\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst backgroundGetter = ({\n  theme:\n  {\n    palette: {\n      background: {\n        default: val,\n      },\n    },\n  },\n}: { theme: Theme }) => val;\nconst borderRadiusGetter = ({\n  theme:\n  {\n    shape: {\n      borderRadius: val,\n    },\n  },\n}: { theme: Theme }) => val;\nconst borderGetter = ({\n  theme:\n  {\n    palette: {\n      background: {\n        paper: val,\n      },\n    },\n  },\n}: { theme: Theme }) => val;\n\nexport const ResourceWrapper = withTheme(\n  styled.div<{\n    columns?: number,\n    bold?: boolean,\n  }>`\n    display: grid;\n    grid-template-columns: 5fr repeat(${({ columns }) => columns || 1}, 100px);\n    background: ${backgroundGetter};\n    overflow: hidden;\n    cursor: ${({ onClick }) => (onClick ? 'pointer' : 'default')};\n    &:first-of-type {\n      border-top-left-radius: ${borderRadiusGetter}px;\n      border-top-right-radius: ${borderRadiusGetter}px;\n    }\n    & * {\n      font-weight: ${({ bold }) => (bold ? 'bold' : 'normal')};\n      font-size: ${({ bold }) => (bold ? '1.2' : '1')}rem;\n    }\n    & > * {\n      padding: 10px;\n      border-top: solid 1px ${borderGetter};\n      border-left: solid 1px ${borderGetter};\n      &:last-child {\n        border-right: solid 1px ${borderGetter};\n      }\n    }\n    &:last-of-type {\n      border-bottom-left-radius: ${borderRadiusGetter}px;\n      border-bottom-right-radius: ${borderRadiusGetter}px;\n      & > * {\n        border-bottom: solid 1px ${borderGetter};\n      }\n    }\n  `,\n);\n\nexport const ResourceText = styled(Typography)`\n  flex: 1;\n`;\n\nexport const ResourceNumber = styled(Typography)`\n  font-feature-settings: tnum;\n  font-variant-numeric: tabular-nums;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const SVGCard = styled(Card)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nexport const ResourceHeader: FC<{\n  title: string\n}> = ({\n  title,\n}) => {\n  const { isEnabled } = useStacks();\n  return (\n    <ResourceWrapper columns={isEnabled ? 2 : 1} bold>\n      <ResourceText>{title}</ResourceText>\n      <ResourceNumber>\n        {isEnabled ? 'Stacks' : 'Amount'}\n      </ResourceNumber>\n      {isEnabled && (\n        <ResourceNumber>Amount</ResourceNumber>\n      )}\n    </ResourceWrapper>\n  );\n};\n\nexport const ResourcePreview: FC<{\n  text: string,\n  amount: number,\n  onClick?: () => void,\n}> = ({\n  text,\n  amount,\n  onClick,\n}) => {\n  const { isEnabled, stackSize } = useStacks();\n  return (\n    <ResourceWrapper columns={isEnabled ? 2 : 1} onClick={onClick}>\n      <ResourceText>{camelCaseToCapitalized(text)}</ResourceText>\n      <ResourceNumber>\n        {isEnabled && stackSize\n          ? Math.ceil(amount / stackSize!)\n          : amount}\n      </ResourceNumber>\n      {isEnabled && stackSize && (\n      <ResourceNumber>\n        {amount}\n      </ResourceNumber>\n      )}\n    </ResourceWrapper>\n  );\n};\n\nconst ResourcesSummary: FC = () => {\n  const resources = useResources();\n  const rootResources = useMemo(\n    () => Object.entries(resources)\n      .filter(([key]) => !key.startsWith('_')),\n    [resources],\n  );\n  return (\n    <Card>\n      <CardHeader title=\"Total Resouces\" />\n      <CardContent>\n        <ResourceHeader title=\"Resource\" />\n        {rootResources.map(\n          ([key, value]) => (\n            <ResourcePreview key={key} text={key} amount={value} />\n          ),\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const ASTPreview: FC = () => {\n  const ast = useAST();\n  const uses = useUses();\n  const isMobile = useIsMobile();\n  const tabs = useMemo(\n    () => [\n      { title: 'Dependencies', ast, styleLeafNodes: true },\n      { title: 'Uses', ast: uses, styleLeafNodes: false },\n    ],\n    [ast, uses],\n  );\n  const [tab, setTab] = useState<string>(tabs[0].title);\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <SVGCard>\n      <TabContext value={tab}>\n        <StyledTabs\n          value={tab}\n          onChange={onChange}\n          variant={isMobile ? 'fullWidth' : undefined}\n        >\n          {tabs.map(({ title }) => (\n            <Tab\n              key={title}\n              value={title}\n              label={title}\n            />\n          ))}\n        </StyledTabs>\n        {tabs.map(({ title, ast: tree, styleLeafNodes }) => (\n          <StyledTabPanel value={title} key={title}>\n            <Visualization\n              ast={tree}\n              title={title}\n              styleLeafNodes={styleLeafNodes}\n            />\n          </StyledTabPanel>\n        ))}\n      </TabContext>\n    </SVGCard>\n  );\n};\n\nexport const FullCol = styled.div`\n  grid-row-start: 1;\n  grid-row-end: 4;\n  grid-column: 2;\n  ${onMobile} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst StyledAccordionDetails = styled(AccordionDetails)`\n  display: flex;\n  flex-flow: column nowrap;\n`;\n\nexport const StepsView: FC = () => {\n  const steps = useSteps();\n  const history = useHistory();\n  const [active, setActive] = useState<number>(0);\n  const activate = useCallback(\n    (id: number) => () => setActive(id),\n    [setActive],\n  );\n  const onClick = useCallback(\n    (name: string) => () => {\n      history.push([\n        recipeBaseRoute.replace(':name', name),\n        'view',\n      ].join('/'));\n    },\n    [history],\n  );\n  return (\n    <div>\n      {steps && steps.map((step, idx) => (\n        <Accordion\n          key={`${idx.toString()}`}\n          expanded={active === idx}\n          onChange={activate(idx)}\n        >\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n          >\n            {`Step ${idx + 1}`}\n          </AccordionSummary>\n          <StyledAccordionDetails>\n            <ResourceHeader title=\"Recipes\" />\n            {step.map(\n              ({ name, amount }) => (\n                <ResourcePreview\n                  key={name}\n                  text={name}\n                  amount={amount}\n                  onClick={onClick(name)}\n                />\n              ),\n            )}\n          </StyledAccordionDetails>\n        </Accordion>\n      ))}\n    </div>\n  );\n};\n\nexport const ResourcesView: FC = () => {\n  const { name } = useRecipe();\n  return (\n    <>\n      <Title title={`View: ${camelCaseToCapitalized(name)}`} />\n      <StyledContainer>\n        <div>\n          <ResourcesSummary />\n        </div>\n        <FullCol>\n          <ASTPreview />\n        </FullCol>\n        <div>\n          <StepsView />\n        </div>\n      </StyledContainer>\n    </>\n  );\n};\n\nexport const RecipeViewer: FC = () => (\n  <ResourcesView />\n);\n","import React, {\n  FC, useCallback, useEffect, useState,\n} from 'react';\nimport {\n  Route,\n  useHistory,\n  useLocation,\n  useParams, useRouteMatch,\n} from 'react-router';\nimport {\n  AppBar, Container, Tab,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport {\n  RecipeProvider, useRecipe,\n} from '../state/recipes-v3';\n\nimport { useIsMobile } from '../hooks/useMedia';\nimport { RecipeEditor } from '../components/RecipeEditor';\nimport { RecipeViewer } from '../components/RecipeViewer';\nimport { StyledTabs } from '../components/styled';\nimport { usePrevious } from '../hooks/usePrevious';\nimport { recipeBaseRoute } from '../config/constants';\n\nconst StyledContainer = styled(Container)`\n  padding: 1rem 0;\n`;\n\nexport const baseRoute = recipeBaseRoute;\n\nconst tabs = [\n  { title: 'Viewer', Component: RecipeViewer, route: '/view' },\n  { title: 'Editor', Component: RecipeEditor, route: '/edit' },\n];\n\nexport const routes = tabs.map(({ route }) => route);\n\nexport const RouteOnEmpty: FC = () => {\n  const { recipe } = useRecipe();\n  const history = useHistory();\n  const [hasLoaded, setHasLoaded] = useState<boolean>(false);\n  useEffect(\n    () => {\n      setTimeout(setHasLoaded, 500, true);\n    },\n    [setHasLoaded],\n  );\n  useEffect(\n    () => {\n      if (hasLoaded && !recipe) {\n        history.push('/not-found');\n      }\n    },\n    [recipe, hasLoaded, history],\n  );\n  return <></>;\n};\n\nexport const RecipeScreen: FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const path = useRouteMatch({\n    path: baseRoute,\n  });\n  const { name } = useParams<{name:string}>();\n  const isMobile = useIsMobile();\n  const [tab, setTab] = useState<number>(\n    path\n      ? (\n        () => {\n          const idx = tabs.findIndex(\n            ({ route }) => route === location.pathname.replace(path.url, ''),\n          );\n          if (idx >= 0) {\n            return idx;\n          }\n          return 0;\n        }\n      )()\n      : 0,\n  );\n  useEffect(\n    () => {\n      if (path && path.isExact) {\n        history.push(`${path.url}${tabs[0].route}`);\n        setTab(0);\n      }\n    },\n    [path, history, location],\n  );\n  const prevTab = usePrevious(tab);\n  useEffect(\n    () => {\n      if (path && prevTab !== tab) {\n        history.push(`${path.url}${(tabs[tab] || tabs[0]).route}`);\n      }\n    },\n    [history, path, tab, prevTab],\n  );\n  const onChange = useCallback(\n    (event, newValue) => setTab(newValue),\n    [setTab],\n  );\n  return (\n    <RecipeProvider name={name}>\n      <RouteOnEmpty />\n      <StyledContainer>\n        <AppBar position=\"static\">\n          <StyledTabs\n            value={tab}\n            onChange={onChange}\n            variant={isMobile ? 'fullWidth' : undefined}\n          >\n            {tabs.map(({ title }) => <Tab label={title} key={title} />)}\n          </StyledTabs>\n        </AppBar>\n        {tabs.map(({ title, route, Component }) => (\n          <Route\n            exact\n            path={`${baseRoute}${route}`}\n            component={Component}\n            key={title}\n          />\n        ))}\n      </StyledContainer>\n    </RecipeProvider>\n  );\n};\n","import React, {\n  useState,\n  useCallback,\n  FC,\n  useMemo,\n  useEffect,\n} from 'react';\n\nimport {\n  Modal,\n  Backdrop,\n  Fade,\n  CardHeader,\n  TextField,\n  Button,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport { useHistory } from 'react-router';\nimport {\n  ModalContainer,\n  ModalContent,\n  ModalWrapper,\n  RightCardActions,\n} from './styled';\n\nimport { useRecipes } from '../state/recipes-v3';\nimport { camelCaseToCapitalized, capitalize, capitalizedToCamelCase } from '../utils/strings';\nimport { SymbolType } from '../utils/types';\nimport { baseRoute } from '../screens/Recipe';\n\nimport { BottomFab } from './BottomFab';\nimport { usePreventScroll } from '../hooks/scroll';\n\ntype ComboBoxAddType = {inputValue?: string};\nconst filter = createFilterOptions<SymbolType & ComboBoxAddType>();\n\nexport const CreateRecipeModal: FC<{\n  open: boolean,\n  onClose: () => void,\n}> = ({\n  open,\n  onClose,\n}) => {\n  const history = useHistory();\n  const scrollPrevent = usePreventScroll();\n  const { symbols, addRecipe } = useRecipes();\n  const availableSymbols = useMemo(\n    () => symbols.filter(({ composite }) => !composite),\n    [symbols],\n  );\n  const [newSymbol, setNewSymbol] = useState<SymbolType & ComboBoxAddType | null>(null);\n  const name = useMemo(\n    () => newSymbol?.name,\n    [newSymbol],\n  );\n  const close = useCallback(\n    () => {\n      setNewSymbol(null);\n      onClose();\n    },\n    [setNewSymbol, onClose],\n  );\n  const onSave = useCallback(\n    () => {\n      if (name) {\n        const symbol = capitalizedToCamelCase(name.trim());\n        addRecipe(symbol);\n        history.push([\n          baseRoute.replace(':name', symbol),\n          'edit',\n        ].join('/'));\n      }\n      close();\n    },\n    [name, close, history],\n  );\n  useEffect(\n    () => {\n      if (open) {\n        scrollPrevent.open();\n      } else {\n        scrollPrevent.close();\n      }\n    },\n    [open, scrollPrevent],\n  );\n  return (\n    <Modal\n      open={open}\n      onClose={close}\n      closeAfterTransition\n      disableEnforceFocus\n      disableAutoFocus\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      <Fade in={open}>\n        <ModalContainer>\n          <ModalWrapper elevation={10}>\n            <CardHeader title=\"Create new Recipe\" />\n            <ModalContent>\n              <Autocomplete\n                value={newSymbol}\n                onChange={(_, newValue) => {\n                  if (typeof newValue === 'string') {\n                    setNewSymbol({ name: newValue, composite: false });\n                  } else if (newValue && newValue.inputValue) {\n                    setNewSymbol({ name: newValue.inputValue, composite: false });\n                  } else if (newValue) {\n                    setNewSymbol(newValue);\n                  } else {\n                    setNewSymbol(null);\n                  }\n                }}\n                filterOptions={(options, params) => {\n                  const filtered = filter(options, params);\n\n                  // Suggest the creation of a new value\n                  if (params.inputValue !== '') {\n                    filtered.push({\n                      inputValue: params.inputValue,\n                      name: `Add \"${capitalize(params.inputValue)}\"`,\n                    });\n                  }\n\n                  return filtered;\n                }}\n                selectOnFocus\n                clearOnBlur\n                handleHomeEndKeys\n                options={availableSymbols as (SymbolType & ComboBoxAddType)[]}\n                getOptionLabel={(option) => {\n                  if (typeof option === 'string') {\n                    return option;\n                  }\n                  if (option && option.inputValue) {\n                    return option.inputValue;\n                  }\n                  return option.name;\n                }}\n                renderOption={({ name: n }) => camelCaseToCapitalized(n)}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    fullWidth\n                    label=\"Add Recipe\"\n                  />\n                )}\n              />\n            </ModalContent>\n            <RightCardActions>\n              <Button color=\"primary\" variant=\"contained\" onClick={onSave}>Save</Button>\n              <Button color=\"secondary\" onClick={close}>Cancel</Button>\n            </RightCardActions>\n          </ModalWrapper>\n        </ModalContainer>\n      </Fade>\n    </Modal>\n  );\n};\n\nexport const CreateRecipeWrapper: FC = () => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const close = useCallback(\n    () => setIsOpen(false),\n    [setIsOpen],\n  );\n  const open = useCallback(\n    () => setIsOpen(true),\n    [setIsOpen],\n  );\n  return (\n    <>\n      <BottomFab Icon={AddIcon} onClick={open} />\n      <CreateRecipeModal open={isOpen} onClose={close} />\n    </>\n  );\n};\n","import React from 'react';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Container,\n} from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { Title } from '../state/title';\nimport Symbols from '../components/SymbolsList';\nimport { RecipesList } from '../components/RecipesList';\nimport { onMobile } from '../components/styled';\n\nexport const StyledContainer = styled(Container)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 1rem;\n  padding: 1rem 0;\n  ${onMobile} {\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const HomeScreen = () => (\n  <>\n    <Title title=\"Crafting Works\" isRoot />\n    <StyledContainer>\n      <div>\n        <Card>\n          <CardHeader title=\"Symbols\" />\n          <CardContent>\n            <Symbols />\n          </CardContent>\n        </Card>\n      </div>\n      <div>\n        <Card>\n          <CardHeader title=\"Recipes\" />\n          <CardContent>\n            <RecipesList />\n          </CardContent>\n        </Card>\n      </div>\n    </StyledContainer>\n  </>\n);\n","import React, { FC } from 'react';\nimport { Title } from '../state/title';\nimport { useLocalStorageObject } from '../hooks/useLocalStorageObject';\n\nimport seedData from '../config/seed';\n\nexport const TestScreen: FC = () => {\n  const [value] = useLocalStorageObject('test', seedData);\n  return (\n    <>\n      <Title>Test Screen</Title>\n      <code style={{ whiteSpace: 'pre-wrap' }}>\n        {JSON.stringify(value, undefined, 2)}\n      </code>\n    </>\n  );\n};\n","import React, { FC } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  Typography,\n} from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { Title } from '../state/title';\n\nexport const StyledContainer = styled(Container)`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  margin-top: 50px;\n`;\n\nexport const Error404Screen: FC = () => (\n  <>\n    <Title>Not Found</Title>\n    <StyledContainer>\n      <Card>\n        <CardHeader title=\"404 Error\" />\n        <CardContent>\n          <Typography>\n            This is not the page you&apos;re looking for\n          </Typography>\n        </CardContent>\n      </Card>\n    </StyledContainer>\n  </>\n);\n","import React, { FC } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Route, Switch } from 'react-router';\nimport { Container, withTheme } from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { use100vh } from 'react-div-100vh';\n\nimport { baseURL } from './config/constants';\nimport { Redirect } from './components/Redirect';\n\nimport { NavBar } from './components/NavBar';\nimport { Drawer, RouteChangeDrawerClose } from './components/Drawer';\nimport { CreateRecipeWrapper } from './components/CreateRecipe';\n\nimport { HomeScreen } from './screens/Home';\nimport { RecipeScreen, baseRoute as recipeRoute } from './screens/Recipe';\nimport { TestScreen } from './screens/Test';\nimport { Error404Screen } from './screens/404';\n\nconst StyledContainerRaw = withTheme(\n  styled(Container)`\n    background: ${({ theme: { palette: { background: { default: background } } } }) => background};\n    width: 100vw;\n    max-width: initial;\n  `,\n);\n\nconst StyledContainer: FC = ({ children }) => {\n  const height = use100vh();\n  return (\n    <StyledContainerRaw style={{ minHeight: height }}>\n      {children}\n    </StyledContainerRaw>\n  );\n};\n\nexport const App: FC = () => (\n  <Router basename={baseURL}>\n    <Redirect />\n    <RouteChangeDrawerClose />\n    <StyledContainer>\n      <NavBar />\n      <Drawer />\n      <Switch>\n        <Route exact path=\"/\" component={HomeScreen} />\n        <Route path={recipeRoute} component={RecipeScreen} />\n        <Route exact path=\"/test\" component={TestScreen} />\n        <Route path=\"/\" component={Error404Screen} />\n      </Switch>\n      <CreateRecipeWrapper />\n    </StyledContainer>\n  </Router>\n);\n","/* eslint-disable no-console,@typescript-eslint/no-use-before-define,no-param-reassign */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    || window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createElement, FC } from 'react';\nimport { render } from 'react-dom';\nimport { StylesProvider } from '@material-ui/core/styles';\nimport 'typeface-roboto';\n\nimport './styles.css';\nimport { App } from './App';\nimport { DrawerProvider } from './state/drawer';\nimport { TitleProvider } from './state/title';\nimport { AppThemeProvider as ThemeProvider } from './state/theme';\nimport { RecipeProviderV3 } from './state/recipes-v3';\nimport { StackProvider } from './state/stack';\nimport { LabelFilterProvider } from './state/filter';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { LabelProvider } from './state/label';\n\nconst CombineProviders: FC<{\n  providers: FC[]\n}> = ({\n  providers,\n  children,\n}) => providers.reverse().reduce(\n  (prev, it) => createElement(it, undefined, prev),\n  children as any,\n);\n\ndocument.body.className = '';\n\nconst rootElement = document.getElementById('root');\nrender(\n  <StylesProvider injectFirst>\n    <CombineProviders\n      providers={[\n        ThemeProvider,\n        DrawerProvider,\n        RecipeProviderV3,\n        LabelProvider,\n        StackProvider,\n        TitleProvider,\n        LabelFilterProvider,\n      ]}\n    >\n      <App />\n    </CombineProviders>\n  </StylesProvider>,\n  rootElement,\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration[\n  process.env.NODE_ENV === 'production'\n    ? 'register'\n    : 'unregister'\n]();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}